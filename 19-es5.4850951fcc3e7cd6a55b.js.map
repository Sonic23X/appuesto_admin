{"version":3,"sources":["webpack:///node_modules/engine.io-client/node_modules/engine.io-parser/lib/browser.js","webpack:///node_modules/engine.io-client/lib/transports/polling-xhr.js","webpack:///node_modules/blob/index.js","webpack:///node_modules/socket.io-client/lib/on.js","webpack:///node_modules/engine.io-client/lib/globalThis.browser.js","webpack:///node_modules/engine.io-client/lib/socket.js","webpack:///node_modules/engine.io-client/node_modules/engine.io-parser/lib/utf8.js","webpack:///node_modules/socket.io-client/node_modules/ms/index.js","webpack:///node_modules/has-binary2/node_modules/isarray/index.js","webpack:///node_modules/indexof/index.js","webpack:///node_modules/engine.io-client/lib/xmlhttprequest.js","webpack:///node_modules/yeast/index.js","webpack:///node_modules/backo2/index.js","webpack:///node_modules/engine.io-client/lib/transports/websocket.js","webpack:///node_modules/engine.io-client/lib/transports/polling.js","webpack:///node_modules/engine.io-client/lib/transports/polling-jsonp.js","webpack:///node_modules/engine.io-client/lib/transport.js","webpack:///node_modules/engine.io-client/node_modules/debug/src/browser.js","webpack:///node_modules/howler/dist/howler.js","webpack:///node_modules/socket.io-client/lib/socket.js","webpack:///src/app/shared/services/request-alert.service.ts","webpack:///node_modules/socket.io-client/node_modules/socket.io-parser/binary.js","webpack:///node_modules/socket.io-client/node_modules/debug/src/debug.js","webpack:///node_modules/component-bind/index.js","webpack:///node_modules/engine.io-client/node_modules/engine.io-parser/lib/keys.js","webpack:///node_modules/parseqs/index.js","webpack:///node_modules/socket.io-client/node_modules/socket.io-parser/index.js","webpack:///node_modules/parseuri/index.js","webpack:///node_modules/has-binary2/index.js","webpack:///node_modules/engine.io-client/node_modules/ms/index.js","webpack:///node_modules/component-inherit/index.js","webpack:///node_modules/engine.io-client/lib/transports/index.js","webpack:///node_modules/component-emitter/index.js","webpack:///node_modules/engine.io-client/node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","webpack:///node_modules/socket.io-client/lib/manager.js","webpack:///node_modules/socket.io-client/lib/index.js","webpack:///src/app/shared/utils/sounds.utils.ts","webpack:///src/app/shared/utils/index.ts","webpack:///node_modules/to-array/index.js","webpack:///node_modules/engine.io-client/lib/index.js","webpack:///node_modules/engine.io-client/node_modules/debug/src/debug.js","webpack:///node_modules/socket.io-client/node_modules/isarray/index.js","webpack:///node_modules/socket.io-client/node_modules/socket.io-parser/is-buffer.js","webpack:///src/app/pages/staff-layout/staff-layout.module.ts","webpack:///src/app/shared/components/notification-sound-enabler/notification-sound-enabler.component.ts","webpack:///src/app/shared/components/notification-sound-enabler/notification-sound-enabler.component.html","webpack:///src/app/pages/staff-layout/staff-layout.component.ts","webpack:///src/app/pages/staff-layout/staff-layout.component.html","webpack:///src/app/pages/staff-layout/staff-layout-routing.module.ts","webpack:///src/app/shared/components/notification-sound-enabler/notification-sound-enabler.module.ts","webpack:///node_modules/socket.io-client/node_modules/debug/src/browser.js","webpack:///node_modules/has-cors/index.js","webpack:///node_modules/arraybuffer.slice/index.js","webpack:///node_modules/socket.io-client/lib/url.js","webpack:///node_modules/after/index.js"],"names":["base64encoder","keys","hasBinary","sliceBuffer","after","utf8","ArrayBuffer","isAndroid","navigator","test","userAgent","isPhantomJS","dontSendBlobs","exports","protocol","packets","open","close","ping","pong","message","upgrade","noop","packetslist","err","type","data","Blob","map","ary","each","done","result","Array","length","next","eachWithIndex","i","el","cb","error","msg","encodePacket","packet","supportsBinary","utf8encode","callback","buffer","encodeBase64Packet","contentArray","Uint8Array","resultBuffer","byteLength","fr","FileReader","onload","readAsArrayBuffer","base64","encoded","encode","String","strict","b64data","b64","split","readAsDataURL","fromCharCode","apply","e","typed","basic","btoa","decodePacket","binaryType","utf8decode","charAt","decodeBase64Packet","substr","decode","Number","substring","rest","encodePayload","isBinary","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","results","join","decodePayload","decodePayloadAsBinary","n","l","chr","encodedPackets","totalLength","reduce","acc","p","len","toString","resultArray","bufferIndex","forEach","isString","ab","view","charCodeAt","lenStr","parseInt","binaryIdentifier","size","lengthAry","blob","bufferTail","buffers","tailArray","msgLength","push","total","XMLHttpRequest","Polling","Emitter","inherit","debug","globalThis","empty","XHR","opts","call","this","requestTimeout","extraHeaders","location","isSSL","port","xd","hostname","xs","secure","Request","method","uri","async","agent","enablesXDR","withCredentials","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","create","unloadHandler","requests","hasOwnProperty","abort","module","prototype","request","doWrite","fn","req","self","on","onError","sendXhr","doPoll","onData","pollXhr","xdomain","xscheme","xhr","setDisableHeaderCheck","setRequestHeader","timeout","hasXDR","onLoad","onerror","responseText","onreadystatechange","readyState","contentType","getResponseHeader","responseType","status","setTimeout","send","document","index","requestsCount","onSuccess","emit","cleanup","fromError","response","XDomainRequest","attachEvent","addEventListener","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","blobBuilderSupported","append","getBlob","mapArrayBufferViews","chunk","buf","copy","set","byteOffset","BlobBuilderConstructor","options","bb","part","BlobConstructor","obj","ev","destroy","removeListener","window","Function","transports","parser","parseuri","parseqs","Socket","host","query","path","replace","forceJSONP","jsonp","forceBase64","timestampParam","timestampRequests","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","perMessageDeflate","threshold","forceNode","isReactNative","product","toLowerCase","Object","localAddress","id","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","Transport","createTransport","name","o","EIO","transport","sid","socket","protocols","indexOf","shift","setTransport","removeAllListeners","onDrain","onPacket","onClose","probe","failed","onTransportOpen","once","upgrading","pause","flush","Error","freezeTransport","onTransportClose","onclose","onupgrade","to","onOpen","onHandshake","JSON","parse","setPing","code","filterUpgrades","onHeartbeat","clearTimeout","sendPacket","splice","writable","write","compress","waitForUpgrade","cleanupAndClose","reason","desc","filteredUpgrades","j","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","string","value","extra","output","counter","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","symbol","readContinuationByte","continuationByte","decodeSymbol","byte1","version","codePoints","byteString","tmp","array","s","m","h","d","plural","ms","Math","floor","ceil","val","str","match","exec","parseFloat","isNaN","long","round","stringify","isArray","arr","hasCORS","concat","prev","alphabet","seed","num","yeast","now","Date","decoded","Backoff","min","max","factor","jitter","attempts","duration","pow","rand","random","deviation","reset","setMin","setMax","setJitter","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","doOpen","check","headers","ws","supports","binary","addEventListeners","onopen","onmessage","Buffer","doClose","schema","hasXHR2","poll","onPause","polling","callbackfn","JSONPPolling","callbacks","rNewline","rEscapedNewline","___eio","script","parentNode","removeChild","form","iframe","createElement","src","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","area","iframeId","className","style","position","top","left","target","setAttribute","complete","initIframe","action","submit","description","load","r","storage","process","env","DEBUG","log","console","arguments","formatArgs","args","useColors","namespace","humanize","diff","c","color","lastC","save","namespaces","removeItem","documentElement","WebkitAppearance","firebug","exception","table","RegExp","$1","chrome","local","localStorage","colors","formatters","v","enable","HowlerGlobal","init","Howler","_counter","_html5AudioPool","html5PoolSize","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","masterGain","noAudio","usingWebAudio","autoSuspend","ctx","autoUnlock","_setup","volume","vol","setupAudioContext","gain","setValueAtTime","currentTime","_webAudio","ids","_getSoundIds","sound","_soundById","_node","mute","muted","stop","unload","codecs","ext","state","_autoSuspend","Audio","oncanplaythrough","_setupCodecs","audioTest","canPlayType","mpegTest","ua","checkOpera","isOldOpera","checkSafari","safariVersion","isOldSafari","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","m4b","mp4","weba","webm","dolby","flac","_unlockAudio","_audioUnlocked","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","audioNode","_unlocked","_releaseHtml5Audio","_autoResume","source","createBufferSource","connect","destination","start","noteOn","resume","onended","disconnect","removeEventListener","_emit","_obtainHtml5Audio","pop","testPlay","play","Promise","then","catch","warn","audio","suspend","_sounds","_paused","_suspendTimer","handleSuspension","_resumeAfterSuspend","Howl","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","_xhr","_duration","_state","_endTimers","_queue","_playLock","_onend","onend","_onfade","onfade","_onload","_onloaderror","onloaderror","_onplayerror","onplayerror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onunlock","onunlock","_onresume","event","url","slice","Sound","loadBuffer","internal","_ended","_id","_inactiveSound","soundId","_loadQueue","seek","_seek","abs","setParams","_start","_stop","node","playWebAudio","_refreshBuffer","_playStart","bufferSource","noteGrainOn","Infinity","bind","_clearTimer","playHtml5","playbackRate","paused","loadedNoReadyState","ejecta","isCocoonJS","listener","_rateSeek","_stopFade","noteOff","_cleanBuffer","_clearSound","_interval","fade","from","end","linearRampToValueAtTime","_startFadeInterval","isGroup","steps","stepLen","lastTick","_fadeTo","setInterval","tick","clearInterval","cancelScheduledValues","loopStart","loopEnd","playing","realTime","rateSeek","seekAndEmit","emitSeek","sounds","_errorFn","_loadFn","_endFn","remCache","cache","off","events","isId","task","ended","_drain","limit","cnt","_panner","isIOS","vendor","howl","_parent","parent","createGain","createGainNode","_errorListener","_loadListener","_endListener","__default","loadSound","atob","dataView","decodeAudioData","safeXhrSend","arraybuffer","success","AudioContext","webkitAudioContext","iOS","platform","appVersion","safari","global","_super","_pos","_orientation","stereo","pan","pos","x","y","z","positionX","setTargetAtTime","positionY","positionZ","setPosition","orientation","xUp","yUp","zUp","or","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","_stereo","_pannerAttr","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","_onstereo","onstereo","_onpos","onpos","_onorientation","onorientation","pannerType","createStereoPanner","setupPanner","orientationX","orientationY","orientationZ","pannerAttr","_coneInnerAngle","_coneOuterAngle","_coneOuterGain","_distanceModel","_maxDistance","_refDistance","_rolloffFactor","_panningModel","pa","panner","createPanner","toArray","hasBin","connect_error","connect_timeout","connecting","reconnect","reconnect_attempt","reconnect_failed","reconnect_error","reconnecting","io","nsp","json","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","autoConnect","subEvents","subs","unshift","BINARY_EVENT","EVENT","CONNECT","onpacket","ERROR","onconnect","onevent","ACK","BINARY_ACK","onack","DISCONNECT","ondisconnect","ack","sent","emitBuffered","NewRequestAlertService","dialog","hasNewRequest","currentNewRequestStatus","asObservable","hasNewInServiceReservation","currentHasNewInServiceReservation","newPendingReservation","currentNewPendingReservation","newCheckoutReservation","currentNewCheckoutReservation","newInServiceReservation","currentNewInServiceReservation","newCancelledReservation","currentNewCancelledReservation","restaurantId","currentUser","getIdToken","idtoken","token","baseUrl","params","restaurant","onNewRequestHandle","onCheckoutRequestHandle","onInServiceRequestHandle","onCancelledRequestHandle","reservation","showError","newRequest","is_new","areNewInServiceReservations","reservationId","isBuf","withNativeBlob","withNativeFile","File","deconstructPacket","pack","_deconstructPacket","placeholder","_placeholder","newData","attachments","reconstructPacket","_reconstructPacket","removeBlobs","pendingBlobs","bloblessData","_removeBlobs","curKey","containingObject","fileReader","createDebug","prevTime","enabled","curr","coerce","formatter","logFn","hash","instances","stack","disable","names","skips","instance","has","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","Encoder","types","Decoder","ERROR_PACKET","encodeAsString","payload","reconstructor","BinaryReconstructor","reconPack","deconstruction","add","takeBinaryData","finishedReconstruction","binData","re","parts","b","authority","ipv6uri","pathNames","queryKey","$0","$2","isBuffer","toJSON","a","constructor","JSONP","websocket","_callbacks","listeners","hasListeners","chars","bytes","encoded1","encoded2","encoded3","encoded4","bufferLength","eio","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","lastPing","encoding","packetBuffer","_parser","encoder","decoder","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","skipReconnect","openSub","errorSub","timer","onping","onpong","ondata","ondecoded","onConnecting","processPacketQueue","subsLength","delay","onreconnect","attempt","lookup","managers","parsed","forceNew","multiplex","NotificationSound","PlaySoundNotification","StopSoundNotification","list","withNativeBuffer","withNativeArrayBuffer","isView","StaffLayoutModule","cdr","notificationEvents","subscribe","ghostButtonThatActivatesSound","nativeElement","click","detectChanges","fb","restaurantService","franchiseService","newRequestAlertService","router","routes","icon","route","restaurantSelection","group","restaurantSubscription","Subscription","EMPTY","franchiseSubscription","restaurantsSubscription","newRequestSubscription","newInServiceRequestSubscription","newNotificationSound","Subject","upcomingNotificationSoundEvents","initRestaurantListener","unsubscribe","isThisTheNewReservationsCRUD","isThisTheInServiceReservationsCRUD","hasNewInServiceReservations","currentRestaurant","getNewRequestStatus","setScheduleToShow","get","setValue","currentFranchise","franchise","getRestaurants","pipe","restaurants","pRestaurant","setItem","reload","todayWeekDay","getDay","working_hours","workingHour","weekDay","todayWorkingHour","endsWith","StaffRoutingModule","NotificationSoundEnablerModule","abv","ii","loc","href","count","err_cb","bail","proxy"],"mappings":"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","file":"x","sourcesContent":["/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, it’s not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('./globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","/*!\n *  howler.js v2.2.3\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Handle stopping all sounds globally.\n     */\n    stop: function() {\n      var self = this || Howler;\n\n      // Loop through all Howls and stop them.\n      for (var i=0; i<self._howls.length; i++) {\n        self._howls[i].stop();\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var ua = self._navigator ? self._navigator.userAgent : '';\n      var checkOpera = ua.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n      var checkSafari = ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1;\n      var safariVersion = ua.match(/Version\\/(.*?) /);\n      var isOldSafari = (checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!(audioTest.canPlayType('audio/wav; codecs=\"1\"') || audioTest.canPlayType('audio/wav')).replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        m4b: !!(audioTest.canPlayType('audio/x-m4b;') || audioTest.canPlayType('audio/m4b;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      if (self._audioUnlocked || !self.ctx) {\n        return;\n      }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        while (self._html5AudioPool.length < self.html5PoolSize) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n            break;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n        if (typeof self.ctx.resume === 'function') {\n          self.ctx.resume();\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n          document.removeEventListener('keydown', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n      document.addEventListener('keydown', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      //.Check if the audio is locked and throw a warning.\n      var testPlay = new Audio().play();\n      if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n        testPlay.catch(function() {\n          console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n        });\n      }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n\n        // Handle updating the state of the audio context after suspending.\n        var handleSuspension = function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        };\n\n        // Either the state gets suspended or it is interrupted.\n        // Either way, we need to update the state to suspended.\n        self.ctx.suspend().then(handleSuspension, handleSuspension);\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self.ctx.state !== 'interrupted' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended' || self.state === 'running' && self.ctx.state === 'interrupted') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean' || o.preload === 'metadata') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhr = {\n        method: o.xhr && o.xhr.method ? o.xhr.method : 'GET',\n        headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,\n        withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false,\n      };\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.autoUnlock) {\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload && self._preload !== 'none') {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return;\n      }\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running' && Howler.ctx.state !== 'interrupted') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                  } else {\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n          self._state = 'loading';\n\n          var listener = function() {\n            self._state = 'loaded';\n            \n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = Math.min(Math.max(0, parseFloat(from)), 1);\n      to = Math.min(Math.max(0, parseFloat(to)), 1);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Make sure the volume is in the right bounds.\n        if (diff < 0) {\n          vol = Math.max(to, vol);\n        } else {\n          vol = Math.min(to, vol);\n        }\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n\n              // If playing, restart playback to ensure looping updates.\n              if (self.playing(ids[i])) {\n                self.pause(ids[i], true);\n                self.play(ids[i], true);\n              }\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        if (self._sounds.length) {\n          id = self._sounds[0]._id;\n        }\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return 0;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (typeof seek === 'number' && (self._state !== 'loaded' || self._playLock)) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, true);\n            }\n\n            self._emit('seek', id);\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n          sounds[i]._node.removeEventListener('ended', sounds[i]._endFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else if (!Howler.noAudio) {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Listen for the 'ended' event on the sound to account for edge-case where\n        // a finite sound has a duration of Infinity.\n        self._endFn = self._endListener.bind(self);\n        self._node.addEventListener('ended', self._endFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = parent._preload === true ? 'auto' : parent._preload;\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    },\n\n    /**\n     * HTML5 Audio ended listener callback.\n     */\n    _endListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Only handle the `ended`` event if the duration is Infinity.\n      if (parent._duration === Infinity) {\n        // Update the parent duration to match the real audio duration.\n        // Round up the duration to account for the lower precision in HTML5 Audio.\n        parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n        // Update the sprite that corresponds to the real duration.\n        if (parent._sprite.__default[1] === Infinity) {\n          parent._sprite.__default[1] = parent._duration * 1000;\n        }\n\n        // Run the regular ended method.\n        parent._ended(self);\n      }\n\n      // Clear the event listener since the duration is now correct.\n      self._node.removeEventListener('ended', self._endFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open(self._xhr.method, url, true);\n      xhr.withCredentials = self._xhr.withCredentials;\n      xhr.responseType = 'arraybuffer';\n\n      // Apply any custom headers to the request.\n      if (self._xhr.headers) {\n        Object.keys(self._xhr.headers).forEach(function(key) {\n          xhr.setRequestHeader(key, self._xhr.headers[key]);\n        });\n      }\n\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  }\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Add to global in Node.js (for testing, etc).\n  if (typeof global !== 'undefined') {\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  } else if (typeof window !== 'undefined') {  // Define globally in case AMD is not available or unused.\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.2.3\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n\n      if (typeof self.ctx.listener.positionX !== 'undefined') {\n        self.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n      }\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n\n      if (typeof self.ctx.listener.forwardX !== 'undefined') {\n        self.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n      }\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              if (typeof sound._panner.positionX !== 'undefined') {\n                sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);\n                sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);\n                sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);\n              } else {\n                sound._panner.setPosition(pan, 0, 0);\n              }\n            } else {\n              sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or group relative to the global listener.\n   * @param  {Number} x  The x-position of the audio source.\n   * @param  {Number} y  The y-position of the audio source.\n   * @param  {Number} z  The z-position of the audio source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.positionX !== 'undefined') {\n              sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setPosition(x, y, z);\n            }\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.orientationX !== 'undefined') {\n              sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setOrientation(x, y, z);\n            }\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      inside of which there will be no volume reduction.\n   *     coneOuterAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      outside of which the volume will be reduced to a constant value of `coneOuterGain`.\n   *     coneOuterGain - (0 by default) A parameter for directional audio sources, this is the gain outside of the\n   *                     `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\n   *     distanceModel - ('inverse' by default) Determines algorithm used to reduce volume as audio moves away from\n   *                     listener. Can be `linear`, `inverse` or `exponential.\n   *     maxDistance - (10000 by default) The maximum distance between source and listener, after which the volume\n   *                   will not be reduced any further.\n   *     refDistance - (1 by default) A reference distance for reducing volume as source moves further from the listener.\n   *                   This is simply a variable of the distance model and has a different effect depending on which model\n   *                   is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener. This is simply a\n   *                     variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, ∞]`\n   *                     with `inverse` and `exponential`.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *\n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          if (!o.pannerAttr) {\n            o.pannerAttr = {\n              coneInnerAngle: o.coneInnerAngle,\n              coneOuterAngle: o.coneOuterAngle,\n              coneOuterGain: o.coneOuterGain,\n              distanceModel: o.distanceModel,\n              maxDistance: o.maxDistance,\n              refDistance: o.refDistance,\n              rolloffFactor: o.rolloffFactor,\n              panningModel: o.panningModel\n            };\n          }\n\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== 'undefined' ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== 'undefined' ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.pannerAttr.coneOuterGain !== 'undefined' ? o.pannerAttr.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.pannerAttr.distanceModel !== 'undefined' ? o.pannerAttr.distanceModel : self._distanceModel,\n            maxDistance: typeof o.pannerAttr.maxDistance !== 'undefined' ? o.pannerAttr.maxDistance : self._maxDistance,\n            refDistance: typeof o.pannerAttr.refDistance !== 'undefined' ? o.pannerAttr.refDistance : self._refDistance,\n            rolloffFactor: typeof o.pannerAttr.rolloffFactor !== 'undefined' ? o.pannerAttr.rolloffFactor : self._rolloffFactor,\n            panningModel: typeof o.pannerAttr.panningModel !== 'undefined' ? o.pannerAttr.panningModel : self._panningModel\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel\n        };\n\n        // Update the panner values or create a new panner if none exists.\n        var panner = sound._panner;\n        if (panner) {\n          panner.coneInnerAngle = pa.coneInnerAngle;\n          panner.coneOuterAngle = pa.coneOuterAngle;\n          panner.coneOuterGain = pa.coneOuterGain;\n          panner.distanceModel = pa.distanceModel;\n          panner.maxDistance = pa.maxDistance;\n          panner.refDistance = pa.refDistance;\n          panner.rolloffFactor = pa.rolloffFactor;\n          panner.panningModel = pa.panningModel;\n        } else {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      } else if (self._panner) {\n        // Disconnect the panner.\n        self._panner.disconnect(0);\n        self._panner = undefined;\n        parent._refreshBuffer(self);\n      }\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n\n      if (typeof sound._panner.positionX !== 'undefined') {\n        sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);\n        sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);\n        sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      }\n\n      if (typeof sound._panner.orientationX !== 'undefined') {\n        sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);\n        sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);\n        sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n      }\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id, true);\n    }\n  };\n})();\n","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","import { Reservation, ResponseReservation } from '@models';\r\nimport { Injectable } from '@angular/core';\r\nimport * as io from 'socket.io-client';\r\nimport { environment } from '@environments/environment';\r\nimport * as firebase from 'firebase/app';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class NewRequestAlertService {\r\n  public socket: any;\r\n\r\n  private token: string;\r\n\r\n  public hasNewRequest: BehaviorSubject<boolean> = new BehaviorSubject(null);\r\n  public currentNewRequestStatus = this.hasNewRequest.asObservable();\r\n\r\n  public hasNewInServiceReservation: BehaviorSubject<boolean> = new BehaviorSubject(\r\n    null\r\n  );\r\n  public currentHasNewInServiceReservation = this.hasNewInServiceReservation.asObservable();\r\n\r\n  public newPendingReservation: BehaviorSubject<Reservation> = new BehaviorSubject(\r\n    null\r\n  );\r\n  public currentNewPendingReservation = this.newPendingReservation.asObservable();\r\n\r\n  public newCheckoutReservation: BehaviorSubject<Reservation> = new BehaviorSubject(\r\n    null\r\n  );\r\n  public currentNewCheckoutReservation = this.newCheckoutReservation.asObservable();\r\n\r\n  public newInServiceReservation: BehaviorSubject<boolean> = new BehaviorSubject(\r\n    null\r\n  );\r\n  public currentNewInServiceReservation = this.newInServiceReservation.asObservable();\r\n\r\n  public newCancelledReservation: BehaviorSubject<number> = new BehaviorSubject(\r\n    null\r\n  );\r\n  public currentNewCancelledReservation = this.newInServiceReservation.asObservable();\r\n\r\n  constructor(private dialog: MatSnackBar) {}\r\n\r\n  /**\r\n   * Connects websocket to restaurant room and listens for new space requests and order requests\r\n   * @param restaurantId string containing the restaurant ID to be used as room identifier\r\n   */\r\n  public connect(restaurantId: string): void {\r\n    /**\r\n     * Gets current user token to later be used to connect websocket\r\n     */\r\n    firebase\r\n      .auth()\r\n      .currentUser.getIdToken()\r\n      .then((idtoken) => {\r\n        this.token = idtoken;\r\n        /**\r\n         * Creates Socket IO object using the propert environment URL\r\n         */\r\n        this.socket = io.connect(environment.baseUrl, {\r\n          rejectUnauthorized: false,\r\n        });\r\n\r\n        this.socket.emit(\r\n          'get',\r\n          {\r\n            url: '/sockets',\r\n            params: {\r\n              token: this.token,\r\n              restaurant: restaurantId,\r\n            },\r\n          },\r\n          () => {}\r\n        );\r\n\r\n        this.socket.on('start_reservation', (data: ResponseReservation) => {\r\n          this.onNewRequestHandle(data);\r\n        });\r\n\r\n        this.socket.on(\r\n          'send_reservation_orders',\r\n          (data: ResponseReservation) => {\r\n            this.onCheckoutRequestHandle(data);\r\n          }\r\n        );\r\n\r\n        this.socket.on('reservations_in_service', () => {\r\n          this.onInServiceRequestHandle(true);\r\n        });\r\n\r\n        this.socket.on(\r\n          'cancel_reservation',\r\n          (data: { reservation: { id: number } }) => {\r\n            this.onCancelledRequestHandle(data.reservation.id);\r\n          }\r\n        );\r\n      })\r\n      .catch((error) => {\r\n        this.showError(error);\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Takes received reservation with 'pending' status and saves it in the service for component comsumption\r\n   * @param data ResponseReservation object containing all the reservation information\r\n   */\r\n  public onNewRequestHandle(data: ResponseReservation): void {\r\n    this.hasNewRequest.next(true);\r\n    const newRequest = new Reservation(data.reservation);\r\n    newRequest.is_new = true;\r\n    this.newPendingReservation.next(newRequest);\r\n  }\r\n\r\n  /**\r\n   * Takes received reservation with 'checkout' status and saves it in the service for component comsumption\r\n   * @param data ResponseReservation object containing all the reservation information\r\n   */\r\n  public onCheckoutRequestHandle(data: ResponseReservation): void {\r\n    this.hasNewRequest.next(true);\r\n    const newRequest = new Reservation(data.reservation);\r\n    newRequest.is_new = true;\r\n    this.newCheckoutReservation.next(newRequest);\r\n  }\r\n\r\n  /**\r\n   * When there are new reservations with 'inService' status we tells so to the listeners.\r\n   * @param data ResponseReservation object containing all the reservation information\r\n   */\r\n  public onInServiceRequestHandle(areNewInServiceReservations: boolean): void {\r\n    this.hasNewInServiceReservation.next(true);\r\n    this.newInServiceReservation.next(areNewInServiceReservations);\r\n  }\r\n\r\n  /**\r\n   * Takes received reservation and saves it in the service for component comsumption\r\n   * @param data ResponseReservation object containing all the reservation information\r\n   */\r\n  public onCancelledRequestHandle(reservationId: number): void {\r\n    this.newCancelledReservation.next(reservationId);\r\n  }\r\n\r\n  /**\r\n   * Shows a snackbar with an error message.\r\n   * @param errorCode Message to show at the snackbar.\r\n   */\r\n  private showError(error: string): void {\r\n    this.dialog.open(error, 'Entendido', {\r\n      duration: 15000,\r\n    });\r\n  }\r\n}\r\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var buf = '';\n    while (str.charAt(++i) !== '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      p.nsp += c;\n      if (i === str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i === str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","import { Howl } from 'howler';\r\n\r\nexport const NotificationSound = new Howl({\r\n  src: [\r\n    '/assets/sounds/eventually-590.mp3',\r\n    '/assets/sounds/eventually-590.ogg',\r\n    '/assets/sounds/eventually-590.m4r',\r\n  ],\r\n});\r\n\r\n/**\r\n * Play sound for notification\r\n * @param loop Determine if sound is a loop\r\n * @param type Sound type\r\n */\r\nexport const PlaySoundNotification = ( ): void => {\r\n  StopSoundNotification();\r\n  NotificationSound.loop(true);\r\n  NotificationSound.play();\r\n  NotificationSound.volume(1);\r\n};\r\n\r\n/**\r\n * Stop sound for notification when sound is a loop\r\n * @param type Sound type\r\n */\r\nexport const StopSoundNotification = (): void => {\r\n  NotificationSound.stop();\r\n};\r\n","export * from './sounds.utils';\r\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { StaffLayoutComponent } from './staff-layout.component';\r\nimport { StaffRoutingModule } from './staff-layout-routing.module';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\r\nimport { NotificationSoundEnablerModule } from '@components/notification-sound-enabler/notification-sound-enabler.module';\r\n\r\n@NgModule({\r\n  declarations: [StaffLayoutComponent],\r\n  imports: [\r\n    CommonModule,\r\n    StaffRoutingModule,\r\n    MatInputModule,\r\n    MatSelectModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    NotificationSoundEnablerModule,\r\n  ],\r\n})\r\nexport class StaffLayoutModule {}\r\n","import { Observable } from 'rxjs';\r\nimport {\r\n  Component,\r\n  Input,\r\n  OnChanges,\r\n  OnInit,\r\n  ViewChild,\r\n  ElementRef,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\nimport { PlaySoundNotification } from '@utils/sounds.utils';\r\n@Component({\r\n  selector: 'app-notification-sound-enabler',\r\n  templateUrl: './notification-sound-enabler.component.html',\r\n  styleUrls: ['./notification-sound-enabler.component.scss'],\r\n})\r\nexport class NotificationSoundEnablerComponent implements OnInit, OnChanges {\r\n  @ViewChild('ghostButtonThatActivatesSound') ghostButtonThatActivatesSound: ElementRef;\r\n  @Input() notificationEvents: Observable<unknown>;\r\n\r\n  constructor(private readonly cdr: ChangeDetectorRef) {}\r\n\r\n  ngOnInit(): void {\r\n    this.notificationEvents.subscribe(() => {\r\n      this.ghostButtonThatActivatesSound.nativeElement.click();\r\n    });\r\n  }\r\n\r\n  ngOnChanges(): void {\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  public clickGhostButtonToPlaySound(): void {\r\n    PlaySoundNotification();\r\n  }\r\n}\r\n","<button (click)=\"clickGhostButtonToPlaySound()\" #ghostButtonThatActivatesSound class=\"btns-hidden\"></button>\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Subscription, Subject } from 'rxjs';\r\nimport { Restaurant, Franchise, ResponseRestaurant } from '@models';\r\nimport { version } from '../../../../package.json';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { RestaurantService, FranchiseService } from '@services';\r\nimport { map } from 'rxjs/operators';\r\nimport { IRestaurant } from '@interfaces';\r\nimport { WorkingHour } from '@models';\r\nimport { NewRequestAlertService } from 'src/app/shared/services/request-alert.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-staff-layout',\r\n  templateUrl: './staff-layout.component.html',\r\n  styleUrls: ['./staff-layout.component.scss'],\r\n})\r\nexport class StaffLayoutComponent implements OnInit, OnDestroy {\r\n  /**\r\n   * Routes to show at the lateral menu.\r\n   */\r\n  public routes: Array<{\r\n    name: string;\r\n    icon: string;\r\n    route: string;\r\n    notification?: boolean;\r\n  }> = [\r\n    {\r\n      name: 'Solicitudes nuevas',\r\n      icon: 'icon-requests',\r\n      route: 'new-requests',\r\n    },\r\n    {\r\n      name: 'Reservaciones',\r\n      icon: 'icon-reservations',\r\n      route: 'reservations',\r\n    },\r\n    {\r\n      name: 'En servicio',\r\n      icon: 'icon-active-orders',\r\n      route: 'in-service',\r\n    },\r\n    {\r\n      name: 'Cerradas',\r\n      icon: 'icon-closed-orders',\r\n      route: 'closed',\r\n    },\r\n    {\r\n      name: 'Menú',\r\n      icon: 'icon-testimonial',\r\n      route: 'menu',\r\n    },\r\n  ];\r\n\r\n  /**\r\n   * Working hour that is used to show the schedule at the lateral menu.\r\n   */\r\n  public todayWorkingHour: WorkingHour;\r\n\r\n  /**\r\n   * List to fill the restaurants select at the lateral menu.\r\n   */\r\n  public restaurants: Array<Restaurant>;\r\n\r\n  /**\r\n   * Current restaurant details.\r\n   */\r\n  private restaurant: Restaurant;\r\n\r\n  /**\r\n   * Form to manage the info at the select in the lateral menu.\r\n   */\r\n  public restaurantSelection = this.fb.group({\r\n    restaurant: [null],\r\n  });\r\n\r\n  /**\r\n   * Version displayed at the lateral menu.\r\n   */\r\n  public version: string = version;\r\n\r\n  /**\r\n   * Variable to store the subscription that give us the info of the selected restaurant.\r\n   */\r\n  private restaurantSubscription = Subscription.EMPTY;\r\n\r\n  /**\r\n   * Variable to store the subscription that give us the info of the selected franchise.\r\n   */\r\n  private franchiseSubscription = Subscription.EMPTY;\r\n\r\n  /**\r\n   * Variable to store the subscription that give us the info of the restaurants.\r\n   */\r\n  private restaurantsSubscription = Subscription.EMPTY;\r\n\r\n  /**\r\n   * Variable to store the subscription of wether there's a new Reservation or not.\r\n   */\r\n  private newRequestSubscription = Subscription.EMPTY;\r\n\r\n  /**\r\n   * Variable to store the subscription of wether there's a new Reservation or not.\r\n   */\r\n  private newInServiceRequestSubscription = Subscription.EMPTY;\r\n\r\n  /**\r\n   * Boolean that indicates if there is a new unread reservation request at the New Reservetions section.\r\n   */\r\n  public hasNewRequest: boolean;\r\n\r\n  /**\r\n   * Boolean that indicates if there is a new unread reservation request at the In Service section.\r\n   */\r\n  public hasNewInServiceReservations: boolean;\r\n\r\n  public newNotificationSound =  new Subject();\r\n\r\n  public upcomingNotificationSoundEvents =  this.newNotificationSound.asObservable();\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private restaurantService: RestaurantService,\r\n    private franchiseService: FranchiseService,\r\n    private newRequestAlertService: NewRequestAlertService,\r\n    public router: Router\r\n  ) {}\r\n\r\n  /**\r\n   * When the component loads we get the info of the selected restaurant.\r\n   */\r\n  ngOnInit(): void {\r\n    this.initRestaurantListener();\r\n  }\r\n\r\n  /**\r\n   * When the component is destroyed we unsubscribe all posible subscriptions.\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.restaurantSubscription.unsubscribe();\r\n    this.franchiseSubscription.unsubscribe();\r\n    this.restaurantsSubscription.unsubscribe();\r\n    this.newRequestSubscription.unsubscribe();\r\n    this.newInServiceRequestSubscription.unsubscribe();\r\n  }\r\n\r\n  /**\r\n   * Connects websocket and listens for new requests to display badge on side menu\r\n   * @param restaurantId number containing restaurant id for socket\r\n   */\r\n  private getNewRequestStatus(restaurantId: number): void {\r\n    this.newRequestAlertService.connect(restaurantId.toString());\r\n\r\n    /**\r\n     * It listens if there is a new reservation at the New Reservations section.\r\n     */\r\n    this.newRequestSubscription =\r\n      this.newRequestAlertService.hasNewRequest.subscribe(\r\n        (newRequest: boolean) => {\r\n          if (newRequest) {\r\n            this.newNotificationSound.next();\r\n            if (!this.isThisTheNewReservationsCRUD) {\r\n              this.hasNewRequest = newRequest;\r\n            }\r\n          } else {\r\n            this.hasNewRequest = newRequest;\r\n          }\r\n        }\r\n      );\r\n\r\n    /**\r\n     * It listens if there is a new reservation at the In Service section.\r\n     */\r\n    this.newInServiceRequestSubscription =\r\n      this.newRequestAlertService.hasNewInServiceReservation.subscribe(\r\n        (newRequest: boolean) => {\r\n          if (!this.isThisTheInServiceReservationsCRUD) {\r\n            this.hasNewInServiceReservations = newRequest;\r\n          }\r\n        }\r\n      );\r\n  }\r\n\r\n  /**\r\n   * The info of the selected restaurant is used to set the value of the restaurants select.\r\n   * We get the restaurants from the server to fill the restaurants select.\r\n   */\r\n  private initRestaurantListener(): void {\r\n    this.restaurantSubscription =\r\n      this.restaurantService.currentRestaurant.subscribe(\r\n        (restaurant: Restaurant) => {\r\n          this.restaurant = restaurant;\r\n          this.getNewRequestStatus(this.restaurant.id);\r\n          this.setScheduleToShow(this.restaurant);\r\n          this.restaurantSelection.get('restaurant').setValue(restaurant.id);\r\n          this.franchiseSubscription =\r\n            this.franchiseService.currentFranchise.subscribe(\r\n              (franchise: Franchise) => {\r\n                this.restaurantsSubscription = this.restaurantService\r\n                  .getRestaurants(franchise.id)\r\n                  .pipe(\r\n                    map((response: ResponseRestaurant) => {\r\n                      const restaurants = response.restaurants.map(\r\n                        (pRestaurant: IRestaurant) => {\r\n                          return new Restaurant(pRestaurant);\r\n                        }\r\n                      );\r\n                      return restaurants;\r\n                    })\r\n                  )\r\n                  .subscribe(() => {\r\n                    this.restaurants = franchise.restaurants;\r\n                  });\r\n              }\r\n            );\r\n        }\r\n      );\r\n  }\r\n\r\n  /**\r\n   * If the selected restaurant is changed we set it as the selected one at the localstorage and reload the page.\r\n   */\r\n  public restaurantChanged(restaurantId: number): void {\r\n    localStorage.setItem('restaurantId', JSON.stringify(restaurantId));\r\n    location.reload();\r\n  }\r\n\r\n  /**\r\n   * This function get the today's week day and use it to look the working hour that gets the today's schedule.\r\n   * @param restaurant the restaurant that has the working hours info.\r\n   */\r\n  private setScheduleToShow(restaurant: Restaurant): void {\r\n    const today = new Date();\r\n    const todayWeekDay = today.getDay();\r\n    for (const workingHour of restaurant.working_hours) {\r\n      if (workingHour.weekDay === todayWeekDay) {\r\n        this.todayWorkingHour = workingHour;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Function that determinates if the menu option hast to show the dot indicating that a new reservation has arrived.\r\n   * @param route The route of the section corresponding to the menu option\r\n   * @returns Boolean that indicates if the dot should be showed.\r\n   */\r\n  public hasMenuOptionToShowDot(route: string): boolean {\r\n    return (route === 'new-requests' &&\r\n      this.hasNewRequest &&\r\n      !this.isThisTheNewReservationsCRUD) ||\r\n      (route === 'in-service' &&\r\n        this.hasNewInServiceReservations &&\r\n        !this.isThisTheInServiceReservationsCRUD)\r\n      ? true\r\n      : false;\r\n  }\r\n\r\n  /**\r\n   * Tells if the actual section is the New Reservations one.\r\n   */\r\n  private get isThisTheNewReservationsCRUD(): boolean {\r\n    return this.router.url.endsWith('new-requests');\r\n  }\r\n\r\n  /**\r\n   * Tells if the actual section is the In Service one.\r\n   */\r\n  private get isThisTheInServiceReservationsCRUD(): boolean {\r\n    return this.router.url.endsWith('in-service');\r\n  }\r\n}\r\n","<section class=\"inl\">\r\n  <aside>\r\n    <form class=\"head\" [formGroup]=\"restaurantSelection\" novalidate>\r\n      <img src=\"assets/images/logos/logo-white.svg\" class=\"logo\" />\r\n      <mat-form-field class=\"franchise-select\">\r\n        <mat-select\r\n          formControlName=\"restaurant\"\r\n          (selectionChange)=\"restaurantChanged($event.value)\"\r\n        >\r\n          <mat-option\r\n            *ngFor=\"let restaurant of restaurants; let i = index\"\r\n            [value]=\"restaurant.id\"\r\n            select\r\n          >\r\n            {{ restaurant.name }}\r\n          </mat-option>\r\n        </mat-select>\r\n        <small>\r\n          Horario:\r\n          {{\r\n            todayWorkingHour\r\n              ? todayWorkingHour.opensAt + ' a ' + todayWorkingHour.closesAt\r\n              : 'Cerrado'\r\n          }}</small\r\n        >\r\n      </mat-form-field>\r\n    </form>\r\n    <ul>\r\n      <li\r\n        *ngFor=\"let route of routes; let last = last\"\r\n        [ngClass]=\"{ last: last }\"\r\n      >\r\n        <a\r\n          class=\"inl\"\r\n          [routerLink]=\"route.route\"\r\n          routerLinkActive=\"active\"\r\n          [ngClass]=\"{\r\n            notification: hasMenuOptionToShowDot(route.route)\r\n          }\"\r\n        >\r\n          <div class=\"relative\">\r\n            <img\r\n              src=\"assets/images/icons/{{ route.icon }}.svg\"\r\n              alt=\"{{ route.name }}\"\r\n            />\r\n            <img\r\n              src=\"assets/images/icons/{{ route.icon }}-yellow.svg\"\r\n              alt=\"{{ route.name }} - active\"\r\n            />\r\n          </div>\r\n          {{ route.name }}\r\n        </a>\r\n      </li>\r\n    </ul>\r\n    <div class=\"menu-bottom\">\r\n      <p>Ver {{ version }}</p>\r\n    </div>\r\n  </aside>\r\n  <div id=\"content\">\r\n    <router-outlet></router-outlet>\r\n  </div>\r\n</section>\r\n<app-notification-sound-enabler [notificationEvents]=\"upcomingNotificationSoundEvents\"></app-notification-sound-enabler>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { StaffLayoutComponent } from './staff-layout.component';\r\nimport { FranchiseAndRestaurantValidityGuard, ClaimsGuard } from '@guards';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    pathMatch: 'full',\r\n    redirectTo: 'new-requests',\r\n  },\r\n  {\r\n    path: '',\r\n    component: StaffLayoutComponent,\r\n    canActivate: [ClaimsGuard, FranchiseAndRestaurantValidityGuard],\r\n    children: [\r\n      {\r\n        path: 'new-requests',\r\n        loadChildren: () =>\r\n          import('./new-requests/new-requests.module').then(\r\n            (m) => m.NewRequestsModule\r\n          ),\r\n      },\r\n      {\r\n        path: 'reservations',\r\n        loadChildren: () =>\r\n          import('./reservations/reservations.module').then(\r\n            (m) => m.ReservationsModule\r\n          ),\r\n      },\r\n      {\r\n        path: 'in-service',\r\n        loadChildren: () =>\r\n          import('./in-service/in-service.module').then(\r\n            (m) => m.InServiceModule\r\n          ),\r\n      },\r\n      {\r\n        path: 'closed',\r\n        loadChildren: () =>\r\n          import('./closed/closed.module').then((m) => m.ClosedModule),\r\n      },\r\n      {\r\n        path: 'menu',\r\n        loadChildren: () =>\r\n          import('./staff-menu/staff-menu.module').then(\r\n            (m) => m.StaffMenuModule\r\n          ),\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class StaffRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NotificationSoundEnablerComponent } from './notification-sound-enabler.component';\r\n\r\n@NgModule({\r\n  declarations: [NotificationSoundEnablerComponent],\r\n  imports: [CommonModule],\r\n  exports: [NotificationSoundEnablerComponent],\r\n})\r\nexport class NotificationSoundEnablerModule {}\r\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n"]}