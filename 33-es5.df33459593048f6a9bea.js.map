{"version":3,"sources":["webpack:///src/app/shared/payloads/amenities.payload.ts","webpack:///src/app/shared/payloads/franchise.payload.ts","webpack:///src/app/shared/payloads/restaurant.payload.ts","webpack:///src/app/shared/payloads/restaurant-app-data.payload.ts","webpack:///src/app/shared/payloads/restaurant-detail.payload.ts","webpack:///src/app/shared/payloads/restaurant-extra.payload.ts","webpack:///src/app/shared/payloads/restaurant-parking.payload.ts","webpack:///src/app/shared/payloads/restaurant-images.payload.ts","webpack:///src/app/shared/payloads/restaurant-payment-method.payload.ts","webpack:///src/app/shared/payloads/restaurant-working-hours.payload.ts","webpack:///src/app/shared/payloads/restaurant-reservation-zone.payload.ts","webpack:///src/app/shared/payloads/restaurant-service-type.payload.ts","webpack:///src/app/shared/payloads/index.ts","webpack:///src/app/pages/layout/preferences/amenities/extras/extras.module.ts","webpack:///src/app/pages/layout/preferences/amenities/extras/extras.component.ts","webpack:///src/app/pages/layout/preferences/amenities/extras/extras.component.html","webpack:///src/app/pages/layout/preferences/amenities/extras/extras-routing.module.ts"],"names":["AmenitiesPayload","pTypes","pZones","pExtras","pParkings","pPpaymentMethods","this","types","zones","extras","parkings","paymentMethods","getExtras","payment_methods","map","extra","id","active","name","BusinessPayload","pBusinessForm","businessForm","form","value","price_range","style","RestaurantPayload","pNewRestaurantForm","newRestaurantForm","avoidManagerUpdate","restaurantInfo","get","description","coordinates","concatCoordinates","address","phone","getPhone","email","invoice_email","invoice_url","manager","billingOption","emailBilling","websiteBilling","coordinatesArray","push","parseFloat","RestaurantAppDataPayload","pAppDataForm","appDataForm","max_offered_seats","max_people_per_order","max_cancel_limit_minutes","getTotalMinutes","reservation_time_minutes","RestaurantDetailPayload","pRestaurantDetailForm","restaurantDetailForm","getCoordinatesArray","address_extra","getParsedPhone","trim","RestuarantExtraPayload","pExtrasForm","extrasForm","getRawValue","RestuarantParkingPayload","pParkingForm","parkingForm","RestaurantImagesPayload","pImagesForm","imagesForm","galleryData","FormData","append","galleryImages","controls","forEach","control","i","RestuarantPaymentMethodPayload","pPaymentMethodsForm","paymentMethodsForm","RestaurantWorkingHoursPayload","pWorkingHoursForm","workingHoursForm","working_hours","getFixedHours","getMixedHours","currentWeekdays","activeDays","weekday","index","weekdayObject","week_day","opens_at","closes_at","hours","Object","keys","fixedHours","weekdays","day","object","parseInt","RestuarantReservationZonePayload","pReservationZonesFOrm","reservationZonesForm","RestuarantServiceTypePayload","pServiceTypeForm","serviceTypeForm","ExtrasModule","fb","restaurantService","snackBar","group","restaurantId","localStorage","getItem","deleteSubscription","Subscription","EMPTY","amenitiesSubscription","restaurantSubscription","unsubscribe","event","eventElement","target","currentExtras","localExtraObject","capitalizeString","isGlobal","addNew","nativeElement","extraId","deleteExtraAmenity","subscribe","removeExtraFromView","extrasPayload","setRestaurantAmenities","toJson","openSnackBar","preventDefault","onExtraDelete","removeAt","splitString","toLowerCase","split","length","charAt","toUpperCase","substring","join","getRestaurantDetail","pipe","response","restaurant","pExtra","setUpForm","message","action","open","duration","extrasFormArray","extraObject","ExtrasRoutingModule"],"mappings":"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","file":"x","sourcesContent":["import { AmenitiesToSave } from '@models';\r\nimport { IExtra } from '@interfaces';\r\n\r\nexport class AmenitiesPayload {\r\n  types?: Array<number>;\r\n  zones?: Array<number>;\r\n  extras?: Array<IExtra>;\r\n  parkings?: Array<number>;\r\n  paymentMethods?: Array<number>;\r\n\r\n  constructor(\r\n    pTypes: Array<number>,\r\n    pZones: Array<number>,\r\n    pExtras: Array<IExtra>,\r\n    pParkings: Array<number>,\r\n    pPpaymentMethods: Array<number>\r\n  ) {\r\n    this.types = pTypes;\r\n    this.zones = pZones;\r\n    this.extras = pExtras;\r\n    this.parkings = pParkings;\r\n    this.paymentMethods = pPpaymentMethods;\r\n  }\r\n\r\n  toJson(): AmenitiesToSave {\r\n    return {\r\n      types: this.types,\r\n      zones: this.zones,\r\n      extras: this.getExtras(),\r\n      parkings: this.parkings,\r\n      payment_methods: this.paymentMethods\r\n    };\r\n  }\r\n\r\n  private getExtras(): Array<IExtra> {\r\n    const extras = this.extras.map((extra: IExtra) => {\r\n      if (extra.id) {\r\n        return {\r\n          id: extra.id,\r\n          active: extra.active\r\n        };\r\n      } else {\r\n        return {\r\n          name: extra.name,\r\n          active: extra.active\r\n        };\r\n      }\r\n    });\r\n\r\n    return extras;\r\n  }\r\n}\r\n","import { FormGroup } from '@angular/forms';\r\nimport { IFranchise } from '@interfaces';\r\nimport { Franchise } from '@models';\r\n\r\nexport class BusinessPayload {\r\n  businessForm: FormGroup;\r\n\r\n  constructor(pBusinessForm: FormGroup) {\r\n    this.businessForm = pBusinessForm;\r\n  }\r\n\r\n  toJson(): Franchise {\r\n    const form = this.businessForm.value;\r\n\r\n    const body: IFranchise = {\r\n      id: form.id || null,\r\n      name: form.name || null,\r\n      price_range: form.price_range,\r\n      style: form.style,\r\n    };\r\n\r\n    return body;\r\n  }\r\n}\r\n","import { FormGroup } from '@angular/forms';\r\nimport { Restaurant } from '@models';\r\n\r\nexport class RestaurantPayload {\r\n  newRestaurantForm: FormGroup;\r\n\r\n  constructor(pNewRestaurantForm: FormGroup) {\r\n    this.newRestaurantForm = pNewRestaurantForm;\r\n  }\r\n\r\n  public toJson(avoidManagerUpdate?: boolean): Restaurant {\r\n    const form = this.newRestaurantForm;\r\n\r\n    const restaurantInfo = {\r\n      name: form.get('name').value,\r\n      description: form.get('description').value,\r\n      coordinates: this.concatCoordinates(),\r\n      address: form.get('address').value,\r\n      phone: this.getPhone(),\r\n      email: form.get('email').value,\r\n      invoice_email: '',\r\n      invoice_url: '',\r\n      manager:\r\n        (form.get('manager').value || form.get('manager').value === 0) &&\r\n        !avoidManagerUpdate\r\n          ? form.get('manager').value\r\n          : undefined,\r\n    };\r\n\r\n    if (form.value.billingOption === '0') {\r\n      restaurantInfo.invoice_email = form.value.emailBilling;\r\n      delete restaurantInfo.invoice_url;\r\n    } else {\r\n      restaurantInfo.invoice_url = form.value.websiteBilling;\r\n      delete restaurantInfo.invoice_email;\r\n    }\r\n\r\n    return restaurantInfo as Restaurant;\r\n  }\r\n\r\n  private getPhone(): string {\r\n    return `+${this.newRestaurantForm.get('dialCode').value}${\r\n      this.newRestaurantForm.get('phone').value\r\n    }`;\r\n  }\r\n\r\n  private concatCoordinates(): Array<number> {\r\n    const coordinatesArray: Array<number> = [];\r\n\r\n    coordinatesArray.push(\r\n      parseFloat(this.newRestaurantForm.get('latitude').value)\r\n    );\r\n    coordinatesArray.push(\r\n      parseFloat(this.newRestaurantForm.get('longitude').value)\r\n    );\r\n\r\n    return coordinatesArray;\r\n  }\r\n}\r\n","import { FormGroup } from '@angular/forms';\r\nexport class RestaurantAppDataPayload {\r\n  appDataForm: FormGroup;\r\n\r\n  constructor(pAppDataForm: FormGroup) {\r\n    this.appDataForm = pAppDataForm;\r\n  }\r\n\r\n  toJson() {\r\n    return {\r\n      max_offered_seats: this.appDataForm.get('max_offered_seats').value,\r\n      max_people_per_order: this.appDataForm.get('max_people_per_order').value,\r\n      max_cancel_limit_minutes: this.getTotalMinutes(),\r\n      reservation_time_minutes: this.appDataForm.get('reservation_time_minutes').value,\r\n    };\r\n  }\r\n\r\n  private getTotalMinutes(): number {\r\n    const hoursToMinutes = this.appDataForm.get('max_cancel_limit_hours').value * 60;\r\n    const totalMinutes = +hoursToMinutes + +this.appDataForm.get('max_cancel_limit_minutes').value;\r\n\r\n    return totalMinutes;\r\n  }\r\n}\r\n","import { FormGroup } from '@angular/forms';\r\nimport { NewBranch } from '@models';\r\n\r\nexport class RestaurantDetailPayload {\r\n  restaurantDetailForm: FormGroup;\r\n\r\n  constructor(pRestaurantDetailForm: FormGroup) {\r\n    this.restaurantDetailForm = pRestaurantDetailForm;\r\n  }\r\n\r\n  toJson(): NewBranch {\r\n    return {\r\n      name: this.restaurantDetailForm.get('name').value,\r\n      description: this.restaurantDetailForm.get('description').value,\r\n      coordinates: this.getCoordinatesArray(),\r\n      address: this.restaurantDetailForm.get('address').value,\r\n      address_extra: this.restaurantDetailForm.get('address_extra').value,\r\n      phone: this.getParsedPhone(),\r\n      email: this.restaurantDetailForm.get('email').value\r\n    };\r\n  }\r\n\r\n  private getCoordinatesArray(): Array<number> {\r\n    const coordArray = [\r\n      parseFloat(this.restaurantDetailForm.get('lat').value),\r\n      parseFloat(this.restaurantDetailForm.get('long').value)\r\n    ];\r\n\r\n    return coordArray;\r\n  }\r\n\r\n  private getParsedPhone(): string {\r\n    const form = this.restaurantDetailForm;\r\n    const concatPhone = `+${form.get('countryCode').value} ${form\r\n      .get('phone')\r\n      .value.trim()}`;\r\n\r\n    return concatPhone;\r\n  }\r\n}\r\n","import { Extra, AmenitiesToSave } from '@models';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { IExtra } from '@interfaces';\r\n\r\nexport class RestuarantExtraPayload {\r\n  extrasForm: FormGroup;\r\n\r\n  constructor(pExtrasForm: FormGroup) {\r\n    this.extrasForm = pExtrasForm;\r\n  }\r\n\r\n  toJson(): AmenitiesToSave {\r\n    return {\r\n      extras: this.getExtras()\r\n    };\r\n  }\r\n\r\n  private getExtras(): Array<IExtra> {\r\n    const extras = this.extrasForm.getRawValue().extras.map((extra: Extra) => {\r\n      if (extra.id) {\r\n        return {\r\n          id: extra.id,\r\n          active: extra.active\r\n        };\r\n      } else {\r\n        return {\r\n          name: extra.name,\r\n          active: extra.active\r\n        };\r\n      }\r\n    });\r\n\r\n    return extras;\r\n  }\r\n}\r\n","import { AmenitiesToSave } from '@models';\r\nimport { FormGroup } from '@angular/forms';\r\n\r\nexport class RestuarantParkingPayload {\r\n  parkingForm: FormGroup;\r\n\r\n  constructor(pParkingForm: FormGroup) {\r\n    this.parkingForm = pParkingForm;\r\n  }\r\n\r\n  toJson(): AmenitiesToSave {\r\n    return {\r\n      parkings: this.parkingForm.get('parking').value || []\r\n    };\r\n  }\r\n}\r\n","import { FormGroup, FormArray } from '@angular/forms';\r\n\r\nexport class RestaurantImagesPayload {\r\n  private imagesForm: FormGroup;\r\n\r\n  constructor(pImagesForm: FormGroup) {\r\n    this.imagesForm = pImagesForm;\r\n  }\r\n\r\n  public toFormData(): FormData {\r\n    const galleryData = new FormData();\r\n\r\n    galleryData.append('cover', this.imagesForm.get('coverImage').value);\r\n\r\n    const galleryImages = this.imagesForm.get('galleryImages') as FormArray;\r\n\r\n    galleryImages.controls.forEach((control, i) => {\r\n      if (!control.get('id')) {\r\n        galleryData.append(\r\n          'gallery[' + i + ']',\r\n          galleryImages.controls[i].get('fileValue').value\r\n        );\r\n      }\r\n    });\r\n\r\n    if (this.imagesForm.get('imageLink').value) {\r\n      galleryData.append('matterport', this.imagesForm.get('imageLink').value);\r\n    }\r\n    return galleryData;\r\n  }\r\n}\r\n","import { FormGroup } from '@angular/forms';\r\nimport { AmenitiesToSave } from '@models';\r\n\r\nexport class RestuarantPaymentMethodPayload {\r\n  paymentMethodsForm: FormGroup;\r\n\r\n  constructor(pPaymentMethodsForm: FormGroup) {\r\n    this.paymentMethodsForm = pPaymentMethodsForm;\r\n  }\r\n\r\n  toJson(): AmenitiesToSave {\r\n    return {\r\n      payment_methods: this.paymentMethodsForm.get('paymentMethods').value || []\r\n    };\r\n  }\r\n}\r\n","import { IWorkingHour } from '@interfaces';\r\nimport { WorkingHoursResponse } from '@models';\r\nimport { FormGroup, FormArray } from '@angular/forms';\r\n\r\nexport class RestaurantWorkingHoursPayload {\r\n  private workingHoursForm: FormGroup;\r\n\r\n  constructor(pWorkingHoursForm: FormGroup) {\r\n    this.workingHoursForm = pWorkingHoursForm;\r\n  }\r\n\r\n  public fixedHoursJson(): WorkingHoursResponse {\r\n    return { working_hours: this.getFixedHours() };\r\n  }\r\n\r\n  public mixedHoursJson(): WorkingHoursResponse {\r\n    return { working_hours: this.getMixedHours() };\r\n  }\r\n\r\n  private getMixedHours() {\r\n    const currentWeekdays = this.workingHoursForm.get(\r\n      'mixedHours'\r\n    ) as FormArray;\r\n    const activeDays: Array<IWorkingHour> = [];\r\n\r\n    currentWeekdays.controls.forEach((weekday, index) => {\r\n      if (weekday.get('isSelected').value === true) {\r\n        const weekdayObject = {\r\n          week_day: index + 1,\r\n          opens_at: weekday.get('opening').value,\r\n          closes_at: weekday.get('closing').value\r\n        };\r\n\r\n        activeDays.push(weekdayObject);\r\n      }\r\n    });\r\n\r\n    return activeDays;\r\n  }\r\n\r\n  private getFixedHours(): Array<IWorkingHour> {\r\n    const hours: Array<IWorkingHour> = [];\r\n\r\n    Object.keys(this.workingHoursForm.value.fixedHours.weekdays).forEach(\r\n      day => {\r\n        const fixedHours = this.workingHoursForm.get('fixedHours');\r\n        if (fixedHours.get('weekdays').get(day).value) {\r\n          const object = {\r\n            week_day: parseInt(day, 10),\r\n            opens_at: fixedHours.get('opening').value,\r\n            closes_at: fixedHours.get('closing').value\r\n          };\r\n\r\n          hours.push(object);\r\n        }\r\n      }\r\n    );\r\n\r\n    return hours;\r\n  }\r\n}\r\n","import { FormGroup } from '@angular/forms';\r\nimport { AmenitiesToSave } from '@models';\r\n\r\nexport class RestuarantReservationZonePayload {\r\n  reservationZonesForm: FormGroup;\r\n\r\n  constructor(pReservationZonesFOrm: FormGroup) {\r\n    this.reservationZonesForm = pReservationZonesFOrm;\r\n  }\r\n\r\n  toJson(): AmenitiesToSave {\r\n    return {\r\n      zones: this.reservationZonesForm.get('zones').value || []\r\n    };\r\n  }\r\n}\r\n","import { FormGroup } from '@angular/forms';\r\nimport { AmenitiesToSave } from '@models';\r\n\r\nexport class RestuarantServiceTypePayload {\r\n  serviceTypeForm: FormGroup;\r\n\r\n  constructor(pServiceTypeForm: FormGroup) {\r\n    this.serviceTypeForm = pServiceTypeForm;\r\n  }\r\n\r\n  toJson(): AmenitiesToSave {\r\n    return {\r\n      types: this.serviceTypeForm.get('type').value || []\r\n    };\r\n  }\r\n}\r\n","export * from './amenities.payload';\r\nexport * from './franchise.payload';\r\nexport * from './restaurant.payload';\r\nexport * from './restaurant-app-data.payload';\r\nexport * from './restaurant-detail.payload';\r\nexport * from './restaurant-extra.payload';\r\nexport * from './restaurant-parking.payload';\r\nexport * from './restaurant-images.payload';\r\nexport * from './restaurant-payment-method.payload';\r\nexport * from './restaurant-working-hours.payload';\r\nexport * from './restaurant-reservation-zone.payload';\r\nexport * from './restaurant-service-type.payload';\r\n","import { CommonModule } from '@angular/common';\r\nimport { ExtrasComponent } from './extras.component';\r\nimport { ExtrasRoutingModule } from './extras-routing.module';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [ExtrasComponent],\r\n  imports: [\r\n    CommonModule,\r\n    ExtrasRoutingModule,\r\n    MatCheckboxModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatInputModule,\r\n    MatIconModule\r\n  ]\r\n})\r\nexport class ExtrasModule { }\r\n","import { IExtra } from '@interfaces';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RestaurantService } from '@services';\r\nimport { RestuarantExtraPayload } from '@payloads';\r\nimport { map } from 'rxjs/operators';\r\nimport {\r\n  Component,\r\n  OnInit,\r\n  ViewChild,\r\n  ElementRef,\r\n  OnDestroy\r\n} from '@angular/core';\r\nimport { Extra, ResponseDetail } from '@models';\r\nimport { FormGroup, FormBuilder, FormArray } from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-extras',\r\n  templateUrl: './extras.component.html',\r\n  styleUrls: ['./extras.component.scss']\r\n})\r\nexport class ExtrasComponent implements OnInit, OnDestroy {\r\n  @ViewChild('addNew') addNew: ElementRef;\r\n  extrasForm: FormGroup = this.fb.group({\r\n    extras: new FormArray([])\r\n  });\r\n  extras: Array<Extra> = [];\r\n  restaurantId: number = parseInt(localStorage.getItem('restaurantId'), 10);\r\n  showExtraField: boolean;\r\n  deleteSubscription = Subscription.EMPTY;\r\n  amenitiesSubscription = Subscription.EMPTY;\r\n  restaurantSubscription = Subscription.EMPTY;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private restaurantService: RestaurantService,\r\n    private snackBar: MatSnackBar\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.getExtras();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.deleteSubscription.unsubscribe();\r\n    this.amenitiesSubscription.unsubscribe();\r\n    this.restaurantSubscription.unsubscribe();\r\n  }\r\n\r\n  get extrasFormArray(): FormArray {\r\n    return this.extrasForm.get('extras') as FormArray;\r\n  }\r\n\r\n  addUserExtraAmenity(event: KeyboardEvent): void {\r\n    const eventElement = event.target as HTMLInputElement;\r\n    const currentExtras = this.extrasForm.get('extras') as FormArray;\r\n\r\n    const localExtraObject = this.fb.group({\r\n      id: [undefined],\r\n      name: [this.capitalizeString(eventElement.value)],\r\n      isGlobal: [false],\r\n      active: [true]\r\n    });\r\n\r\n    currentExtras.push(localExtraObject);\r\n    this.addNew.nativeElement.value = '';\r\n  }\r\n\r\n  onExtraDelete(extraId: number, index: number): void {\r\n    this.deleteSubscription = this.restaurantService\r\n      .deleteExtraAmenity(this.restaurantId, extraId)\r\n      .subscribe(() => this.removeExtraFromView(index));\r\n  }\r\n\r\n  onSubmit(): void {\r\n    const extrasPayload = new RestuarantExtraPayload(this.extrasForm);\r\n\r\n    this.amenitiesSubscription = this.restaurantService\r\n      .setRestaurantAmenities(extrasPayload.toJson(), this.restaurantId)\r\n      .subscribe(() => this.openSnackBar('Cambios guardados', 'Entendido'));\r\n  }\r\n\r\n  removeExtra(event: MouseEvent, extra: FormGroup, index: number): void {\r\n    event.preventDefault();\r\n    const extraId = extra.get('id').value;\r\n\r\n    if (extraId) {\r\n      this.onExtraDelete(extraId, index);\r\n    } else {\r\n      this.removeExtraFromView(index);\r\n    }\r\n  }\r\n\r\n  removeExtraFromView(index: number): void {\r\n    const currentExtras = this.extrasForm.get('extras') as FormArray;\r\n\r\n    currentExtras.removeAt(index);\r\n  }\r\n\r\n  private capitalizeString(value: string): string {\r\n    const splitString = value.toLowerCase().split(' ');\r\n\r\n    for (let i = 0; i < splitString.length; i++) {\r\n      splitString[i] =\r\n        splitString[i].charAt(0).toUpperCase() + splitString[i].substring(1);\r\n    }\r\n\r\n    return splitString.join(' ');\r\n  }\r\n\r\n  private getExtras(): void {\r\n    this.restaurantSubscription = this.restaurantService\r\n      .getRestaurantDetail(this.restaurantId)\r\n      .pipe(\r\n        map((response: ResponseDetail) => {\r\n          const extras = response.restaurant.extras.map((pExtra: IExtra) => {\r\n            return new Extra(pExtra);\r\n          });\r\n\r\n          return extras;\r\n        })\r\n      )\r\n      .subscribe((extras: Array<Extra>) => {\r\n        this.extras = extras;\r\n        this.setUpForm();\r\n      });\r\n  }\r\n\r\n  private openSnackBar(message: string, action: string): void {\r\n    this.snackBar.open(message, action, {\r\n      duration: 2000\r\n    });\r\n  }\r\n\r\n  private setUpForm(): void {\r\n    const extrasFormArray = this.extrasForm.get('extras') as FormArray;\r\n\r\n    while (extrasFormArray.length > 0) {\r\n      extrasFormArray.removeAt(0);\r\n    }\r\n\r\n    this.extras.forEach(extra => {\r\n      const extraObject = this.fb.group({\r\n        id: [extra.id || undefined],\r\n        name: [extra.name],\r\n        isGlobal: [extra.isGlobal],\r\n        active: [extra.active]\r\n      });\r\n\r\n      extrasFormArray.push(extraObject);\r\n    });\r\n  }\r\n}\r\n","<form [formGroup]=\"extrasForm\" class=\"dark\" novalidate>\r\n  <div formArrayName=\"extras\">\r\n    <ng-container *ngFor=\"let extra of extrasFormArray.controls; let i = index;\" [formGroupName]=\"i\">\r\n      <mat-checkbox formControlName=\"active\">\r\n        {{ extra.get('name').value }}\r\n        <mat-icon \r\n          class=\"clr-yellow\"\r\n          *ngIf=\"!extra.get('isGlobal').value\"\r\n          (click)=\"removeExtra($event, extra, i)\"\r\n        >\r\n          delete\r\n        </mat-icon>\r\n      </mat-checkbox>\r\n    </ng-container>\r\n  </div>\r\n  <div class=\"inl column news\">\r\n    <div>\r\n      <a class=\"inl\" (click)=\"this.showExtraField = true\" *ngIf=\"!showExtraField\">\r\n        <img src=\"/assets/images/icons/icon-add.svg\" alt=\"Agregar\" />\r\n        <span>Agregar</span>\r\n      </a>\r\n\r\n      <mat-form-field *ngIf=\"showExtraField\">\r\n        <mat-label>Nuevo</mat-label>\r\n        <input matInput \r\n        (keyup.enter)=\"addUserExtraAmenity($event)\" \r\n        (keyup.esc)=\"showExtraField = false\" \r\n        maxlength=\"80\"\r\n        #addNew \r\n        />\r\n      </mat-form-field>\r\n    </div>\r\n  </div>\r\n  <button class=\"btns\" type=\"button\" (click)=\"onSubmit()\">\r\n    <span>Guardar</span>\r\n  </button>\r\n</form>","import { ExtrasComponent } from './extras.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ExtrasComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ExtrasRoutingModule { }\r\n"]}