function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _construct(e,t,n){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(l){return void n(l)}a.done?t(u):Promise.resolve(u).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){asyncGeneratorStep(o,r,i,s,a,"next",e)}function a(e){asyncGeneratorStep(o,r,i,s,a,"throw",e)}s(void 0)}))}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+JPL":function(e,t,n){e.exports={default:n("gRli"),__esModule:!0}},"+RHZ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkService=void 0;var r=n("EcEN"),i=n("PyJ+"),o=n("PalJ"),s=n("vSOj"),a=n("kUwj");function u(e){if(e.body&&e.body.message)return e.body.message;switch(e.status){case 429:return"Throttled by server";case 404:return"Not found from server";default:return"Error from server"}}function l(e){return e.body?e.body.code:0}function c(e){return 409===e.status?new i.SyncNetworkError(u(e),e.status,l(e),e.body):e.status?new i.SyncError(u(e),e.status,l(e)):e instanceof a.TransportUnavailableError?e:new i.SyncError(e.message,0,0)}t.NetworkService=function(){function e(t,n,r){_classCallCheck(this,e),this.clientInfo=t,this.config=n,this.transport=r}return _createClass(e,[{key:"createHeaders",value:function(){return{"Content-Type":"application/json","Twilio-Sync-Client-Info":JSON.stringify(this.clientInfo),"Twilio-Request-Id":"RQ"+r.v4().replace(/-/g,"")}}},{key:"backoffConfig",value:function(){return Object.assign({min:4e3,max:6e4,maxAttemptsTime:9e4,randomness:.2},this.config.backoffConfig)}},{key:"executeWithRetry",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(r,i){var o=[502,503,504];n&&o.push(429);var a=new s.Retrier(t.backoffConfig());a.on("attempt",(function(){e().then((function(e){return a.succeeded(e)})).catch((function(e){if(o.includes(e.status)){var t=parseInt(e.headers?e.headers["Retry-After"]:null);a.failed(c(e),isNaN(t)?null:1e3*t)}else"Twilsock disconnected"===e.message?a.failed(c(e)):(a.removeAllListeners(),a.cancel(),i(c(e)))}))})),a.on("succeeded",(function(e){r(e)})),a.on("cancelled",(function(e){return i(c(e))})),a.on("failed",(function(e){return i(c(e))})),a.start()}))}},{key:"get",value:function(e){var t=this,n=this.createHeaders();return o.default.debug("GET",e,"ID:",n["Twilio-Request-Id"]),this.executeWithRetry((function(){return t.transport.get(e,n,t.config.productId)}),!0)}},{key:"post",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.createHeaders();return null!=n&&(s["If-Match"]=n),o.default.debug("POST",e,"ID:",s["Twilio-Request-Id"]),this.executeWithRetry((function(){return r.transport.post(e,s,t,r.config.productId)}),i)}},{key:"put",value:function(e,t,n){var r=this,i=this.createHeaders();return null!=n&&(i["If-Match"]=n),o.default.debug("PUT",e,"ID:",i["Twilio-Request-Id"]),this.executeWithRetry((function(){return r.transport.put(e,i,t,r.config.productId)}),!1)}},{key:"delete",value:function(e){var t=this,n=this.createHeaders();return o.default.debug("DELETE",e,"ID:",n["Twilio-Request-Id"]),this.executeWithRetry((function(){return t.transport.delete(e,n,t.config.productId)}),!1)}}]),e}()},"+WSI":function(e,t,n){var r=n("/r8T");e.exports=function(e,t){return new(r(e))(t)}},"+cvY":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0,t.Deferred=function(){function e(){var t=this;_classCallCheck(this,e),this._promise=new Promise((function(e,n){t._resolve=e,t._reject=n}))}return _createClass(e,[{key:"update",value:function(e){this._resolve(e)}},{key:"set",value:function(e){this.current=e,this._resolve(e)}},{key:"fail",value:function(e){this._reject(e)}},{key:"promise",get:function(){return this._promise}}]),e}()},"+fG6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Twilsock=t.TwilsockClient=t.TelemetryEvents=void 0;var r=n("+qE3"),i=n("MZ0W"),o=n("iL38"),s=n("V6L8"),a=n("aLZZ"),u=n("vywL"),l=n("0KeW"),c=n("qFAj"),d=n("+cvY"),f=n("arZA"),h=n("BLvK"),p=n("gy0F"),g=n("y/1M"),v=function e(){_classCallCheck(this,e)};t.TelemetryEvents=v,v.TWILSOCK_CONNECT="twilsock.sdk.connect",v.TWILSOCK_INIT="twilsock.sdk.init";var m=function(e){function t(e,n){var r,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).offlineStorageDeferred=new d.Deferred,h.continuationToken=h.continuationToken?h.continuationToken:p.TokenStorage.getStoredToken(n);var m=r.config=new o.Configuration(e,n,h);i.log.setLevel(m.logLevel);var y=new u.WebSocketChannel(m.url),b=h.transport?h.transport:new a.PacketInterface(y,m);return r.channel=h.channel?h.channel:new s.TwilsockImpl(y,b,m),r.registrations=h.registrations?h.registrations:new l.Registrations(b),r.upstream=new c.Upstream(b,r.channel,m),r.telemetryTracker=new g.TelemetryTracker(m,b),r.channel.on("initialized",(function(){return r.telemetryTracker.canSendTelemetry=!0})),y.on("disconnected",(function(){return r.telemetryTracker.canSendTelemetry=!1})),r.registrations.on("registered",(function(e){return r.emit("registered",e)})),r.channel.on("message",(function(e,t){return setTimeout((function(){return r.emit("message",e,t)}),0)})),r.channel.on("stateChanged",(function(e){return setTimeout((function(){return r.emit("stateChanged",e)}),0)})),r.channel.on("connectionError",(function(e){return setTimeout((function(){return r.emit("connectionError",e)}),0)})),r.channel.on("tokenAboutToExpire",(function(){return setTimeout((function(){return r.emit("tokenAboutToExpire")}),0)})),r.channel.on("tokenExpired",(function(){return setTimeout((function(){return r.emit("tokenExpired")}),0)})),r.channel.on("connected",(function(){return r.registrations.updateRegistrations()})),r.channel.on("connected",(function(){return r.upstream.sendPendingMessages()})),r.channel.on("connected",(function(){return setTimeout((function(){return r.emit("connected")}),0)})),r.channel.on("beforeConnect",(function(){return r.telemetryTracker.addPartialEvent(new g.TelemetryEventDescription("Establish WebSocket connection","",new Date),v.TWILSOCK_CONNECT,g.TelemetryPoint.Start)})),r.channel.on("connected",(function(){return r.telemetryTracker.addPartialEvent(new g.TelemetryEventDescription("Establish WebSocket connection","",new Date,new Date),v.TWILSOCK_CONNECT,g.TelemetryPoint.End)})),r.channel.on("beforeSendInit",(function(){return r.telemetryTracker.addPartialEvent(new g.TelemetryEventDescription("Send Twilsock init","",new Date),v.TWILSOCK_INIT,g.TelemetryPoint.Start)})),r.channel.on("initialized",(function(){return r.telemetryTracker.addPartialEvent(new g.TelemetryEventDescription("Send Twilsock init","Succeeded",new Date,new Date),v.TWILSOCK_INIT,g.TelemetryPoint.End)})),r.channel.on("sendInitFailed",(function(){return r.telemetryTracker.addPartialEvent(new g.TelemetryEventDescription("Send Twilsock init","Failed",new Date,new Date),v.TWILSOCK_INIT,g.TelemetryPoint.End)})),r.channel.on("initialized",(function(e){r.handleStorageId(n,e),p.TokenStorage.storeToken(e.continuationToken,n),setTimeout((function(){return r.emit("initialized",e)}),0)})),r.channel.on("disconnected",(function(){return setTimeout((function(){return r.emit("disconnected")}),0)})),r.channel.on("disconnected",(function(){return r.upstream.rejectPendingMessages()})),r.channel.on("disconnected",(function(){return r.offlineStorageDeferred.fail(new f.TwilsockError("Client disconnected"))})),r.offlineStorageDeferred.promise.catch((function(){})),r}var n;return _inherits(t,e),_createClass(t,[{key:"emit",value:function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return i.log.debug("Emitting ".concat(e.toString(),"(").concat(o.map((function(e){return JSON.stringify(e)})).join(", "),")")),(n=_get(_getPrototypeOf(t.prototype),"emit",this)).call.apply(n,[this,e].concat(o))}},{key:"handleStorageId",value:function(e,t){if(t.offlineStorage)if(t.offlineStorage.hasOwnProperty(e))try{this.offlineStorageDeferred.set(h.OfflineProductStorage.create(t.offlineStorage[e])),i.log.debug("Offline storage for '".concat(e,"' product: ").concat(JSON.stringify(t.offlineStorage[e]),"."))}catch(n){this.offlineStorageDeferred.fail(new f.TwilsockError("Failed to parse offline storage for ".concat(e," ").concat(JSON.stringify(t.offlineStorage[e]),". ").concat(n,".")))}else this.offlineStorageDeferred.fail(new f.TwilsockError("No offline storage id for '".concat(e,"' product: ").concat(JSON.stringify(t.offlineStorage))));else this.offlineStorageDeferred.fail(new f.TwilsockError("No offline storage id"))}},{key:"storageId",value:function(){return this.offlineStorageDeferred.promise}},{key:"updateToken",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.log.trace("updating token '".concat(t,"'")),this.config.token===t){e.next=2;break}return e.abrupt("return",(this.config.updateToken(t),this.channel.updateToken(t)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setNotificationsContext",value:function(e,t){this.registrations.setNotificationsContext(e,t)}},{key:"removeNotificationsContext",value:function(e){this.registrations.removeNotificationsContext(e)}},{key:"connect",value:function(){return this.channel.connect()}},{key:"disconnect",value:function(){return this.telemetryTracker.sendTelemetry(g.EventSendingLimitation.AnyEventsIncludingUnfinished),this.channel.disconnect()}},{key:"get",value:function(e,t,n){return this.telemetryTracker.sendTelemetry(g.EventSendingLimitation.AnyEvents),this.upstream.send("GET",e,t,void 0,n)}},{key:"post",value:function(e,t,n,r){return this.telemetryTracker.sendTelemetry(g.EventSendingLimitation.AnyEvents),this.upstream.send("POST",e,t,n,r)}},{key:"put",value:function(e,t,n,r){return this.telemetryTracker.sendTelemetry(g.EventSendingLimitation.AnyEvents),this.upstream.send("PUT",e,t,n,r)}},{key:"delete",value:function(e,t,n){return this.telemetryTracker.sendTelemetry(g.EventSendingLimitation.AnyEvents),this.upstream.send("DELETE",e,t,void 0,n)}},{key:"addTelemetryEvent",value:function(e){this.telemetryTracker.addTelemetryEvent(e),this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}},{key:"addPartialTelemetryEvent",value:function(e,t,n){this.telemetryTracker.addPartialEvent(e,t,n),n===g.TelemetryPoint.End&&this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}},{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"state",get:function(){return this.channel.state}}]),t}(r.EventEmitter);t.TwilsockClient=m,t.Twilsock=m},"+qE3":function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o,s;if(l(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,console&&console.warn&&console.warn(a)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):v(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var l=u.length,c=v(u,l);for(n=0;n<l;++n)o(c[n],this,t)}return!0},a.prototype.on=a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){return l(t),this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,h(this,e,t)),this},a.prototype.off=a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(l(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"+qwt":function(e,t,n){(function(e){var r;(function(){"use strict";var i={function:!0,object:!0},o=i[typeof window]&&window||this,s=i[typeof t]&&t&&i[typeof e]&&e&&!e.nodeType&&e&&"object"==typeof global&&global;!s||s.global!==s&&s.window!==s&&s.self!==s||(o=s);var a=Math.pow(2,53)-1,u=/\bOpera/,l=Object.prototype,c=l.hasOwnProperty,d=l.toString;function f(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function h(e){return e=y(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:f(e)}function p(e,t){for(var n in e)c.call(e,n)&&t(e[n],n,e)}function g(e){return null==e?f(e):d.call(e).slice(8,-1)}function v(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function m(e,t){var n=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=a)for(;++n<r;)t(e[n],n);else p(e,t)}(e,(function(r,i){n=t(n,r,i,e)})),n}function y(e){return String(e).replace(/^ +| +$/g,"")}var b=function e(t){var n=o,r=t&&"object"==typeof t&&"String"!=g(t);r&&(n=t,t=null);var i=n.navigator||{},s=i.userAgent||"";t||(t=s);var a,l,c,f,b=r?!!i.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(d.toString()),k=r?"Object":"ScriptBridgingProxyObject",_=r?"Object":"Environment",C=r&&n.java?"JavaPackage":g(n.java),w=r?"Object":"RuntimeObject",x=/\bJava/.test(C)&&n.java,O=x&&g(n.environment)==_,S=x?"a":"\u03b1",P=x?"b":"\u03b2",M=n.document||{},T=n.operamini||n.opera,R=u.test(R=r&&T?T["[[Class]]"]:g(T))?R:T=null,E=t,I=[],j=null,N=t==s,A=N&&T&&"function"==typeof T.version&&T.version(),U=m([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||v(n))+"\\b","i").exec(t)&&(n.label||n)})),D=m(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(e,n){return e||RegExp("\\b"+(n.pattern||v(n))+"\\b","i").exec(t)&&(n.label||n)})),L=q([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),F=m({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},(function(e,n,r){return e||(n[L]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(L)]||RegExp("\\b"+v(r)+"(?:\\b|\\w*\\d)","i").exec(t))&&r})),z=m(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(e,n){var r=n.pattern||v(n);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),h(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,n.label||n)),e}));function q(e){return m(e,(function(e,n){var r=n.pattern||v(n);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=h(e[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}function B(e){return m(e,(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))}if(U&&(U=[U]),/\bAndroid\b/.test(z)&&!L&&(a=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(t))&&(L=y(a[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),F&&!L?L=q([F]):F&&L&&(L=L.replace(RegExp("^("+v(F)+")[-_.\\s]","i"),F+" ").replace(RegExp("^("+v(F)+")[-_.]?(\\w)","i"),F+" $2")),(a=/\bGoogle TV\b/.exec(L))&&(L=a[0]),/\bSimulator\b/i.test(t)&&(L=(L?L+" ":"")+"Simulator"),"Opera Mini"==D&&/\bOPiOS\b/.test(t)&&I.push("running in Turbo/Uncompressed mode"),"IE"==D&&/\blike iPhone OS\b/.test(t)?(F=(a=e(t.replace(/like iPhone OS/,""))).manufacturer,L=a.product):/^iP/.test(L)?(D||(D="Safari"),z="iOS"+((a=/ OS ([\d_]+)/i.exec(t))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"==D&&/^Linux\b/i.test(z)?z="Kubuntu":F&&"Google"!=F&&(/Chrome/.test(D)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(L))||/\bAndroid\b/.test(z)&&/^Chrome/.test(D)&&/\bVersion\//i.test(t)?(D="Android Browser",z=/\bAndroid\b/.test(z)?z:"Android"):"Silk"==D?(/\bMobi/i.test(t)||(z="Android",I.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&I.unshift("accelerated")):"UC Browser"==D&&/\bUCWEB\b/.test(t)?I.push("speed mode"):"PaleMoon"==D&&(a=/\bFirefox\/([\d.]+)\b/.exec(t))?I.push("identifying as Firefox "+a[1]):"Firefox"==D&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(z||(z="Firefox OS"),L||(L=a[1])):!D||(a=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(D))?(D&&!L&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(a+"/")+8))&&(D=null),(a=L||F||z)&&(L||F||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(z))&&(D=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(z)?z:a)+" Browser")):"Electron"==D&&(a=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&I.push("Chromium "+a),A||(A=B(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",v(D),"(?:Firefox|Minefield|NetFront)"])),(a=("iCab"==U&&parseFloat(A)>3?"WebKit":/\bOpera\b/.test(D)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(U)&&"WebKit"||!U&&/\bMSIE\b/i.test(t)&&("Mac OS"==z?"Tasman":"Trident")||"WebKit"==U&&/\bPlayStation\b(?! Vita\b)/i.test(D)&&"NetFront")&&(U=[a]),"IE"==D&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(D+=" Mobile",z="Windows Phone "+(/\+$/.test(a)?a:a+".x"),I.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(D="IE Mobile",z="Windows Phone 8.x",I.unshift("desktop mode"),A||(A=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=D&&"Trident"==U&&(a=/\brv:([\d.]+)/.exec(t))&&(D&&I.push("identifying as "+D+(A?" "+A:"")),D="IE",A=a[1]),N){if(/^(?:boolean|number|string|undefined)$/.test(f=null!=(c=n)?typeof c.global:"number")||"object"==f&&!c.global)g(a=n.runtime)==k?(D="Adobe AIR",z=a.flash.system.Capabilities.os):g(a=n.phantom)==w?(D="PhantomJS",A=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof M.documentMode&&(a=/\bTrident\/(\d+)/i.exec(t))?((a=+a[1]+4)!=(A=[A,M.documentMode])[1]&&(I.push("IE "+A[1]+" mode"),U&&(U[1]=""),A[1]=a),A="IE"==D?String(A[1].toFixed(1)):A[0]):"number"==typeof M.documentMode&&/^(?:Chrome|Firefox)\b/.test(D)&&(I.push("masking as "+D+" "+A),D="IE",A="11.0",U=["Trident"],z="Windows");else if(x&&(E=(a=x.lang.System).getProperty("os.arch"),z=z||a.getProperty("os.name")+" "+a.getProperty("os.version")),O){try{A=n.require("ringo/engine").version.join("."),D="RingoJS"}catch(W){(a=n.system)&&a.global.system==n.system&&(D="Narwhal",z||(z=a[0].os||null))}D||(D="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(a=n.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(I.push("Node "+a.versions.node),D="Electron",A=a.versions.electron):"string"==typeof a.versions.nw&&(I.push("Chromium "+A,"Node "+a.versions.node),D="NW.js",A=a.versions.nw)),D||(D="Node.js",E=a.arch,z=a.platform,A=(A=/[\d.]+/.exec(a.version))?A[0]:null));z=z&&h(z)}if(A&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(A)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(N&&i.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(j=/b/i.test(a)?"beta":"alpha",A=A.replace(RegExp(a+"\\+?$"),"")+("beta"==j?P:S)+(/\d+\+?/.exec(a)||"")),"Fennec"==D||"Firefox"==D&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(z))D="Firefox Mobile";else if("Maxthon"==D&&A)A=A.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(L))"Xbox 360"==L&&(z=null),"Xbox 360"==L&&/\bIEMobile\b/.test(t)&&I.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(D)&&(!D||L||/Browser|Mobi/.test(D))||"Windows CE"!=z&&!/Mobi/i.test(t))if("IE"==D&&N)try{null===n.external&&I.unshift("platform preview")}catch(W){I.unshift("embedded")}else(/\bBlackBerry\b/.test(L)||/\bBB10\b/.test(t))&&(a=(RegExp(L.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||A)?(z=((a=[a,/BB10/.test(t)])[1]?(L=null,F="BlackBerry"):"Device Software")+" "+a[0],A=null):this!=p&&"Wii"!=L&&(N&&T||/Opera/.test(D)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==D&&/\bOS X (?:\d+\.){2,}/.test(z)||"IE"==D&&(z&&!/^Win/.test(z)&&A>5.5||/\bWindows XP\b/.test(z)&&A>8||8==A&&!/\bTrident\b/.test(t)))&&!u.test(a=e.call(p,t.replace(u,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),u.test(D)?(/\bIE\b/.test(a)&&"Mac OS"==z&&(z=null),a="identify"+a):(a="mask"+a,D=R?h(R.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(z=null),N||(A=null)),U=["Presto"],I.push(a));else D+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==D&&"+"==a[1].slice(-1)?(D="WebKit Nightly",j="alpha",A=a[1].slice(0,-1)):A!=a[1]&&A!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(A=null),a[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(t)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==U&&(U=["Blink"]),N&&(b||a[1])?(U&&(U[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=U?"27":"28")):(U&&(U[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:a<602?9:a<604?10:a<606?11:a<608?12:"12"),U&&(U[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==D&&(!A||parseInt(A)>45)?A=a:"Chrome"==D&&/\bHeadlessChrome/i.test(t)&&I.unshift("headless")),"Opera"==D&&(a=/\bzbov|zvav$/.exec(z))?(D+=" ",I.unshift("desktop mode"),"zvav"==a?(D+="Mini",A=null):D+="Mobile",z=z.replace(RegExp(" *"+a+"$"),"")):"Safari"==D&&/\bChrome\b/.exec(U&&U[1])?(I.unshift("desktop mode"),D="Chrome Mobile",A=null,/\bOS X\b/.test(z)?(F="Apple",z="iOS 4.3+"):z=null):/\bSRWare Iron\b/.test(D)&&!A&&(A=B("Chrome")),A&&0==A.indexOf(a=/[\d.]+$/.exec(z))&&t.indexOf("/"+a+"-")>-1&&(z=y(z.replace(a,""))),z&&-1!=z.indexOf(D)&&!RegExp(D+" OS").test(z)&&(z=z.replace(RegExp(" *"+v(D)+" *"),"")),U&&!/\b(?:Avant|Nook)\b/.test(D)&&(/Browser|Lunascape|Maxthon/.test(D)||"Safari"!=D&&/^iOS/.test(z)&&/\bSafari\b/.test(U[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(D)&&U[1])&&(a=U[U.length-1])&&I.push(a),I.length&&(I=["("+I.join("; ")+")"]),F&&L&&L.indexOf(F)<0&&I.push("on "+F),L&&I.push((/^on /.test(I[I.length-1])?"":"on ")+L),z&&(a=/ ([\d.+]+)$/.exec(z),l=a&&"/"==z.charAt(z.length-a[0].length-1),z={architecture:32,family:a&&!l?z.replace(a[0],""):z,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!l?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(E))&&!/\bi686\b/i.test(E)?(z&&(z.architecture=64,z.family=z.family.replace(RegExp(" *"+a),"")),D&&(/\bWOW64\b/i.test(t)||N&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(t))&&I.unshift("32-bit")):z&&/^OS X/.test(z.family)&&"Chrome"==D&&parseFloat(A)>=39&&(z.architecture=64),t||(t=null);var G={};return G.description=t,G.layout=U&&U[0],G.manufacturer=F,G.name=D,G.prerelease=j,G.product=L,G.ua=t,G.version=D&&A,G.os=z||{architecture:null,family:null,version:null,toString:function(){return"null"}},G.parse=e,G.toString=function(){return this.description||""},G.version&&I.unshift(A),G.name&&I.unshift(D),z&&D&&(z!=String(z).split(" ")[0]||z!=D.split(" ")[0]&&!L)&&I.push(L?"("+z+")":"on "+z),I.length&&(G.description=I.join(" ")),G}();o.platform=b,void 0===(r=(function(){return b}).call(t,n,t,e))||(e.exports=r)}).call(this)}).call(this,n("YuTi")(e))},"+vXQ":function(e,t,n){e.exports=!n("C61u")&&!n("S4vA")((function(){return 7!=Object.defineProperty(n("BfU5")("div"),"a",{get:function(){return 7}}).a}))},"/2MY":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Paginator=void 0,t.Paginator=function(){function e(t,n,r,i){_classCallCheck(this,e),this.prevToken=r,this.nextToken=i,this.items=t,this.source=n}var t,n;return _createClass(e,[{key:"nextPage",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasNextPage){e.next=2;break}throw new Error("No next page");case 2:return e.abrupt("return",this.source(this.nextToken));case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"prevPage",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasPrevPage){e.next=2;break}throw new Error("No previous page");case 2:return e.abrupt("return",this.source(this.prevToken));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"hasNextPage",get:function(){return!!this.nextToken}},{key:"hasPrevPage",get:function(){return!!this.prevToken}}]),e}()},"/F7N":function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},"/LtL":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Notifications=void 0;var r=n("mB9D");Object.defineProperty(t,"Notifications",{enumerable:!0,get:function(){return r.Client}})},"/NTb":function(e,t,n){t.f=n("zBWt")},"/S/1":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OfflineProductStorage=void 0;var r=n("7FP+"),i=function(){function e(t){_classCallCheck(this,e),this.id=t}return _createClass(e,null,[{key:"create",value:function(t){if(t instanceof Object&&"storage_id"in t)return new e(t.storage_id);throw new r.TwilsockError('Field "storage_id" is missing')}}]),e}();t.OfflineProductStorage=i},"/r8T":function(e,t,n){var r=n("ekG2"),i=n("Trx6"),o=n("zBWt")("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},"/tXR":function(e,t){t.f=Object.getOwnPropertySymbols},"0KeW":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Registrations=void 0;var r=n("MZ0W"),i=n("+qE3"),o=n("EcEN"),s=n("arZA");t.Registrations=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).transport=e,n.registrations=new Map,n.registrationsInProgress=new Map,n}var n,i,a,u;return _inherits(t,e),_createClass(t,[{key:"putNotificationContext",value:(u=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"put_notification_ctx",notification_ctx_id:t},e.next=3,this.transport.sendWithReply(r,n);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"deleteNotificationContext",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"delete_notification_ctx",notification_ctx_id:t},e.next=3,this.transport.sendWithReply(n);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"updateRegistration",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.log.debug("update registration for context",t),(i=this.registrationsInProgress.get(t))||(i=new Set,this.registrationsInProgress.set(t,i)),s=o.v4(),i.add(s),e.prev=5,e.next=8,this.putNotificationContext(t,n);case 8:r.log.debug("registration attempt succeeded for context",n),i.delete(s),0===i.size&&(this.registrationsInProgress.delete(t),this.emit("registered",t)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),r.log.warn("registration attempt failed for context",n),r.log.debug(e.t0),i.delete(s),0===i.size&&(this.registrationsInProgress.delete(t),this.emit("registrationFailed",t,e.t0));case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e,t){return i.apply(this,arguments)})},{key:"updateRegistrations",value:function(){var e=this;r.log.trace("refreshing ".concat(this.registrations.size," registrations")),this.registrations.forEach((function(t,n){e.updateRegistration(n,t)}))}},{key:"setNotificationsContext",value:function(e,t){if(!e||!t)throw new s.TwilsockError("Invalid arguments provided");this.registrations.set(e,t),this.transport.isConnected&&this.updateRegistration(e,t)}},{key:"removeNotificationsContext",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.registrations.has(t),!e.t0){e.next=5;break}return e.next=4,this.deleteNotificationContext(t);case 4:this.transport.isConnected&&this.registrations.delete(t);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),t}(i.EventEmitter)},"0KpA":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketChannel=void 0;var r=n("+qE3"),i=n("uShU");t.WebSocketChannel=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).url=e,r.WebSocket=global.WebSocket||global.MozWebSocket||n(6),r}return _inherits(t,e),_createClass(t,[{key:"connect",value:function(){var e=this;i.log.trace("connecting to socket");var t=new this.WebSocket(this.url);t.binaryType="arraybuffer",t.onopen=function(){i.log.debug("socket opened ".concat(e.url)),e.emit("connected")},t.onclose=function(t){i.log.debug("socket closed",t),e.emit("disconnected",t)},t.onerror=function(t){i.log.debug("error:",t),e.emit("socketError",t)},t.onmessage=function(t){e.emit("message",t.data)},this.socket=t}},{key:"send",value:function(e){this.socket.send(e)}},{key:"close",value:function(){if(i.log.trace("closing socket"),this.socket){this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null;try{this.socket.close()}finally{}}}},{key:"isConnected",get:function(){return this.socket&&1===this.socket.readyState}}]),t}(r.EventEmitter)},"0WpP":function(e,t,n){var r=n("/F7N"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},"0YXi":function(e,t,n){"use strict";var r=a(n("14Xm")),i=a(n("D3Ub")),o=a(n("iCc5")),s=a(n("V7oC"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SyncList=void 0;var u=n("iqZd"),l=n("IMt4"),c=n("3m9+"),d=function(){function e(t){(0,o.default)(this,e),this.services=t}var t;return(0,s.default)(e,[{key:"getPage",value:(t=(0,i.default)(r.default.mark((function e(t){var n,i,o=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||{},e.next=3,this.services.session.getSessionLinks();case 3:return n=new u.UriBuilder(e.sent.syncListUrl).arg("PageToken",t.pageToken).build(),e.next=7,this.services.network.get(n);case 7:return e.abrupt("return",new l.RestPaginator((i=e.sent).body.channels.map((function(e){return new c.SyncListDescriptor(e)})),(function(e){return o.getPage({pageToken:e})}),i.body.meta.previous_token,i.body.meta.next_token));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();t.SyncList=d},"0s00":function(e){e.exports=JSON.parse('{"_args":[["twilio-chat@4.1.0","D:\\\\Software\\\\Blue\\\\a-plato-puesto-admin"]],"_from":"twilio-chat@4.1.0","_id":"twilio-chat@4.1.0","_inBundle":false,"_integrity":"sha512-oK/Req0KMBedZox3lciBEKmAiMe6L/6z8fGlx+4YKRjEX3J4Abag0TkMwAxPizB32ILKQKV2WBi/+Hqwi808RA==","_location":"/twilio-chat","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"twilio-chat@4.1.0","name":"twilio-chat","escapedName":"twilio-chat","rawSpec":"4.1.0","saveSpec":null,"fetchSpec":"4.1.0"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/twilio-chat/-/twilio-chat-4.1.0.tgz","_spec":"4.1.0","_where":"D:\\\\Software\\\\Blue\\\\a-plato-puesto-admin","author":{"name":"Twilio"},"browser":"browser/index.js","browserslist":["IE 11","last 3 Chrome versions","last 3 Firefox versions","last 3 Safari versions","last 3 Edge versions","last 2 iOS version","last 2 ChromeAndroid version","last 2 FirefoxAndroid version","last 2 Samsung versions","last 2 UCAndroid versions"],"dependencies":{"babel-runtime":"^6.26.0","iso8601-duration":"^1.2.0","loglevel":"^1.6.6","operation-retrier":"^3.0.0","platform":"^1.3.6","rfc6902":"^3.0.2","twilio-mcs-client":"^0.3.3","twilio-notifications":"^0.5.9","twilio-sync":"^0.13.0","twilsock":"^0.6.1","uuid":"^3.3.2"},"description":"Twilio Chat service client library","devDependencies":{"@types/chai":"^4.2.5","@types/chai-as-promised":"^7.1.2","@types/chai-string":"^1.4.1","@types/core-js":"^2.5.0","@types/mocha":"^5.2.7","@types/node":"^12.12.12","@types/sinon":"^7.5.1","@types/sinon-chai":"^3.2.2","async":"^3.0.1","async-test-tools":"^1.0.7","babel-core":"^6.26.0","babel-plugin-transform-builtin-extend":"^1.1.2","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.1","babelify":"^8.0.0","backoff":"^2.5.0","browserify":"^16.2.3","browserify-replace":"^1.0.0","browserslist":"^4.13.0","chai":"^4.2.0","chai-as-promised":"^7.1.1","chai-string":"^1.5.0","cheerio":"^1.0.0-rc.2","cross-env":"^5.2.0","del":"^5.1.0","fancy-log":"^1.3.3","fs":"0.0.2","gulp":"^4.0.2","gulp-babel":"^7.0.1","gulp-derequire":"^2.1.0","gulp-if":"^2.0.2","gulp-insert":"^0.5.0","gulp-rename":"^1.4.0","gulp-sourcemaps":"^2.6.5","gulp-tap":"^1.0.1","gulp-tslint":"^8.1.4","gulp-typescript":"^5.0.1","gulp-uglify-es":"^1.0.4","ink-docstrap":"^1.3.2","isomorphic-form-data":"^2.0.0","jsdoc":"~3.5.5","jsdoc-strip-async-await":"^0.1.0","mocha":"^6.2.2","mocha.parallel":"^0.15.6","node-fetch":"^2.6.0","nyc":"^14.1.1","path":"^0.12.7","sinon":"^7.5.0","sinon-chai":"^3.3.0","source-map-explorer":"^2.1.1","ts-node":"^8.5.2","tslint":"^5.20.1","twilio":"^3.37.1","typescript":"^3.7.2","uglify-save-license":"^0.4.1","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"},"engines":{"node":">=6"},"license":"MIT","main":"lib/index.js","name":"twilio-chat","types":"./lib/client.d.ts","version":"4.1.0"}')},"14Xm":function(e,t,n){e.exports=n("cSMa")},"174E":function(e,t,n){"use strict";var r=h(n("4d7F")),i=h(n("gDS+")),o=h(n("14Xm")),s=h(n("D3Ub")),a=h(n("ODRq")),u=h(n("Yz+Y")),l=h(n("iCc5")),c=h(n("V7oC")),d=h(n("FYw3")),f=h(n("mRg0"));function h(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=void 0;var p=n("+qE3"),g=n("yC9A"),v=n("wv9B"),m=g.Logger.scope("Messages"),y=function(e){function t(e,n){(0,l.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return r.channel=e,r.services=n,r.messagesByIndex=new a.default,r.messagesListPromise=null,r}var n,h,p;return(0,f.default)(t,e),(0,c.default)(t,[{key:"subscribe",value:function(e){var t=this;return this.messagesListPromise=this.messagesListPromise||this.services.syncClient.list({id:e,mode:"open_existing"}).then((function(e){return e.on("itemAdded",(function(e){m.debug(t.channel.sid+" itemAdded: "+e.item.index);var n=new v.Message(t.channel,t.services,e.item.index,e.item.value);t.messagesByIndex.has(n.index)?m.debug("Message arrived, but already known and ignored",t.channel.sid,n.index):(t.messagesByIndex.set(n.index,n),n.on("updated",(function(e){return t.emit("messageUpdated",e)})),t.emit("messageAdded",n))})),e.on("itemRemoved",(function(e){m.debug(t.channel.sid+" itemRemoved: "+e.index);var n=e.index;if(t.messagesByIndex.has(n)){var r=t.messagesByIndex.get(n);t.messagesByIndex.delete(r.index),r.removeAllListeners("updated"),t.emit("messageRemoved",r)}})),e.on("itemUpdated",(function(e){m.debug(t.channel.sid+" itemUpdated: "+e.item.index);var n=t.messagesByIndex.get(e.item.index);n&&n._update(e.item.value)})),e})).catch((function(e){throw t.messagesListPromise=null,"disconnected"!=t.services.syncClient.connectionState&&m.error("Failed to get messages object for channel",t.channel.sid,e),m.debug("ERROR: Failed to get messages object for channel",t.channel.sid,e),e}))}},{key:"unsubscribe",value:(p=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.messagesListPromise){e.next=6;break}return e.next=3,this.messagesListPromise;case 3:e.sent.close(),this.messagesListPromise=null;case 6:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"send",value:(h=(0,s.default)(o.default.mark((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.debug("Sending text message",t,n),e.abrupt("return",this.services.session.addCommand("sendMessage",{channelSid:this.channel.sid,text:t,attributes:(0,i.default)(n)}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"sendMedia",value:(n=(0,s.default)(o.default.mark((function e(t){var n,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.debug("Sending media message",t,s),n=void 0,!("undefined"!=typeof FormData&&t instanceof FormData)){e.next=9;break}return m.debug("Sending media message as FormData",t,s),e.next=6,this.services.mcsClient.postFormData(t);case 6:n=e.sent,e.next=16;break;case 9:if(m.debug("Sending media message as SendMediaOptions",t,s),(r=t).contentType&&r.media){e.next=13;break}throw new Error("Media content <Channel#SendMediaOptions> must contain non-empty contentType and media");case 13:return e.next=15,this.services.mcsClient.post(r.contentType,r.media);case 15:n=e.sent;case 16:return e.abrupt("return",this.services.session.addCommand("sendMediaMessage",{channelSid:this.channel.sid,mediaSid:n.sid,attributes:(0,i.default)(s)}));case 17:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getMessages",value:function(e,t,n){return this._getMessages(e,t=void 0!==t?t:"end",n=n||"backwards")}},{key:"wrapPaginator",value:function(e,t,n){var r=this,i="desc"===e,o=function(){return t.nextPage().then((function(t){return r.wrapPaginator(e,t,n)}))},s=function(){return t.prevPage().then((function(t){return r.wrapPaginator(e,t,n)}))};return n(t.items).then((function(e){return{items:e.sort((function(e,t){return e.index-t.index})),hasPrevPage:i?t.hasNextPage:t.hasPrevPage,hasNextPage:i?t.hasPrevPage:t.hasNextPage,prevPage:i?o:s,nextPage:i?s:o}}))}},{key:"_upsertMessage",value:function(e,t){var n=this,r=this.messagesByIndex.get(e);if(r)return r;var i=new v.Message(this.channel,this.services,e,t);return this.messagesByIndex.set(i.index,i),i.on("updated",(function(e){return n.emit("messageUpdated",e)})),i}},{key:"_getMessages",value:function(e,t,n){var i=this;t=void 0!==t?t:"end",e=e||30;var o="backwards"===n?"desc":"asc";return this.messagesListPromise.then((function(n){return n.getItems({from:"end"!==t?t:void 0,pageSize:e,order:o})})).then((function(e){return i.wrapPaginator(o,e,(function(e){return r.default.all(e.map((function(e){return i._upsertMessage(e.index,e.value)})))}))}))}}]),t}(p.EventEmitter);t.Messages=y},"1GvH":function(e,t,n){n("5w6Y"),e.exports=n("VSTI").Object.keys},"1dR4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListItem=void 0;var r=function(){function e(t){_classCallCheck(this,e),this.data=t}return _createClass(e,[{key:"update",value:function(e,t,n,r){return this.data.lastEventId=e,this.data.revision=t,this.data.value=n,this.data.dateUpdated=r,this}},{key:"updateDateExpires",value:function(e){this.data.dateExpires=e}},{key:"uri",get:function(){return this.data.uri}},{key:"revision",get:function(){return this.data.revision}},{key:"lastEventId",get:function(){return this.data.lastEventId}},{key:"dateUpdated",get:function(){return this.data.dateUpdated}},{key:"dateExpires",get:function(){return this.data.dateExpires}},{key:"index",get:function(){return this.data.index}},{key:"value",get:function(){return this.data.value}}]),e}();t.ListItem=r,t.default=r},"1i29":function(e,t,n){"use strict";var r=n("USwo"),i=n("FgkJ"),o=n("nAx8"),s=n("wlNh");e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,a,u=arguments[1];return i(this),(t=void 0!==u)&&i(u),null==e?new this:(n=[],t?(r=0,a=o(u,arguments[2],2),s(e,!1,(function(e){n.push(a(e,r++))}))):s(e,!1,n.push,n),new this(n))}})}},"2zfi":function(e,t,n){var r=n("d+lc"),i=n("FgkJ"),o=n("zBWt")("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||null==(n=r(s)[o])?t:i(n)}},"3+Ww":function(e,t){},"32R9":function(e,t,n){n("xKiQ"),e.exports=n("VSTI").Reflect.metadata},"37Ge":function(e,t,n){"use strict";var r=C(n("GQeE")),i=C(n("FyfS")),o=C(n("m1cH")),s=C(n("jWXv")),a=C(n("14Xm")),u=C(n("4d7F")),l=C(n("D3Ub")),c=C(n("ODRq")),d=C(n("gDS+")),f=C(n("ql3t")),h=C(n("Yz+Y")),p=C(n("iCc5")),g=C(n("V7oC")),v=C(n("FYw3")),m=C(n("mRg0")),y=C(n("u8T8")),b=C(n("SEkw")),k=C(n("EJiy")),_=C(n("JO7F"));function C(e){return e&&e.__esModule?e:{default:e}}var w=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=(0,_.default)(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":(0,k.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&(0,b.default)(t,n,s),s},x=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,k.default)(Reflect))&&"function"==typeof y.default)return(0,y.default)(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Channel=void 0;var O=n("+qE3"),S=n("yC9A"),P=n("HlZy"),M=n("Eig5"),T=n("174E"),R=n("iqZd"),E=n("C9Jq"),I=S.Logger.scope("Channel"),j={lastMessage:"lastMessage",attributes:"attributes",createdBy:"createdBy",dateCreated:"dateCreated",dateUpdated:"dateUpdated",friendlyName:"friendlyName",lastConsumedMessageIndex:"lastConsumedMessageIndex",notificationLevel:"notificationLevel",sid:"sid",status:"status",type:"type",uniqueName:"uniqueName",state:"state"};function N(e){try{return new Date(e)}catch(t){return null}}var A=function(e){function t(e,n,r){(0,p.default)(this,t);var i=(0,v.default)(this,(t.__proto__||(0,h.default)(t)).call(this)),o=n.attributes||{},s=n.createdBy,a=N(n.dateCreated),u=N(n.dateUpdated),l=n.friendlyName||null,g=(0,f.default)(n.lastConsumedMessageIndex)?n.lastConsumedMessageIndex:null,m=n.uniqueName||null;try{(0,d.default)(o)}catch(y){throw new Error("Attributes must be a valid JSON object.")}return i.services=e,i.sid=r,i.entityName=n.channel,i.channelState={uniqueName:m,status:"notParticipating",type:n.type,attributes:o,createdBy:s,dateCreated:a,dateUpdated:u,friendlyName:l,lastConsumedMessageIndex:g},n.notificationLevel&&(i.channelState.notificationLevel=n.notificationLevel),i.members=new c.default,i.membersEntity=new P.Members(i,i.services,i.members),i.membersEntity.on("memberJoined",i.emit.bind(i,"memberJoined")),i.membersEntity.on("memberLeft",i.emit.bind(i,"memberLeft")),i.membersEntity.on("memberUpdated",(function(e){return i.emit("memberUpdated",e)})),i.messagesEntity=new T.Messages(i,e),i.messagesEntity.on("messageAdded",(function(e){return i._onMessageAdded(e)})),i.messagesEntity.on("messageUpdated",(function(e){return i.emit("messageUpdated",e)})),i.messagesEntity.on("messageRemoved",i.emit.bind(i,"messageRemoved")),i}var n,y,b,k,_,C,w,x,O,S,E,A,U,D,L,F,z,q,B,G,W,V,X,J,H,K,Y;return(0,m.default)(t,e),(0,g.default)(t,[{key:"_subscribe",value:function(){var e=this;return this.entityPromise?this.entityPromise:this.entityPromise=this.entityPromise||this.services.syncClient.document({id:this.entityName,mode:"open_existing"}).then((function(t){return e.entity=t,e.entity.on("updated",(function(t){e._update(t.value)})),e.entity.on("removed",(function(){return e.emit("removed",e)})),e._update(e.entity.value),t})).catch((function(t){throw e.entity=null,e.entityPromise=null,"disconnected"!=e.services.syncClient.connectionState&&I.error("Failed to get channel object",t),I.debug("ERROR: Failed to get channel object",t),t}))}},{key:"_subscribeStreams",value:(Y=(0,l.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._subscribe();case 3:return I.trace("_subscribeStreams, this.entity.value=",this.entity.value),t=this.entity.value.messages,n=this.entity.value.roster,e.next=8,u.default.all([this.messagesEntity.subscribe(t),this.membersEntity.subscribe(n)]);case 8:e.next=15;break;case 10:throw e.prev=10,e.t0=e.catch(0),"disconnected"!==this.services.syncClient.connectionState&&I.error("Failed to subscribe on channel objects",this.sid,e.t0),I.debug("ERROR: Failed to subscribe on channel objects",this.sid,e.t0),e.t0;case 15:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return Y.apply(this,arguments)})},{key:"_unsubscribe",value:(K=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrivate||!this.entity){e.next=5;break}return e.next=3,this.entity.close();case 3:this.entity=null,this.entityPromise=null;case 5:return e.abrupt("return",u.default.all([this.membersEntity.unsubscribe(),this.messagesEntity.unsubscribe()]));case 6:case"end":return e.stop()}}),e,this)}))),function(){return K.apply(this,arguments)})},{key:"_setStatus",value:function(e,t){var n=this;this.statusSource=t,this.channelState.status!==e&&(this.channelState.status=e,"joined"===e?this._subscribeStreams().catch((function(t){if(I.debug("ERROR while setting channel status "+e,t),"disconnected"!==n.services.syncClient.connectionState)throw t})):"invited"===e?this._subscribe().catch((function(t){if(I.debug("ERROR while setting channel status "+e,t),"disconnected"!==n.services.syncClient.connectionState)throw t})):this.entityPromise&&this._unsubscribe().catch((function(t){if(I.debug("ERROR while setting channel status "+e,t),"disconnected"!==n.services.syncClient.connectionState)throw t})))}},{key:"_statusSource",value:function(){return this.statusSource}},{key:"_update",value:function(e){var n,a,u,l,c;I.trace("_update",e),t.preprocessUpdate(e,this.sid);var d=new s.default,f=!0,h=!1,p=void 0;try{for(var g,v=(0,i.default)((0,r.default)(e));!(f=(g=v.next()).done);f=!0){var m=g.value,y=j[m];if(y)switch(y){case j.status:if(!e.status||"unknown"===e.status||this.channelState.status===e.status)break;this.channelState.status=e.status,d.add(y);break;case j.attributes:if(R.isDeepEqual(this.channelState.attributes,e.attributes))break;this.channelState.attributes=e.attributes,d.add(y);break;case j.lastConsumedMessageIndex:if(void 0===e.lastConsumedMessageIndex||e.lastConsumedMessageIndex===this.channelState.lastConsumedMessageIndex)break;this.channelState.lastConsumedMessageIndex=e.lastConsumedMessageIndex,d.add(y);break;case j.lastMessage:if(this.channelState.lastMessage&&!e.lastMessage){delete this.channelState.lastMessage,d.add(y);break}this.channelState.lastMessage=this.channelState.lastMessage||{},void 0!==(null===(n=e.lastMessage)||void 0===n?void 0:n.index)&&e.lastMessage.index!==this.channelState.lastMessage.index&&(this.channelState.lastMessage.index=e.lastMessage.index,d.add(y)),void 0!==(null===(a=e.lastMessage)||void 0===a?void 0:a.timestamp)&&(null===(l=null===(u=this.channelState.lastMessage)||void 0===u?void 0:u.dateCreated)||void 0===l?void 0:l.getTime())!==e.lastMessage.timestamp.getTime()&&(this.channelState.lastMessage.dateCreated=e.lastMessage.timestamp,d.add(y)),R.isDeepEqual(this.channelState.lastMessage,{})&&delete this.channelState.lastMessage;break;case j.state:var b=e.state||void 0;if(void 0!==b&&(b.dateUpdated=new Date(b.dateUpdated)),R.isDeepEqual(this.channelState.state,b))break;this.channelState.state=b,d.add(y);break;default:var k=e[m]instanceof Date;if(k&&(null===(c=this.channelState[y])||void 0===c?void 0:c.getTime())===e[m].getTime()||!k&&this[y]===e[m])break;this.channelState[y]=e[m],d.add(y)}}}catch(_){h=!0,p=_}finally{try{!f&&v.return&&v.return()}finally{if(h)throw p}}d.size>0&&this.emit("updated",{channel:this,updateReasons:[].concat((0,o.default)(d))})}},{key:"_onMessageAdded",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,s=(0,i.default)(this.members.values());!(t=(o=s.next()).done);t=!0){var a=o.value;if(a.identity===e.author){a._endTyping();break}}}catch(u){n=!0,r=u}finally{try{!t&&s.return&&s.return()}finally{if(n)throw r}}this.emit("messageAdded",e)}},{key:"add",value:(H=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.membersEntity.add(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return H.apply(this,arguments)})},{key:"advanceLastConsumedMessageIndex",value:(J=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.abrupt("return",this.services.consumptionHorizon.advanceLastConsumedMessageIndexForChannel(this.sid,t,this.lastConsumedMessageIndex));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return J.apply(this,arguments)})},{key:"decline",value:(X=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("declineInvitation",{channelSid:this.sid});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)}))),function(){return X.apply(this,arguments)})},{key:"delete",value:(V=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("destroyChannel",{channelSid:this.sid});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)}))),function(){return V.apply(this,arguments)})},{key:"getAttributes",value:(W=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._subscribe();case 2:return e.abrupt("return",this.attributes);case 3:case"end":return e.stop()}}),e,this)}))),function(){return W.apply(this,arguments)})},{key:"getMessages",value:(G=(0,l.default)(a.default.mark((function e(t,n,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.abrupt("return",this.messagesEntity.getMessages(t,n,r));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return G.apply(this,arguments)})},{key:"getMembers",value:(B=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.abrupt("return",this.membersEntity.getMembers());case 3:case"end":return e.stop()}}),e,this)}))),function(){return B.apply(this,arguments)})},{key:"getMembersCount",value:(q=(0,l.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getSessionLinks();case 2:return t=new R.UriBuilder(e.sent.publicChannelsUrl).path(this.sid).build(),e.next=6,this.services.network.get(t);case 6:return e.abrupt("return",e.sent.body.members_count);case 8:case"end":return e.stop()}}),e,this)}))),function(){return q.apply(this,arguments)})},{key:"getMemberBySid",value:(z=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.membersEntity.getMemberBySid(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return z.apply(this,arguments)})},{key:"getMemberByIdentity",value:(F=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.membersEntity.getMemberByIdentity(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return F.apply(this,arguments)})},{key:"getMessagesCount",value:(L=(0,l.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getSessionLinks();case 2:return t=new R.UriBuilder(e.sent.publicChannelsUrl).path(this.sid).build(),e.next=6,this.services.network.get(t);case 6:return e.abrupt("return",e.sent.body.messages_count);case 8:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)})},{key:"getUnconsumedMessagesCount",value:(D=(0,l.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getSessionLinks();case 2:return t=new R.UriBuilder(e.sent.myChannelsUrl).arg("ChannelSid",this.sid).build(),e.next=6,this.services.network.get(t);case 6:if(!(n=e.sent).body.channels.length||n.body.channels[0].channel_sid!=this.sid){e.next=11;break}if(void 0===n.body.channels[0].unread_messages_count||null==n.body.channels[0].unread_messages_count){e.next=10;break}return e.abrupt("return",n.body.channels[0].unread_messages_count);case 10:return e.abrupt("return",null);case 11:throw new Error("Channel is not in user channels list");case 12:case"end":return e.stop()}}),e,this)}))),function(){return D.apply(this,arguments)})},{key:"invite",value:(U=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.membersEntity.invite(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return U.apply(this,arguments)})},{key:"join",value:(A=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("joinChannelV2",{channelSid:this.sid});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:"leave",value:(E=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("joined"!==this.channelState.status){e.next=3;break}return e.next=3,this.services.session.addCommand("leaveChannel",{channelSid:this.sid});case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"removeMember",value:(S=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof M.Member)){e.next=4;break}return e.next=3,this.membersEntity.removeBySid(t.sid);case 3:return e.abrupt("return");case 4:return e.next=6,this.membersEntity.removeByIdentity(t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"sendMessage",value:(O=(0,l.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t&&null!==t){e.next=5;break}return e.next=3,this.messagesEntity.send(t,n);case 3:return e.abrupt("return",R.parseToNumber(e.sent.messageId));case 5:return e.next=7,this.messagesEntity.sendMedia(t,n);case 7:return e.abrupt("return",R.parseToNumber(e.sent.messageId));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return O.apply(this,arguments)})},{key:"setAllMessagesConsumed",value:(x=(0,l.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.next=4,this.getMessages(1);case 4:if(!((t=e.sent).items.length>0)){e.next=7;break}return e.abrupt("return",this.advanceLastConsumedMessageIndex(t.items[0].index));case 7:return e.abrupt("return",u.default.resolve(0));case 8:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"setNoMessagesConsumed",value:(w=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.abrupt("return",this.services.consumptionHorizon.updateLastConsumedMessageIndexForChannel(this.sid,null));case 3:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"setUserNotificationLevel",value:(C=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("editNotificationLevel",{channelSid:this.sid,notificationLevel:t});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"typing",value:function(){return this.services.typingIndicator.send(this.sid)}},{key:"updateAttributes",value:(_=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("editAttributes",{channelSid:this.sid,attributes:(0,d.default)(t)});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"updateFriendlyName",value:(k=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.channelState.friendlyName===t){e.next=3;break}return e.next=3,this.services.session.addCommand("editFriendlyName",{channelSid:this.sid,friendlyName:t});case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"updateLastConsumedMessageIndex",value:(b=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._subscribeStreams();case 2:return e.abrupt("return",this.services.consumptionHorizon.updateLastConsumedMessageIndexForChannel(this.sid,t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"updateUniqueName",value:(y=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.channelState.uniqueName===t){e.next=4;break}return t||(t=""),e.next=4,this.services.session.addCommand("editUniqueName",{channelSid:this.sid,uniqueName:t});case 4:return e.abrupt("return",this);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"getUserDescriptors",value:(n=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.services.users.getChannelUserDescriptors(this.sid));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"status",get:function(){return this.channelState.status}},{key:"type",get:function(){return this.channelState.type}},{key:"uniqueName",get:function(){return this.channelState.uniqueName}},{key:"isPrivate",get:function(){return"private"===this.channelState.type}},{key:"friendlyName",get:function(){return this.channelState.friendlyName}},{key:"dateUpdated",get:function(){return this.channelState.dateUpdated}},{key:"dateCreated",get:function(){return this.channelState.dateCreated}},{key:"createdBy",get:function(){return this.channelState.createdBy}},{key:"attributes",get:function(){return this.channelState.attributes}},{key:"lastConsumedMessageIndex",get:function(){return this.channelState.lastConsumedMessageIndex}},{key:"lastMessage",get:function(){return this.channelState.lastMessage}},{key:"notificationLevel",get:function(){return this.channelState.notificationLevel}},{key:"state",get:function(){return this.channelState.state}}],[{key:"preprocessUpdate",value:function(e,t){try{"string"==typeof e.attributes?e.attributes=JSON.parse(e.attributes):e.attributes&&(0,d.default)(e.attributes)}catch(n){I.warn("Retrieved malformed attributes from the server for channel: "+t),e.attributes={}}try{e.dateCreated&&(e.dateCreated=new Date(e.dateCreated))}catch(n){I.warn("Retrieved malformed dateCreated from the server for channel: "+t),delete e.dateCreated}try{e.dateUpdated&&(e.dateUpdated=new Date(e.dateUpdated))}catch(n){I.warn("Retrieved malformed dateUpdated from the server for channel: "+t),delete e.dateUpdated}try{e.lastMessage&&e.lastMessage.timestamp&&(e.lastMessage.timestamp=new Date(e.lastMessage.timestamp))}catch(n){I.warn("Retrieved malformed lastMessage.timestamp from the server for channel: "+t),delete e.lastMessage.timestamp}}}]),t}(O.EventEmitter);w([E.asyncTypeCheck(E.nonEmptyString),x("design:type",Function),x("design:paramtypes",[String]),x("design:returntype",u.default)],A.prototype,"add",null),w([E.asyncTypeCheck(E.nonNegativeInteger),x("design:type",Function),x("design:paramtypes",[Number]),x("design:returntype",u.default)],A.prototype,"advanceLastConsumedMessageIndex",null),w([E.asyncTypeCheck(["undefined",E.nonNegativeInteger],["undefined",E.nonNegativeInteger],["undefined",E.literal("backwards","forward")]),x("design:type",Function),x("design:paramtypes",[Number,Number,String]),x("design:returntype",u.default)],A.prototype,"getMessages",null),w([E.asyncTypeCheck(E.nonEmptyString),x("design:type",Function),x("design:paramtypes",[String]),x("design:returntype",u.default)],A.prototype,"getMemberBySid",null),w([E.asyncTypeCheck(E.nonEmptyString),x("design:type",Function),x("design:paramtypes",[String]),x("design:returntype",u.default)],A.prototype,"getMemberByIdentity",null),w([E.asyncTypeCheck(E.nonEmptyString),x("design:type",Function),x("design:paramtypes",[String]),x("design:returntype",u.default)],A.prototype,"invite",null),w([E.asyncTypeCheck([E.nonEmptyString,M.Member]),x("design:type",Function),x("design:paramtypes",[Object]),x("design:returntype",u.default)],A.prototype,"removeMember",null),w([E.asyncTypeCheck(["string",E.literal(null),E.custom((function(e){return[e instanceof FormData,"an instance of FormData"]})),E.custom((function(e){if("object"!==(void 0===e?"undefined":(0,k.default)(e))||null===e||Array.isArray(e))return[!1,"valid media options (should be a pure object)"];if(!("string"==typeof e.contentType&&e.contentType.length>0))return[!1,"valid media options (mediaOptions.contentType should be a non-empty string)","malformed media options (mediaOptions.contentType is "+E.stringifyReceivedType(e.contentType)+")"];var t="string"==typeof e.media&&e.media.length>0||e.media instanceof Uint8Array||e.media instanceof ArrayBuffer;return"function"==typeof Blob&&(t=t||e.media instanceof Blob),t?[!0]:[!1,"valid media options (mediaOptions.media should be a non-empty string, an instance of Buffer or an instance of Blob)","malformed media options (mediaOptions.media is "+E.stringifyReceivedType(e.media)+")"]}))],["undefined","string","number","boolean","object",E.literal(null)]),x("design:type",Function),x("design:paramtypes",[Object,Object]),x("design:returntype",u.default)],A.prototype,"sendMessage",null),w([E.asyncTypeCheck(E.literal("default","muted")),x("design:type",Function),x("design:paramtypes",[String]),x("design:returntype",u.default)],A.prototype,"setUserNotificationLevel",null),w([E.asyncTypeCheck(["string","number","boolean","object",E.literal(null)]),x("design:type",Function),x("design:paramtypes",[Object]),x("design:returntype",u.default)],A.prototype,"updateAttributes",null),w([E.asyncTypeCheck(["string",E.literal(null)]),x("design:type",Function),x("design:paramtypes",[String]),x("design:returntype",u.default)],A.prototype,"updateFriendlyName",null),w([E.asyncTypeCheck([E.literal(null),E.nonNegativeInteger]),x("design:type",Function),x("design:paramtypes",[Number]),x("design:returntype",u.default)],A.prototype,"updateLastConsumedMessageIndex",null),w([E.asyncTypeCheck(["string",E.literal(null)]),x("design:type",Function),x("design:paramtypes",[String]),x("design:returntype",u.default)],A.prototype,"updateUniqueName",null),t.Channel=A},"3Lba":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connector=t.RegistrationState=void 0;var r=n("+qE3"),i=n("Q3x1"),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;_classCallCheck(this,e),this.token=t,this.notificationId=n,this.messageTypes=r}return _createClass(e,[{key:"clone",value:function(){return new e(this.token,this.notificationId,new Set(this.messageTypes))}}]),e}();t.RegistrationState=o,t.Connector=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).config=e,n.desiredState=new o,n.currentState=new o,n.hasActiveAttempt=!1,n}var n,r,s;return _inherits(t,e),_createClass(t,[{key:"subscribe",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.desiredState.messageTypes.has(t)){e.next=4;break}i.log.debug("message type already registered ",t),e.next=7;break;case 4:return this.desiredState.messageTypes.add(t),e.next=7,this.persistRegistration();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"unsubscribe",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.desiredState.messageTypes.has(t),!e.t0){e.next=5;break}return this.desiredState.messageTypes.delete(t),e.next=5,this.persistRegistration();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"updateToken",value:function(e){this.desiredState.token=e,this.persistRegistration()}},{key:"persistRegistration",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r,o,s,a,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.config.token&&0!==this.config.token.length){e.next=2;break}return e.abrupt("return",void i.log.trace("Can't persist registration: token is not set"));case 2:if(!this.hasActiveAttempt){e.next=4;break}return e.abrupt("return",void i.log.trace("One registration attempt is already in progress"));case 4:if(t=function(e,t){var n=new Set;return e.notificationId!==t.notificationId&&n.add("notificationId"),e.token!==t.token&&n.add("token"),function(e,t){return[].concat(_toConsumableArray(_toConsumableArray(e).filter((function(e){return!t.has(e)}))),_toConsumableArray(_toConsumableArray(t).filter((function(t){return!e.has(t)}))))}(e.messageTypes,t.messageTypes).length>0&&n.add("messageType"),[n.size>0,n]}(this.desiredState,this.currentState),n=_slicedToArray(t,2),r=n[0],o=n[1],!r){e.next=26;break}if(this.currentState.notificationId||o.delete("notificationId"),i.log.trace("Persisting registration",o,this.desiredState),e.prev=7,this.hasActiveAttempt=!0,!((s=this.desiredState.clone()).messageTypes.size>0)){e.next=17;break}return e.next=13,this.updateRegistration(s,o);case 13:a=e.sent,this.currentState.token=a.token,this.currentState.notificationId=a.notificationId,this.currentState.messageTypes=a.messageTypes,this.emit("stateChanged","registered"),e.next=23;break;case 17:return e.next=19,this.removeRegistration();case 19:this.currentState.token=s.token,this.currentState.notificationId=s.notificationId,this.currentState.messageTypes.clear(),this.emit("stateChanged","unregistered");case 23:return e.prev=23,this.hasActiveAttempt=!1,setTimeout((function(){return u.persistRegistration()}),0),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[7,,23,26]])}))),function(){return n.apply(this,arguments)})},{key:"setNotificationId",value:function(e){this.desiredState.notificationId=e,this.persistRegistration()}}]),t}(r.EventEmitter)},"3P3t":function(e,t,n){var r=n("USwo");r(r.P+r.R,"Map",{toJSON:n("KtlF")("Map")})},"3Y8D":function(e,t,n){"use strict";var r=n("WKX2");e.exports=r},"3dc8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("vSOj"),i=n("f9CJ"),o=n("qzTf"),s=i.Logger.scope("Network");t.Network=function(){function e(t,n){_classCallCheck(this,e),this.config=t,this.transport=n}var t,n;return _createClass(e,[{key:"backoffConfig",value:function(){return Object.assign(o.Configuration.backoffConfigDefault,this.config.backoffConfigOverride)}},{key:"retryWhenThrottled",value:function(){return void 0!==this.config.retryWhenThrottledOverride?this.config.retryWhenThrottledOverride:void 0!==o.Configuration.retryWhenThrottledDefault&&o.Configuration.retryWhenThrottledDefault}},{key:"executeWithRetry",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(i,o){var s=[502,503,504];n&&s.push(429);var a=new r.Retrier(t.backoffConfig());a.on("attempt",(function(){e().then((function(e){return a.succeeded(e)})).catch((function(e){s.indexOf(e.status)>-1?a.failed(e):"Twilsock disconnected"===e.message?a.failed(e):(a.removeAllListeners(),a.cancel(),o(e))}))})),a.on("succeeded",(function(e){i(e)})),a.on("cancelled",(function(e){return o(e)})),a.on("failed",(function(e){return o(e)})),a.start()}))}},{key:"get",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={"X-Twilio-Token":this.config.token},s.trace("sending GET request to ",t," headers ",n),e.next=4,this.executeWithRetry((function(){return i.transport.get(t,n)}),this.retryWhenThrottled());case 4:return r=e.sent,e.abrupt("return",(s.trace("response",r),r));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"post",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={"X-Twilio-Token":this.config.token},"undefined"!=typeof FormData&&n instanceof FormData||!r||Object.assign(o,{"Content-Type":r}),s.trace("sending POST request to ",t," headers ",o),e.prev=2,e.next=5,this.transport.post(t,o,n);case 5:i=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),e.t0 instanceof TypeError?(s.trace("got error in post response",e.t0),new TypeError("Posting FormData supported only with browser engine's FormData")):e.t0;case 11:return e.abrupt("return",(s.trace("response",i),i));case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e,n,r){return t.apply(this,arguments)})}]),e}()},"3m9+":function(e,t,n){"use strict";var r,i=(r=n("iCc5"))&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0}),t.SyncListDescriptor=void 0,t.SyncListDescriptor=function e(t){(0,i.default)(this,e),this.descriptor=t,this.channel_sid=t.channel_sid,this.status=t.status,this.channel=t.channel,this.messages=t.messages,this.roster=t.roster,this.lastConsumedMessageIndex=t.last_consumed_message_index,this.notificationLevel=t.notification_level,this.status=t.status}},"40XN":function(e,t,n){"use strict";var r=n("8Y7J"),i=n("SVse"),o=n("y3B+"),s=n("pMoy"),a=n("YEUz"),u=n("omvX"),l=n("s7LF"),c=n("3HBE"),d=n("zQhy"),f=n("CtHx"),h=n("H3DK"),p=n("Q2Ze"),g=n("UhP/"),v=n("9gLZ"),m=n("SCoL"),y=n("e6WT"),b=n("8sFK"),k=n("kMt3"),_=n("iELJ"),C=n("6fQM"),w=n("xv9W"),x=n("zHaW");n.d(t,"a",(function(){return N}));var O=r.xb({encapsulation:0,styles:[["section[_ngcontent-%COMP%]{padding:24px 0 0 24px;height:800px}section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-weight:700;color:#3c3c3c}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:calc(100% - 22px)}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .finder-container[_ngcontent-%COMP%]{width:244px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .finder-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{padding-right:24px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .finder-container[_ngcontent-%COMP%]   .found-elements-container[_ngcontent-%COMP%]{margin-top:20px;padding-right:24px;height:calc(100% - 100px);overflow:auto}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .finder-container[_ngcontent-%COMP%]   .found-elements-container[_ngcontent-%COMP%]   .found-element[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;border-bottom:1px solid #f2f2f2;padding-left:24px;height:40px;font-size:14px;line-height:1;color:#3c3c3c;cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .finder-container[_ngcontent-%COMP%]   .found-elements-container[_ngcontent-%COMP%]   .found-element.selected[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .finder-container[_ngcontent-%COMP%]   .found-elements-container[_ngcontent-%COMP%]   .found-element[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]{border-radius:8px 0 0 8px;width:calc(100% - 244px);box-shadow:0 0 8px 0 rgba(0,0,0,.04)}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .dishes[_ngcontent-%COMP%]{border-top:1px solid #f2f2f2;border-bottom:1px solid #f2f2f2;height:420px;overflow:auto}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .dishes[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]{padding:16px 24px 24px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .dishes[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #f2f2f2}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .dishes[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .dishes[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:13px;font-weight:700;line-height:1;color:#3c3c3c}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .dishes[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .is-required[_ngcontent-%COMP%]{font-size:12px;font-weight:200;color:#f2a412}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .dishes[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .choose-amount[_ngcontent-%COMP%]{line-height:1;font-size:12px;color:#a8a8a8}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .dishes[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]{margin-top:12px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .dishes[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .dishes[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .options-container[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:12px;color:#a8a8a8}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .dishes[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:10px;color:#f44336}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .extra-info[_ngcontent-%COMP%]{padding:16px 24px 0}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .extra-info[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]{width:100%}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .extra-info[_ngcontent-%COMP%]   .comments[_ngcontent-%COMP%]   text-area[_ngcontent-%COMP%]{height:100px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .extra-info[_ngcontent-%COMP%]   .amount-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:start;align-items:flex-start;margin-top:20px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .extra-info[_ngcontent-%COMP%]   .amount-container[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{padding-top:4px;line-height:1;font-size:14px;color:#3c3c3c}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .extra-info[_ngcontent-%COMP%]   .amount-container[_ngcontent-%COMP%]   .amount-selector[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:start;align-items:flex-start;margin-left:48px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .extra-info[_ngcontent-%COMP%]   .amount-container[_ngcontent-%COMP%]   .amount-selector[_ngcontent-%COMP%]   .operator[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;width:20px;height:20px;line-height:1;font-size:20px;color:#f2a412;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .extra-info[_ngcontent-%COMP%]   .amount-container[_ngcontent-%COMP%]   .amount-selector[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;margin:0 5px;border-bottom:1px solid #f2f2f2;padding-bottom:16px;width:42px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .extra-info[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;-webkit-box-align:center;align-items:center;margin-top:40px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .extra-info[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .dishes-selection-container[_ngcontent-%COMP%]   .extra-info[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{margin-left:24px}"]],data:{}});function S(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,3,"div",[["class","found-element"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.getDishDetails(e.context.$implicit.id)&&r),r}),null,null)),r.yb(1,278528,null,0,i.k,[r.t,r.u,r.l,r.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Qb(2,{selected:0}),(e()(),r.Xb(3,null,[" "," "]))],(function(e,t){var n=e(t,2,0,t.context.$implicit.id===t.component.selectedDishId);e(t,1,0,"found-element",n)}),(function(e,t){e(t,3,0,t.context.$implicit.name)}))}function P(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,10,"div",[["class","option"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,o.b,o.a)),r.yb(2,12763136,null,0,s.c,[r.l,r.h,a.g,r.A,[8,null],[2,s.a],[2,u.a],[2,s.b]],{value:[0,"value"]},null),r.Sb(1024,null,l.q,(function(e){return[e]}),[s.c]),r.yb(4,671744,null,0,l.j,[[3,l.c],[8,null],[8,null],[6,l.q],[2,l.A]],{name:[0,"name"]},null),r.Sb(2048,null,l.r,null,[l.j]),r.yb(6,16384,null,0,l.s,[[4,l.r]],null,null),(e()(),r.Xb(7,0,[" "," "])),(e()(),r.zb(8,0,null,null,2,"p",[["class","price"]],null,null,null,null,null)),(e()(),r.Xb(9,null,[" +$"," "])),r.Rb(10,2)],(function(e,t){e(t,2,0,t.context.$implicit.id),e(t,4,0,"check-"+t.context.$implicit.id)}),(function(e,t){e(t,1,1,[r.Ob(t,2).id,null,r.Ob(t,2).indeterminate,r.Ob(t,2).checked,r.Ob(t,2).disabled,"before"==r.Ob(t,2).labelPosition,"NoopAnimations"===r.Ob(t,2)._animationMode,r.Ob(t,6).ngClassUntouched,r.Ob(t,6).ngClassTouched,r.Ob(t,6).ngClassPristine,r.Ob(t,6).ngClassDirty,r.Ob(t,6).ngClassValid,r.Ob(t,6).ngClassInvalid,r.Ob(t,6).ngClassPending]),e(t,7,0,t.context.$implicit.name);var n=r.Yb(t,9,0,e(t,10,0,r.Ob(t.parent.parent.parent,0),t.context.$implicit.price_in_cents/100,"1.2"));e(t,9,0,n)}))}function M(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,P)),r.yb(2,278528,null,0,i.l,[r.R,r.N,r.t],{ngForOf:[0,"ngForOf"]},null),(e()(),r.jb(0,null,null,0))],(function(e,t){e(t,2,0,t.parent.context.$implicit.modifiers)}),null)}function T(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,6,"div",[["class","option"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,2,"mat-radio-button",[["class","mat-radio-button"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==r.Ob(e,2)._inputElement.nativeElement.focus()&&i),i}),c.b,c.a)),r.yb(2,4440064,[[10,4]],0,d.b,[[2,d.c],r.l,r.h,a.g,f.d,[2,u.a],[2,d.a]],{value:[0,"value"]},null),(e()(),r.Xb(3,0,["",""])),(e()(),r.zb(4,0,null,null,2,"p",[["class","price"]],null,null,null,null,null)),(e()(),r.Xb(5,null,[" +$"," "])),r.Rb(6,2)],(function(e,t){e(t,2,0,t.context.$implicit.id)}),(function(e,t){e(t,1,1,[r.Ob(t,2).checked,r.Ob(t,2).disabled,"NoopAnimations"===r.Ob(t,2)._animationMode,"primary"===r.Ob(t,2).color,"accent"===r.Ob(t,2).color,"warn"===r.Ob(t,2).color,-1,r.Ob(t,2).id,null,null,null]),e(t,3,0,t.context.$implicit.name);var n=r.Yb(t,5,0,e(t,6,0,r.Ob(t.parent.parent.parent,0),t.context.$implicit.price_in_cents/100,"1.2"));e(t,5,0,n)}))}function R(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,9,null,null,null,null,null,null,null)),(e()(),r.zb(1,0,null,null,8,"mat-radio-group",[["class","mat-radio-group"],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),r.yb(2,1064960,null,1,d.c,[r.h],null,null),r.Tb(603979776,10,{_radios:1}),r.Sb(1024,null,l.q,(function(e){return[e]}),[d.c]),r.yb(5,671744,null,0,l.j,[[3,l.c],[8,null],[8,null],[6,l.q],[2,l.A]],{name:[0,"name"]},null),r.Sb(2048,null,l.r,null,[l.j]),r.yb(7,16384,null,0,l.s,[[4,l.r]],null,null),(e()(),r.jb(16777216,null,null,1,null,T)),r.yb(9,278528,null,0,i.l,[r.R,r.N,r.t],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,5,0,"radio-"+t.parent.context.$implicit.id),e(t,9,0,t.parent.context.$implicit.modifiers)}),(function(e,t){e(t,1,0,r.Ob(t,7).ngClassUntouched,r.Ob(t,7).ngClassTouched,r.Ob(t,7).ngClassPristine,r.Ob(t,7).ngClassDirty,r.Ob(t,7).ngClassValid,r.Ob(t,7).ngClassInvalid,r.Ob(t,7).ngClassPending)}))}function E(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"p",[["class","error-message"]],null,null,null,null,null)),(e()(),r.Xb(-1,null,[" No se han elegido correctamente las opciones "]))],null,null)}function I(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,14,"div",[["class","dish"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,4,"div",[["class","header"]],null,null,null,null,null)),(e()(),r.zb(2,0,null,null,1,"p",[["class","name"]],null,null,null,null,null)),(e()(),r.Xb(3,null,["",""])),(e()(),r.zb(4,0,null,null,1,"p",[["class","is-required"]],null,null,null,null,null)),(e()(),r.Xb(5,null,[" "," "])),(e()(),r.zb(6,0,null,null,1,"p",[["class","choose-amount"]],null,null,null,null,null)),(e()(),r.Xb(7,null,[" (Elige ",") "])),(e()(),r.zb(8,0,null,null,4,"div",[["class","options-container"]],null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,M)),r.yb(10,16384,null,0,i.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,R)),r.yb(12,16384,null,0,i.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,E)),r.yb(14,16384,null,0,i.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,10,0,t.context.$implicit.multiple_option),e(t,12,0,!t.context.$implicit.multiple_option),e(t,14,0,n.submitted&&!n.isGroupCorrect(t.context.$implicit))}),(function(e,t){e(t,3,0,t.context.$implicit.name),e(t,5,0,t.context.$implicit.optional_ask?"Opcional":"Obligatorio"),e(t,7,0,t.context.$implicit.min_options_per_user===t.context.$implicit.max_options_per_user?t.context.$implicit.min_options_per_user:"entre "+t.context.$implicit.min_options_per_user+" y "+t.context.$implicit.max_options_per_user)}))}function j(e){return r.ac(0,[r.Pb(0,i.f,[r.v]),(e()(),r.zb(1,0,null,null,80,"section",[],null,null,null,null,null)),(e()(),r.zb(2,0,null,null,1,"p",[["class","section-title"]],null,null,null,null,null)),(e()(),r.Xb(-1,null,["AGREGAR PLATILLO"])),(e()(),r.zb(4,0,null,null,77,"form",[["class","content"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(e,t,n){var i=!0,o=e.component;return"submit"===t&&(i=!1!==r.Ob(e,6).onSubmit(n)&&i),"reset"===t&&(i=!1!==r.Ob(e,6).onReset()&&i),"ngSubmit"===t&&(i=!1!==o.submit()&&i),i}),null,null)),r.yb(5,16384,null,0,l.B,[],null,null),r.yb(6,540672,null,0,l.l,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Sb(2048,null,l.c,null,[l.l]),r.yb(8,16384,null,0,l.t,[[4,l.c]],null,null),(e()(),r.zb(9,0,null,null,25,"div",[["class","finder-container"]],null,null,null,null,null)),(e()(),r.zb(10,0,null,null,21,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,h.b,h.a)),r.yb(11,7520256,null,9,p.c,[r.l,r.h,[2,g.f],[2,v.b],[2,p.a],m.a,r.A,[2,u.a]],null,null),r.Tb(603979776,1,{_controlNonStatic:0}),r.Tb(335544320,2,{_controlStatic:0}),r.Tb(603979776,3,{_labelChildNonStatic:0}),r.Tb(335544320,4,{_labelChildStatic:0}),r.Tb(603979776,5,{_placeholderChild:0}),r.Tb(603979776,6,{_errorChildren:1}),r.Tb(603979776,7,{_hintChildren:1}),r.Tb(603979776,8,{_prefixChildren:1}),r.Tb(603979776,9,{_suffixChildren:1}),(e()(),r.zb(21,0,null,3,2,"mat-label",[],null,null,null,null,null)),r.yb(22,16384,[[3,4],[4,4]],0,p.f,[],null,null),(e()(),r.Xb(-1,null,["Buscar platillo..."])),(e()(),r.zb(24,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","search"],["matInput",""]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==r.Ob(e,25)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==r.Ob(e,25).onTouched()&&i),"compositionstart"===t&&(i=!1!==r.Ob(e,25)._compositionStart()&&i),"compositionend"===t&&(i=!1!==r.Ob(e,25)._compositionEnd(n.target.value)&&i),"blur"===t&&(i=!1!==r.Ob(e,29)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==r.Ob(e,29)._focusChanged(!0)&&i),"input"===t&&(i=!1!==r.Ob(e,29)._onInput()&&i),i}),null,null)),r.yb(25,16384,null,0,l.d,[r.F,r.l,[2,l.a]],null,null),r.Sb(1024,null,l.q,(function(e){return[e]}),[l.d]),r.yb(27,671744,null,0,l.j,[[3,l.c],[8,null],[8,null],[6,l.q],[2,l.A]],{name:[0,"name"]},null),r.Sb(2048,null,l.r,null,[l.j]),r.yb(29,999424,null,0,y.b,[r.l,m.a,[6,l.r],[2,l.u],[2,l.l],g.b,[8,null],b.a,r.A],null,null),r.yb(30,16384,null,0,l.s,[[4,l.r]],null,null),r.Sb(2048,[[1,4],[2,4]],p.d,null,[y.b]),(e()(),r.zb(32,0,null,null,2,"div",[["class","found-elements-container"]],null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,S)),r.yb(34,278528,null,0,i.l,[r.R,r.N,r.t],{ngForOf:[0,"ngForOf"]},null),(e()(),r.zb(35,0,null,null,46,"div",[["class","dishes-selection-container"]],null,null,null,null,null)),(e()(),r.zb(36,0,null,null,2,"div",[["class","dishes"]],null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,I)),r.yb(38,278528,null,0,i.l,[r.R,r.N,r.t],{ngForOf:[0,"ngForOf"]},null),(e()(),r.zb(39,0,null,null,42,"div",[["class","extra-info"]],null,null,null,null,null)),(e()(),r.zb(40,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Comentarios"])),(e()(),r.zb(42,0,null,null,23,"mat-form-field",[["class","comments mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,h.b,h.a)),r.yb(43,7520256,null,9,p.c,[r.l,r.h,[2,g.f],[2,v.b],[2,p.a],m.a,r.A,[2,u.a]],null,null),r.Tb(603979776,11,{_controlNonStatic:0}),r.Tb(335544320,12,{_controlStatic:0}),r.Tb(603979776,13,{_labelChildNonStatic:0}),r.Tb(335544320,14,{_labelChildStatic:0}),r.Tb(603979776,15,{_placeholderChild:0}),r.Tb(603979776,16,{_errorChildren:1}),r.Tb(603979776,17,{_hintChildren:1}),r.Tb(603979776,18,{_prefixChildren:1}),r.Tb(603979776,19,{_suffixChildren:1}),(e()(),r.zb(53,0,null,3,2,"mat-label",[],null,null,null,null,null)),r.yb(54,16384,[[13,4],[14,4]],0,p.f,[],null,null),(e()(),r.Xb(-1,null,["\xbfAlguna petici\xf3n especial?"])),(e()(),r.zb(56,0,null,1,9,"textarea",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","comments"],["matInput",""],["maxlength","500"]],[[1,"maxlength",0],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==r.Ob(e,59)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==r.Ob(e,59).onTouched()&&i),"compositionstart"===t&&(i=!1!==r.Ob(e,59)._compositionStart()&&i),"compositionend"===t&&(i=!1!==r.Ob(e,59)._compositionEnd(n.target.value)&&i),"blur"===t&&(i=!1!==r.Ob(e,63)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==r.Ob(e,63)._focusChanged(!0)&&i),"input"===t&&(i=!1!==r.Ob(e,63)._onInput()&&i),i}),null,null)),r.yb(57,540672,null,0,l.o,[],{maxlength:[0,"maxlength"]},null),r.Sb(1024,null,l.p,(function(e){return[e]}),[l.o]),r.yb(59,16384,null,0,l.d,[r.F,r.l,[2,l.a]],null,null),r.Sb(1024,null,l.q,(function(e){return[e]}),[l.d]),r.yb(61,671744,null,0,l.j,[[3,l.c],[6,l.p],[8,null],[6,l.q],[2,l.A]],{name:[0,"name"]},null),r.Sb(2048,null,l.r,null,[l.j]),r.yb(63,999424,null,0,y.b,[r.l,m.a,[6,l.r],[2,l.u],[2,l.l],g.b,[8,null],b.a,r.A],null,null),r.yb(64,16384,null,0,l.s,[[4,l.r]],null,null),r.Sb(2048,[[11,4],[12,4]],p.d,null,[y.b]),(e()(),r.zb(66,0,null,null,9,"div",[["class","amount-container"]],null,null,null,null,null)),(e()(),r.zb(67,0,null,null,1,"p",[["class","quantity"]],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Cantidad"])),(e()(),r.zb(69,0,null,null,6,"div",[["class","amount-selector"]],null,null,null,null,null)),(e()(),r.zb(70,0,null,null,1,"p",[["class","operator"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.changeAmountByOne("subtract")&&r),r}),null,null)),(e()(),r.Xb(-1,null,["-"])),(e()(),r.zb(72,0,null,null,1,"p",[["class","amount"]],null,null,null,null,null)),(e()(),r.Xb(73,null,["",""])),(e()(),r.zb(74,0,null,null,1,"p",[["class","operator"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.changeAmountByOne("add")&&r),r}),null,null)),(e()(),r.Xb(-1,null,["+"])),(e()(),r.zb(76,0,null,null,5,"div",[["class","controls"]],null,null,null,null,null)),(e()(),r.zb(77,0,null,null,1,"p",[],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.closeDialog(!1)&&r),r}),null,null)),(e()(),r.Xb(-1,null,["Cancelar"])),(e()(),r.zb(79,0,null,null,2,"button",[["class","btns"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.submit()&&r),r}),null,null)),(e()(),r.zb(80,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Aceptar"]))],(function(e,t){var n=t.component;e(t,6,0,n.form),e(t,27,0,"search"),e(t,29,0),e(t,34,0,n.dishes),e(t,38,0,n.groupModifiers),e(t,57,0,"500"),e(t,61,0,"comments"),e(t,63,0)}),(function(e,t){var n=t.component;e(t,4,0,r.Ob(t,8).ngClassUntouched,r.Ob(t,8).ngClassTouched,r.Ob(t,8).ngClassPristine,r.Ob(t,8).ngClassDirty,r.Ob(t,8).ngClassValid,r.Ob(t,8).ngClassInvalid,r.Ob(t,8).ngClassPending),e(t,10,1,["standard"==r.Ob(t,11).appearance,"fill"==r.Ob(t,11).appearance,"outline"==r.Ob(t,11).appearance,"legacy"==r.Ob(t,11).appearance,r.Ob(t,11)._control.errorState,r.Ob(t,11)._canLabelFloat,r.Ob(t,11)._shouldLabelFloat(),r.Ob(t,11)._hasFloatingLabel(),r.Ob(t,11)._hideControlPlaceholder(),r.Ob(t,11)._control.disabled,r.Ob(t,11)._control.autofilled,r.Ob(t,11)._control.focused,"accent"==r.Ob(t,11).color,"warn"==r.Ob(t,11).color,r.Ob(t,11)._shouldForward("untouched"),r.Ob(t,11)._shouldForward("touched"),r.Ob(t,11)._shouldForward("pristine"),r.Ob(t,11)._shouldForward("dirty"),r.Ob(t,11)._shouldForward("valid"),r.Ob(t,11)._shouldForward("invalid"),r.Ob(t,11)._shouldForward("pending"),!r.Ob(t,11)._animationsEnabled]),e(t,24,1,[r.Ob(t,29)._isServer,r.Ob(t,29).id,r.Ob(t,29).placeholder,r.Ob(t,29).disabled,r.Ob(t,29).required,r.Ob(t,29).readonly&&!r.Ob(t,29)._isNativeSelect||null,r.Ob(t,29)._ariaDescribedby||null,r.Ob(t,29).errorState,r.Ob(t,29).required.toString(),r.Ob(t,30).ngClassUntouched,r.Ob(t,30).ngClassTouched,r.Ob(t,30).ngClassPristine,r.Ob(t,30).ngClassDirty,r.Ob(t,30).ngClassValid,r.Ob(t,30).ngClassInvalid,r.Ob(t,30).ngClassPending]),e(t,42,1,["standard"==r.Ob(t,43).appearance,"fill"==r.Ob(t,43).appearance,"outline"==r.Ob(t,43).appearance,"legacy"==r.Ob(t,43).appearance,r.Ob(t,43)._control.errorState,r.Ob(t,43)._canLabelFloat,r.Ob(t,43)._shouldLabelFloat(),r.Ob(t,43)._hasFloatingLabel(),r.Ob(t,43)._hideControlPlaceholder(),r.Ob(t,43)._control.disabled,r.Ob(t,43)._control.autofilled,r.Ob(t,43)._control.focused,"accent"==r.Ob(t,43).color,"warn"==r.Ob(t,43).color,r.Ob(t,43)._shouldForward("untouched"),r.Ob(t,43)._shouldForward("touched"),r.Ob(t,43)._shouldForward("pristine"),r.Ob(t,43)._shouldForward("dirty"),r.Ob(t,43)._shouldForward("valid"),r.Ob(t,43)._shouldForward("invalid"),r.Ob(t,43)._shouldForward("pending"),!r.Ob(t,43)._animationsEnabled]),e(t,56,1,[r.Ob(t,57).maxlength?r.Ob(t,57).maxlength:null,r.Ob(t,63)._isServer,r.Ob(t,63).id,r.Ob(t,63).placeholder,r.Ob(t,63).disabled,r.Ob(t,63).required,r.Ob(t,63).readonly&&!r.Ob(t,63)._isNativeSelect||null,r.Ob(t,63)._ariaDescribedby||null,r.Ob(t,63).errorState,r.Ob(t,63).required.toString(),r.Ob(t,64).ngClassUntouched,r.Ob(t,64).ngClassTouched,r.Ob(t,64).ngClassPristine,r.Ob(t,64).ngClassDirty,r.Ob(t,64).ngClassValid,r.Ob(t,64).ngClassInvalid,r.Ob(t,64).ngClassPending]),e(t,73,0,n.form.get("amount").value),e(t,79,0,!n.selectedDishId)}))}var N=r.vb("app-add-dish-to-order",k.a,(function(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"app-add-dish-to-order",[],null,null,null,j,O)),r.yb(1,114688,null,0,k.a,[_.a,_.j,C.a,w.a,l.g,x.b],null,null)],(function(e,t){e(t,1,0)}),null)}),{},{},[])},"40oJ":function(e,t,n){var r=n("ixoo")("meta"),i=n("ekG2"),o=n("nA4W"),s=n("GhSp").f,a=0,u=Object.isExtensible||function(){return!0},l=!n("S4vA")((function(){return u(Object.preventExtensions({}))})),c=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function(e){return l&&d.NEED&&u(e)&&!o(e,r)&&c(e),e}}},"43rs":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("f9CJ"),i=n("qzTf"),o=n("OnFN");t.Media=o.Media,t.McsMedia=o.Media;var s=n("V86R"),a=n("3dc8"),u=r.Logger.scope(""),l=n("ZdHh").version,c="A valid Twilio token should be provided",d=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(_classCallCheck(this,e),this.options=r,this.options.logLevel=this.options.logLevel||"silent",this.config=new i.Configuration(t,n,this.options),!t)throw new Error(c);u.setLevel(this.options.logLevel),this.options.transport=this.options.transport||new s.Transport,this.transport=this.options.transport,this.network=new a.Network(this.config,this.transport)}var t,n,r;return _createClass(e,[{key:"updateToken",value:function(e){if(u.info("updateToken"),!e)throw new Error(c);this.config.updateToken(e)}},{key:"get",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.network.get("".concat(this.config.baseUrl,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",new o.Media(this.config,this.network,n.body));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"post",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.network.post(this.config.baseUrl,n,t);case 2:return r=e.sent,e.abrupt("return",new o.Media(this.config,this.network,r.body));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"postFormData",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.network.post(this.config.baseUrl,t);case 2:return n=e.sent,e.abrupt("return",new o.Media(this.config,this.network,n.body));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();t.Client=d,t.McsClient=d,d.version=l,t.default=d},"4Zg2":function(e,t,n){var r=n("7whZ"),i=n("VSTI"),o=n("5ETA"),s=n("/NTb"),a=n("GhSp").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},"4d7F":function(e,t,n){e.exports={default:n("Ir+t"),__esModule:!0}},"4dLj":function(e,t,n){"use strict";var r=o(n("iCc5")),i=o(n("V7oC"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserDescriptor=void 0;var s=n("yC9A"),a=n("iqZd"),u=s.Logger.scope("UserDescriptor"),l=function(){function e(t,n){(0,r.default)(this,e),this.services=t,this.descriptor=n,this.identity=n.identity,this.friendlyName=n.friendly_name,this.attributes=a.parseAttributes(n.attributes,"Failed to parse user attributes",u),this.online=n.is_online,this.notifiable=n.is_notifiable}return(0,i.default)(e,[{key:"subscribe",value:function(){return this.services.users.getUser(this.identity,this.descriptor.sync_unique_name)}},{key:"_getDescriptor",value:function(){return this.descriptor}}]),e}();t.UserDescriptor=l},"4fRq":function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},"4xVT":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeMap=void 0;var r=function(){function e(t,n){_classCallCheck(this,e),this.balanceFactor=0,this.key=t,this.value=n,this.parent=null,this.left=null,this.right=null}return _createClass(e,[{key:"update",value:function(e){this.value=e}},{key:"replace",value:function(e,t){e&&(this.left===t?this.left=t:this.right===t&&(this.right=t))}},{key:"isRoot",get:function(){return null===this.parent}},{key:"isLeaf",get:function(){return null===this.left&&null===this.right}},{key:"isLeftChild",get:function(){return this.parent.left===this}}]),e}();t.TreeMap=function(){function e(t,n){_classCallCheck(this,e),this.isLessThan=t||function(e,t){return e<t},this.isEqual=n||function(e,t){return e===t},this.root=null,this.count=null}return _createClass(e,[{key:"clear",value:function(){this.root=null,this.count=0}},{key:"set",value:function(e,t){var n=this.getNode(e);n?n.update(t):this.insert(e,t)}},{key:"insert",value:function(e,t){var n=new r(e,t);if(this.count++,this.root){for(var i=this.root;;)if(this.isLessThan(e,i.key)){if(!i.left){i.left=n;break}i=i.left}else{if(!i.right){i.right=n;break}i=i.right}for(n.parent=i,i=n;i.parent;){var o=i.parent,s=o.balanceFactor;if(i.isLeftChild?o.balanceFactor++:o.balanceFactor--,Math.abs(o.balanceFactor)<Math.abs(s))break;if(o.balanceFactor<-1||o.balanceFactor>1){this.rebalance(o);break}i=o}}else this.root=n}},{key:"get",value:function(e){for(var t=this.root;t;){if(this.isEqual(e,t.key))return t.value;t=this.isLessThan(e,t.key)?t.left:t.right}return null}},{key:"delete",value:function(e){var t=this.getNode(e);if(!t||t.key!==e)return null;var n=t.parent,r=t.left,i=t.right;if(!!r!=!!i){var o=r||i;n||o?n&&!o?this.root=o:(n.replace(t,null),this.rebalance(n)):this.root=null}else{for(var s=t.left;s.right;)s=s.right;if(t.left===s)t.isRoot?(this.root=s,s.parent=null):(t.isLeftChild?t.parent.left=s:t.parent.right=s,s.parent=t.parent),s.right=t.right,s.right.parent=s,s.balanceFactor=t.balanceFactor,t={parent:s,isLeftChild:!0};else{var a=s.parent,u=s.left;a.right=u,u&&(u.parent=a),t.isRoot?(this.root=s,s.parent=null):(t.isLeftChild?t.parent.left=s:t.parent.right=s,s.parent=t.parent),s.right=t.right,s.right.parent=s,s.left=t.left,s.left.parent=s,s.balanceFactor=t.balanceFactor,t={parent:a,isLeftChild:!1}}}for(this.count--;t.parent;){var l=t.parent,c=l.balanceFactor;if(t.isLeftChild?l.balanceFactor-=1:l.balanceFactor+=1,Math.abs(l.balanceFactor)>Math.abs(c)){if(!(l.balanceFactor<-1||l.balanceFactor>1))break;if(this.rebalance(l),0!==l.parent.balanceFactor)break;t=l.parent}else t=l}return null}},{key:"getNode",value:function(e){for(var t=this.root;t;){if(this.isEqual(e,t.key))return t;t=this.isLessThan(e,t.key)?t.left:t.right}return null}},{key:"rebalance",value:function(e){e.balanceFactor<0?e.right.balanceFactor>0?(this.rotateRight(e.right),this.rotateLeft(e)):this.rotateLeft(e):e.balanceFactor>0&&(e.left.balanceFactor<0?(this.rotateLeft(e.left),this.rotateRight(e)):this.rotateRight(e))}},{key:"rotateLeft",value:function(e){var t=e.right;e.right=t.left,null!==t.left&&(t.left.parent=e),t.parent=e.parent,null===t.parent?this.root=t:e.isLeftChild?t.parent.left=t:t.parent.right=t,t.left=e,e.parent=t,e.balanceFactor=e.balanceFactor+1-Math.min(t.balanceFactor,0),t.balanceFactor=t.balanceFactor+1-Math.max(e.balanceFactor,0)}},{key:"rotateRight",value:function(e){var t=e.left;e.left=t.right,null!==t.right&&(t.right.parent=e),t.parent=e.parent,null===t.parent?this.root=t:e.isLeftChild?t.parent.left=t:t.parent.right=t,t.right=e,e.parent=t,e.balanceFactor=e.balanceFactor-1-Math.min(t.balanceFactor,0),t.balanceFactor=t.balanceFactor-1-Math.max(e.balanceFactor,0)}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function e(){var t,n,r,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,r=void 0,e.prev=3,i=this.getIterator()[Symbol.iterator]();case 5:if(t=(o=i.next()).done){e.next=12;break}return s=o.value,e.next=9,s;case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),n=!0,r=e.t0;case 18:e.prev=18,e.prev=19,t||null==i.return||i.return();case 21:if(e.prev=21,!n){e.next=24;break}throw r;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,this,[[3,14,18,26],[19,,21,25]])}))},{key:"getIterator",value:regeneratorRuntime.mark((function e(){var t,n,r,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length>0&&void 0!==i[0]?i[0]:null,n=this.root;n&&!this.isEqual(t,n.key)&&(null!==t||n.left);)n=this.isLessThan(t,n.key)||null===t?n.left:n.right;if(n){e.next=5;break}return e.abrupt("return",null);case 5:r=!0;case 6:if(!r){e.next=20;break}return e.next=9,[n.key,n.value];case 9:if(r=!1,!n.right){e.next=15;break}for(n=n.right;n.left;)n=n.left;r=!0,e.next=18;break;case 15:if(n.parent){e.next=17;break}return e.abrupt("break",25);case 17:r=n.parent.left===n,n=n.parent;case 18:e.next=23;break;case 20:if(n.parent){e.next=22;break}return e.abrupt("break",25);case 22:r=n.parent.left===n,n=n.parent;case 23:e.next=6;break;case 25:return e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,this)}))},{key:"getReverseIterator",value:regeneratorRuntime.mark((function e(){var t,n,r,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length>0&&void 0!==i[0]?i[0]:null,n=this.root;n&&!this.isEqual(t,n.key)&&(null!==t||n.right);)n=this.isLessThan(t,n.key)&&null!==t?n.left:n.right;if(n){e.next=5;break}return e.abrupt("return",null);case 5:r=!0;case 6:if(!r){e.next=20;break}return e.next=9,[n.key,n.value];case 9:if(r=!1,!n.left){e.next=15;break}for(n=n.left;n.right;)n=n.right;r=!0,e.next=18;break;case 15:if(n.parent){e.next=17;break}return e.abrupt("break",25);case 17:r=n.parent.right===n,n=n.parent;case 18:e.next=23;break;case 20:if(n.parent){e.next=22;break}return e.abrupt("break",25);case 22:r=n.parent.right===n,n=n.parent;case 23:e.next=6;break;case 25:return e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,this)}))},{key:"size",get:function(){return this.count}}]),e}()},5:function(e,t){},"5DEo":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Init=void 0;var r=n("NDb0");t.Init=function(e){function t(e,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).method="init",i.token=e,i.continuation_token=n,i.metadata=r,i.registrations=o,i.tweaks=s,i.capabilities=["client_update","offline_storage","telemetry.v1"],i}return _inherits(t,e),t}(r.AbstractMessage)},"5ETA":function(e,t){e.exports=!0},"5K/K":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Registrations=void 0;var r=n("uShU"),i=n("+qE3"),o=n("EcEN"),s=n("7FP+");t.Registrations=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).transport=e,n.registrations=new Map,n.registrationsInProgress=new Map,n}var n,i,a,u;return _inherits(t,e),_createClass(t,[{key:"putNotificationContext",value:(u=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"put_notification_ctx",notification_ctx_id:t},e.next=3,this.transport.sendWithReply(r,n);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"deleteNotificationContext",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"delete_notification_ctx",notification_ctx_id:t},e.next=3,this.transport.sendWithReply(n);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"updateRegistration",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.log.debug("update registration for context",t),(i=this.registrationsInProgress.get(t))||(i=new Set,this.registrationsInProgress.set(t,i)),s=o.v4(),i.add(s),e.prev=5,e.next=8,this.putNotificationContext(t,n);case 8:r.log.debug("registration attempt succeeded for context",n),i.delete(s),0===i.size&&(this.registrationsInProgress.delete(t),this.emit("registered",t)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),r.log.warn("registration attempt failed for context",n),r.log.debug(e.t0),i.delete(s),0===i.size&&(this.registrationsInProgress.delete(t),this.emit("registrationFailed",t,e.t0));case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e,t){return i.apply(this,arguments)})},{key:"updateRegistrations",value:function(){var e=this;r.log.trace("refreshing ".concat(this.registrations.size," registrations")),this.registrations.forEach((function(t,n){e.updateRegistration(n,t)}))}},{key:"setNotificationsContext",value:function(e,t){if(!e||!t)throw new s.TwilsockError("Invalid arguments provided");this.registrations.set(e,t),this.transport.isConnected&&this.updateRegistration(e,t)}},{key:"removeNotificationsContext",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.registrations.has(t),!e.t0){e.next=5;break}return e.next=4,this.deleteNotificationContext(t);case 4:this.transport.isConnected&&this.registrations.delete(t);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),t}(i.EventEmitter)},"5Qd4":function(e,t,n){var r=n("USwo");r(r.S+r.F,"Object",{assign:n("By1P")})},"5m62":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["weeks","years","months","days","hours","minutes","seconds"],i=Object.freeze({years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0}),o=t.pattern=new RegExp("P(?:(\\d+(?:[\\.,]\\d+)?W)|(\\d+(?:[\\.,]\\d+)?Y)?(\\d+(?:[\\.,]\\d+)?M)?(\\d+(?:[\\.,]\\d+)?D)?(?:T(\\d+(?:[\\.,]\\d+)?H)?(\\d+(?:[\\.,]\\d+)?M)?(\\d+(?:[\\.,]\\d+)?S)?)?)"),s=t.parse=function(e){return e.match(o).slice(1).reduce((function(e,t,n){return e[r[n]]=parseFloat(t)||0,e}),{})},a=t.end=function(e,t){e=Object.assign({},i,e);var n=t?t.getTime():Date.now(),r=new Date(n);return r.setFullYear(r.getFullYear()+e.years),r.setMonth(r.getMonth()+e.months),r.setDate(r.getDate()+e.days),r.setHours(r.getHours()+e.hours),r.setMinutes(r.getMinutes()+e.minutes),r.setMilliseconds(r.getMilliseconds()+1e3*e.seconds),r.setDate(r.getDate()+7*e.weeks),r},u=t.toSeconds=function(e,t){e=Object.assign({},i,e);var n=t?t.getTime():Date.now(),r=new Date(n);return(a(e,r).getTime()-r.getTime())/1e3};t.default={end:a,toSeconds:u,pattern:o,parse:s}},"5w6Y":function(e,t,n){var r=n("CYMq"),i=n("mHY4");n("czaS")("keys",(function(){return function(e){return i(r(e))}}))},6:function(e,t){},"6efB":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Twilsock=t.TwilsockClient=t.TelemetryEvents=void 0;var r=n("+qE3"),i=n("uShU"),o=n("Sxqd"),s=n("CFWb"),a=n("OxZ0"),u=n("0KpA"),l=n("5K/K"),c=n("C01u"),d=n("hLxu"),f=n("7FP+"),h=n("/S/1"),p=n("SGKw"),g=n("BPEz"),v=function e(){_classCallCheck(this,e)};t.TelemetryEvents=v,v.TWILSOCK_CONNECT="twilsock.sdk.connect",v.TWILSOCK_INIT="twilsock.sdk.init";var m=function(e){function t(e,n){var r,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).offlineStorageDeferred=new d.Deferred,h.continuationToken=h.continuationToken?h.continuationToken:p.TokenStorage.getStoredToken(n);var m=r.config=new o.Configuration(e,n,h);i.log.setLevel(m.logLevel);var y=new u.WebSocketChannel(m.url),b=h.transport?h.transport:new a.PacketInterface(y,m);return r.channel=h.channel?h.channel:new s.TwilsockImpl(y,b,m),r.registrations=h.registrations?h.registrations:new l.Registrations(b),r.upstream=new c.Upstream(b,r.channel,m),r.telemetryTracker=new g.TelemetryTracker(m,b),r.channel.on("initialized",(function(){return r.telemetryTracker.canSendTelemetry=!0})),y.on("disconnected",(function(){return r.telemetryTracker.canSendTelemetry=!1})),r.registrations.on("registered",(function(e){return r.emit("registered",e)})),r.channel.on("message",(function(e,t){return setTimeout((function(){return r.emit("message",e,t)}),0)})),r.channel.on("stateChanged",(function(e){return setTimeout((function(){return r.emit("stateChanged",e)}),0)})),r.channel.on("connectionError",(function(e){return setTimeout((function(){return r.emit("connectionError",e)}),0)})),r.channel.on("tokenAboutToExpire",(function(){return setTimeout((function(){return r.emit("tokenAboutToExpire")}),0)})),r.channel.on("tokenExpired",(function(){return setTimeout((function(){return r.emit("tokenExpired")}),0)})),r.channel.on("connected",(function(){return r.registrations.updateRegistrations()})),r.channel.on("connected",(function(){return r.upstream.sendPendingMessages()})),r.channel.on("connected",(function(){return setTimeout((function(){return r.emit("connected")}),0)})),r.channel.on("beforeConnect",(function(){return r.telemetryTracker.addPartialEvent(new g.TelemetryEventDescription("Establish WebSocket connection","",new Date),v.TWILSOCK_CONNECT,g.TelemetryPoint.Start)})),r.channel.on("connected",(function(){return r.telemetryTracker.addPartialEvent(new g.TelemetryEventDescription("Establish WebSocket connection","",new Date,new Date),v.TWILSOCK_CONNECT,g.TelemetryPoint.End)})),r.channel.on("beforeSendInit",(function(){return r.telemetryTracker.addPartialEvent(new g.TelemetryEventDescription("Send Twilsock init","",new Date),v.TWILSOCK_INIT,g.TelemetryPoint.Start)})),r.channel.on("initialized",(function(){return r.telemetryTracker.addPartialEvent(new g.TelemetryEventDescription("Send Twilsock init","Succeeded",new Date,new Date),v.TWILSOCK_INIT,g.TelemetryPoint.End)})),r.channel.on("sendInitFailed",(function(){return r.telemetryTracker.addPartialEvent(new g.TelemetryEventDescription("Send Twilsock init","Failed",new Date,new Date),v.TWILSOCK_INIT,g.TelemetryPoint.End)})),r.channel.on("initialized",(function(e){r.handleStorageId(n,e),p.TokenStorage.storeToken(e.continuationToken,n),setTimeout((function(){return r.emit("initialized",e)}),0)})),r.channel.on("disconnected",(function(){return setTimeout((function(){return r.emit("disconnected")}),0)})),r.channel.on("disconnected",(function(){return r.upstream.rejectPendingMessages()})),r.channel.on("disconnected",(function(){return r.offlineStorageDeferred.fail(new f.TwilsockError("Client disconnected"))})),r.offlineStorageDeferred.promise.catch((function(){})),r}var n;return _inherits(t,e),_createClass(t,[{key:"emit",value:function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return i.log.debug("Emitting ".concat(e.toString(),"(").concat(o.map((function(e){return JSON.stringify(e)})).join(", "),")")),(n=_get(_getPrototypeOf(t.prototype),"emit",this)).call.apply(n,[this,e].concat(o))}},{key:"handleStorageId",value:function(e,t){if(t.offlineStorage)if(t.offlineStorage.hasOwnProperty(e))try{this.offlineStorageDeferred.set(h.OfflineProductStorage.create(t.offlineStorage[e])),i.log.debug("Offline storage for '".concat(e,"' product: ").concat(JSON.stringify(t.offlineStorage[e]),"."))}catch(n){this.offlineStorageDeferred.fail(new f.TwilsockError("Failed to parse offline storage for ".concat(e," ").concat(JSON.stringify(t.offlineStorage[e]),". ").concat(n,".")))}else this.offlineStorageDeferred.fail(new f.TwilsockError("No offline storage id for '".concat(e,"' product: ").concat(JSON.stringify(t.offlineStorage))));else this.offlineStorageDeferred.fail(new f.TwilsockError("No offline storage id"))}},{key:"storageId",value:function(){return this.offlineStorageDeferred.promise}},{key:"updateToken",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.log.trace("updating token '".concat(t,"'")),this.config.token===t){e.next=2;break}return e.abrupt("return",(this.config.updateToken(t),this.channel.updateToken(t)));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setNotificationsContext",value:function(e,t){this.registrations.setNotificationsContext(e,t)}},{key:"removeNotificationsContext",value:function(e){this.registrations.removeNotificationsContext(e)}},{key:"connect",value:function(){return this.channel.connect()}},{key:"disconnect",value:function(){return this.telemetryTracker.sendTelemetry(g.EventSendingLimitation.AnyEventsIncludingUnfinished),this.channel.disconnect()}},{key:"get",value:function(e,t){return this.telemetryTracker.sendTelemetry(g.EventSendingLimitation.AnyEvents),this.upstream.send("GET",e,t)}},{key:"post",value:function(e,t,n){return this.telemetryTracker.sendTelemetry(g.EventSendingLimitation.AnyEvents),this.upstream.send("POST",e,t,n)}},{key:"put",value:function(e,t,n){return this.telemetryTracker.sendTelemetry(g.EventSendingLimitation.AnyEvents),this.upstream.send("PUT",e,t,n)}},{key:"delete",value:function(e,t){return this.telemetryTracker.sendTelemetry(g.EventSendingLimitation.AnyEvents),this.upstream.send("DELETE",e,t)}},{key:"addTelemetryEvent",value:function(e){this.telemetryTracker.addTelemetryEvent(e),this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}},{key:"addPartialTelemetryEvent",value:function(e,t,n){this.telemetryTracker.addPartialEvent(e,t,n),n===g.TelemetryPoint.End&&this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}},{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"state",get:function(){return this.channel.state}}]),t}(r.EventEmitter);t.TwilsockClient=m,t.Twilsock=m},"6fQM":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("AytR"),i=n("HDdC"),o=n("8Y7J"),s=n("IheW"),a=function(){var e=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"searchDishes",value:function(e,t){if(t){var n=r.a.SEARCH_DISHES.replace("{restaurantId}",e.toString()).replace("{search}",t);return this.http.get(n)}return new i.a((function(e){e.next({results:[]}),e.complete()}))}},{key:"getDishDetails",value:function(e){var t=r.a.GET_DISH_DETAILS.replace("{dishId}",e.toString());return this.http.get(t)}},{key:"addProductToOrder",value:function(e,t){var n=r.a.ODERS_DISHES.replace("{orderId}",e.toString());return this.http.post(n,t)}},{key:"removeDishFromOrder",value:function(e,t){var n=r.a.ORDERS_DISHES_DETAILS.replace("{orderId}",e.toString()).replace("{dishId}",t);return this.http.delete(n)}},{key:"closeReservation",value:function(e,t){var n=r.a.CLOSE_RESERVATION.replace("{reservationId}",e.toString());return this.http.post(n,t)}}]),e}();return e.\u0275prov=o.bc({factory:function(){return new e(o.cc(s.c))},token:e,providedIn:"root"}),e}()},"6jRP":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},"6quN":function(e,t,n){"use strict";var r=a(n("14Xm")),i=a(n("D3Ub")),o=a(n("iCc5")),s=a(n("V7oC"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PublicChannels=void 0;var u=n("iqZd"),l=n("IMt4"),c=n("k1+U"),d=function(){function e(t,n,r){(0,o.default)(this,e),this.client=t,this.services=n,this.url=r}var t,n,a;return(0,s.default)(e,[{key:"getChannels",value:(a=(0,i.default)(r.default.mark((function e(){var t,n,i=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new u.UriBuilder(this.url).arg("PageToken",o.pageToken).build(),e.next=3,this.services.network.get(t);case 3:return e.abrupt("return",new l.RestPaginator((n=e.sent).body.channels.map((function(e){return new c.ChannelDescriptor(i.client,e)})),(function(e){return i.getChannels({pageToken:e})}),n.body.meta.previous_token,n.body.meta.next_token));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getChannelBySid",value:(n=(0,i.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new u.UriBuilder(this.url).path(t).build(),e.next=3,this.services.network.get(n);case 3:return e.abrupt("return",new c.ChannelDescriptor(this.client,e.sent.body));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getChannelByUniqueName",value:(t=(0,i.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new u.UriBuilder(this.url).path(t).build(),e.next=3,this.services.network.get(n);case 3:return e.abrupt("return",new c.ChannelDescriptor(this.client,e.sent.body));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();t.PublicChannels=d},"6r7x":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0,t.Configuration=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n,r,i=t.cdsUri||"https://cds.".concat(t.region||"us1",".twilio.com");this.settings={subscriptionsUri:i+"/v4/Subscriptions",documentsUri:i+"/v3/Documents",listsUri:i+"/v3/Lists",mapsUri:i+"/v3/Maps",streamsUri:i+"/v3/Streams",insightsUri:i+"/v3/Insights",sessionStorageEnabled:(n=t.Sync,r="enableSessionStorage",!n||void 0===n[r]||n[r]),productId:t.productId}}return _createClass(e,[{key:"subscriptionsUri",get:function(){return this.settings.subscriptionsUri}},{key:"documentsUri",get:function(){return this.settings.documentsUri}},{key:"listsUri",get:function(){return this.settings.listsUri}},{key:"mapsUri",get:function(){return this.settings.mapsUri}},{key:"streamsUri",get:function(){return this.settings.streamsUri}},{key:"insightsUri",get:function(){return this.settings.insightsUri}},{key:"backoffConfig",get:function(){return this.settings.backoffConfig||{}}},{key:"sessionStorageEnabled",get:function(){return this.settings.sessionStorageEnabled}},{key:"productId",get:function(){return this.settings.productId}}]),e}()},"6w5q":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Init=void 0;var r=n("PmLG");t.Init=function(e){function t(e,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).method="init",i.token=e,i.continuation_token=n,i.metadata=r,i.registrations=o,i.tweaks=s,i.capabilities=["client_update","offline_storage","telemetry.v1"],i}return _inherits(t,e),t}(r.AbstractMessage)},7:function(e,t){},"72j5":function(e,t,n){"use strict";var r,i=(r=n("iCc5"))&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseCodes=void 0;var o=function e(){(0,i.default)(this,e)};t.ResponseCodes=o,o.HTTP_200_OK=200,o.HTTP_400_BAD_REQUEST=400,o.HTTP_404_NOT_FOUND=404,o.ACCESS_FORBIDDEN_FOR_IDENTITY=54007,o.LIST_NOT_FOUND=54150},"7FP+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwilsockError=void 0;var r=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,_wrapNativeSuper(Error)),t}();t.TwilsockError=r},"7whZ":function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"8sL3":function(e,t,n){"use strict";var r=n("FgkJ");function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},"9y9p":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var r=n("4xVT"),i=function(){function e(t,n){_classCallCheck(this,e),this.value=t,this.revision=n||0}return _createClass(e,[{key:"isValid",get:function(){return!0}}]),e}(),o=function(){function e(t){_classCallCheck(this,e),this.revision=t}return _createClass(e,[{key:"isValid",get:function(){return!1}}]),e}(),s=function(){function e(){_classCallCheck(this,e),this.items=new r.TreeMap}return _createClass(e,[{key:"store",value:function(e,t,n){var r=this.items.get(e);return r&&r.revision>n?r.isValid?r.value:null:(this.items.set(e,new i(t,n)),t)}},{key:"delete",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.items.get(e);(!r||r.revision<t||r&&!0===n)&&this.items.set(e,new o(t))}},{key:"isKnown",value:function(e,t){var n=this.items.get(e);return n&&n.revision>=t}},{key:"get",value:function(e){var t=this.items.get(e);return t&&t.isValid?t.value:null}},{key:"has",value:function(e){var t=this.items.get(e);return t&&t.isValid}},{key:"forEach",value:function(e){if(this.items){var t=!0,n=!1,r=void 0;try{for(var i,o=this.items[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=_slicedToArray(i.value,2),a=s[0],u=s[1];u.isValid&&e(a,u.value)}}catch(l){n=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}}}]),e}();t.Cache=s,t.default=s},A9a0:function(e,t,n){var r=n("nA4W"),i=n("bKEA"),o=n("Oa1h")(!1),s=n("WpRT")("IE_PROTO");e.exports=function(e,t){var n,a=i(e),u=0,l=[];for(n in a)n!=s&&r(a,n)&&l.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~o(l,n)||l.push(n));return l}},ASGO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstantQuery=t.LiveQuery=t.queryItems=t.LiveQueryImpl=t.InsightsItem=void 0;var r=n("v2fs"),i=n("PyJ+"),o=n("PalJ"),s=n("+qE3"),a=n("BUbV"),u=n("PEWQ"),l=n("9y9p");t.InsightsItem=function(){return function e(){_classCallCheck(this,e)}}();var c=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n,r))).descriptor=e,o.cache=new l.Cache,i&&i.forEach((function(e){o.cache.store(e.key,{key:e.key,value:e.data},e.revision)})),o}return _inherits(t,e),_createClass(t,[{key:"onRemoved",value:function(){}},{key:"getItems",value:function(){var e={};return this.cache.forEach((function(t,n){e[t]=n.value})),e}},{key:"_update",value:function(e,t){switch(e.type){case"live_query_item_updated":this.handleItemMutated(e.item_key,e.item_data,e.item_revision);break;case"live_query_item_removed":this.handleItemRemoved(e.item_key,e.item_revision);break;case"live_query_updated":this.handleBatchUpdate(e.items)}t&&this._advanceLastEventId(e.last_event_id)}},{key:"handleItemMutated",value:function(e,t,n){if(this.shouldIgnoreEvent(e,n))o.default.trace("Item ".concat(e," update skipped, revision: ").concat(n));else{var r={key:e,value:t};this.cache.store(e,r,n),this.broadcastEventToListeners("itemUpdated",r)}}},{key:"handleItemRemoved",value:function(e,t){var n=null===t;this.shouldIgnoreEvent(e,t)?o.default.trace("Item ".concat(e," delete skipped, revision: ").concat(t)):(this.cache.delete(e,t,n),this.broadcastEventToListeners("itemRemoved",{key:e}))}},{key:"handleBatchUpdate",value:function(e){var t=this,n={};for(var r in null!=e&&e.forEach((function(e){n[e.key]={data:e.data,revision:e.revision}})),this.cache.forEach((function(e,r){var i=n[e];null!=i?t.handleItemMutated(e,i.data,i.revision):t.handleItemRemoved(e,null),delete n[e]})),n)this.handleItemMutated(r,n[r].data,n[r].revision)}},{key:"shouldIgnoreEvent",value:function(e,t){return null!=e&&null!=t&&this.cache.isKnown(e,t)}},{key:"_advanceLastEventId",value:function(e,t){this.lastEventId<e&&(this.descriptor.last_event_id=e)}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return null}},{key:"type",get:function(){return t.type}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"indexName",get:function(){return this.descriptor.indexName}},{key:"queryString",get:function(){return this.descriptor.queryExpression}},{key:"queryUri",get:function(){return this.descriptor.queryUri}},{key:"liveQueryDescriptor",get:function(){return this.descriptor}}],[{key:"type",get:function(){return"live_query"}}]),t}(a.SyncEntity);function d(e){return f.apply(this,arguments)}function f(){return(f=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,o,s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.network,r=t.queryString,o=t.uri,s=t.type,null!=r){e.next=3;break}throw new i.SyncError("Invalid query",400,54507);case 3:return a={query_string:r},s===h.type&&(a.type=s),e.next=7,n.post(o,a,void 0,!0);case 7:return e.abrupt("return",e.sent.body);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.LiveQueryImpl=c,t.queryItems=d;var h=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).liveQueryImpl=e,n.liveQueryImpl.attach(_assertThisInitialized(n)),n}return _inherits(t,e),_createClass(t,[{key:"close",value:function(){_get(_getPrototypeOf(t.prototype),"close",this).call(this),this.liveQueryImpl.detach(this.listenerUuid)}},{key:"getItems",value:function(){return this.ensureNotClosed(),this.liveQueryImpl.getItems()}},{key:"type",get:function(){return c.type}},{key:"lastEventId",get:function(){return this.liveQueryImpl.lastEventId}},{key:"sid",get:function(){return this.liveQueryImpl.sid}}],[{key:"type",get:function(){return c.type}}]),t}(u.Closeable);t.LiveQuery=h;var p=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).queryExpression=null,n.items={},Object.assign(_assertThisInitialized(n),e),n.updateIndexName(e.indexName),n}var n,s;return _inherits(t,e),_createClass(t,[{key:"search",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.items={},d({network:this.network,uri:this.queryUri,queryString:t}).then((function(e){n.queryExpression=t,e.items&&e.items.forEach((function(e){n.items[e.key]=e.data})),n.emit("searchResult",n.getItems())})).catch((function(e){throw o.default.error("Error '".concat(e.message,"' while executing query '").concat(t,"'")),n.queryExpression=null,e}))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"subscribe",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null==this.queryExpression?Promise.reject(new i.SyncError("Invalid query",400,54507)):this.liveQueryCreator(this.indexName,this.queryExpression));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getItems",value:function(){return this.items}},{key:"updateIndexName",value:function(e){if(!e||"string"!=typeof e)throw new Error("Index name must contain a non-empty string value");this.indexName=e,this.queryUri=this.generateQueryUri(this.indexName)}},{key:"generateQueryUri",value:function(e){return new r.UriBuilder(this.insightsUri).pathSegment(e).pathSegment("Items").build()}},{key:"type",get:function(){return t.type}}],[{key:"type",get:function(){return"instant_query"}}]),t}(s.EventEmitter);t.InstantQuery=p,t.default=h},AjXP:function(e,t,n){var r=n("wlNh");e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},AqBG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwilsockConnector=void 0;var r=n("EcEN"),i=n("3Lba");t.TwilsockConnector=function(e){function t(e,n,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,i))).twilsock=n,o.context=e,e.id=r.v4(),o.twilsock.on("stateChanged",(function(e){"connected"!==e&&o.emit("transportReady",!1)})),o.twilsock.on("registered",(function(t){e&&t===e.id&&"connected"===n.state&&o.emit("transportReady",!0)})),o}var n,i;return _inherits(t,e),_createClass(t,[{key:"setNotificationId",value:function(){}},{key:"updateToken",value:function(e){}},{key:"updateContextRequest",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={product_id:this.context.productId,notification_protocol_version:4,endpoint_platform:this.context.platform,message_types:t},this.emit("transportReady",!1),e.next=4,this.twilsock.setNotificationsContext(this.context.id,n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"updateRegistration",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.has("messageType")){e.next=4;break}return e.next=3,this.updateContextRequest(Array.from(t.messageTypes));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"removeRegistration",value:function(){return this.twilsock.removeNotificationsContext(this.context.id)}}]),t}(i.Connector)},AyUB:function(e,t,n){e.exports={default:n("vNbC"),__esModule:!0}},B0QU:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));var r=n("8Y7J"),i=n("PqYM"),o=function e(){_classCallCheck(this,e),this.class="",this.backgroundGradient=!1,this.backgroundColor="transparent",this.backgroundGradientStopColor="transparent",this.backgroundOpacity=1,this.backgroundStroke="transparent",this.backgroundStrokeWidth=0,this.backgroundPadding=5,this.percent=0,this.radius=90,this.space=4,this.toFixed=0,this.maxPercent=1e3,this.renderOnClick=!0,this.units="%",this.unitsFontSize="10",this.unitsFontWeight="normal",this.unitsColor="#444444",this.outerStrokeGradient=!1,this.outerStrokeWidth=8,this.outerStrokeColor="#78C000",this.outerStrokeGradientStopColor="transparent",this.outerStrokeLinecap="round",this.innerStrokeColor="#C7E596",this.innerStrokeWidth=4,this.titleFormat=void 0,this.title="auto",this.titleColor="#444444",this.titleFontSize="20",this.titleFontWeight="normal",this.subtitleFormat=void 0,this.subtitle="progress",this.subtitleColor="#A9A9A9",this.subtitleFontSize="10",this.subtitleFontWeight="normal",this.imageSrc=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.animation=!0,this.animateTitle=!0,this.animateSubtitle=!1,this.animationDuration=500,this.showTitle=!0,this.showSubtitle=!0,this.showUnits=!0,this.showImage=!1,this.showBackground=!0,this.showInnerStroke=!0,this.clockwise=!0,this.responsive=!1,this.startFromZero=!0,this.showZeroOuterStroke=!0,this.lazy=!1},s=function(){function e(t,n,s){var a=this;_classCallCheck(this,e),this.elRef=n,this.document=s,this.onClick=new r.o,this.svgElement=null,this.isInViewport=!1,this.onViewportChanged=new r.o,this._viewportChangedSubscriber=null,this.options=new o,this.defaultOptions=new o,this._lastPercent=0,this._gradientUUID=null,this.render=function(){a.applyOptions(),a.options.lazy?(null===a.svgElement&&a.draw(a._lastPercent),a.isInViewport&&(a.options.animation&&a.options.animationDuration>0?a.animate(a._lastPercent,a.options.percent):a.draw(a.options.percent),a._lastPercent=a.options.percent)):(a.options.animation&&a.options.animationDuration>0?a.animate(a._lastPercent,a.options.percent):a.draw(a.options.percent),a._lastPercent=a.options.percent)},this.polarToCartesian=function(e,t,n,r){var i=r*Math.PI/180;return{x:e+Math.sin(i)*n,y:t-Math.cos(i)*n}},this.draw=function(e){var t,n=(e=void 0===e?a.options.percent:Math.abs(e))>100?100:e,r=2*a.options.radius+2*a.options.outerStrokeWidth;a.options.showBackground&&(r+=2*a.options.backgroundStrokeWidth+a.max(0,2*a.options.backgroundPadding));var i,o,s={x:r/2,y:r/2},u=s.x,l=s.y-a.options.radius,c=a.polarToCartesian(s.x,s.y,a.options.radius,360*(a.options.clockwise?n:100-n)/100);100===n&&(c.x=c.x+(a.options.clockwise?-.01:.01)),i=(t=_slicedToArray(n>50?a.options.clockwise?[1,1]:[1,0]:a.options.clockwise?[0,1]:[0,0],2))[0],o=t[1];var d=a.options.animateTitle?e:a.options.percent,f=d>a.options.maxPercent?"".concat(a.options.maxPercent.toFixed(a.options.toFixed),"+"):d.toFixed(a.options.toFixed),h=a.options.animateSubtitle?e:a.options.percent,p={x:s.x,y:s.y,textAnchor:"middle",color:a.options.titleColor,fontSize:a.options.titleFontSize,fontWeight:a.options.titleFontWeight,texts:[],tspans:[]};if(void 0!==a.options.titleFormat&&"Function"===a.options.titleFormat.constructor.name){var g=a.options.titleFormat(d);g instanceof Array?p.texts=_toConsumableArray(g):p.texts.push(g.toString())}else"auto"===a.options.title?p.texts.push(f):a.options.title instanceof Array?p.texts=_toConsumableArray(a.options.title):p.texts.push(a.options.title.toString());var v={x:s.x,y:s.y,textAnchor:"middle",color:a.options.subtitleColor,fontSize:a.options.subtitleFontSize,fontWeight:a.options.subtitleFontWeight,texts:[],tspans:[]};if(void 0!==a.options.subtitleFormat&&"Function"===a.options.subtitleFormat.constructor.name){var m=a.options.subtitleFormat(h);m instanceof Array?v.texts=_toConsumableArray(m):v.texts.push(m.toString())}else a.options.subtitle instanceof Array?v.texts=_toConsumableArray(a.options.subtitle):v.texts.push(a.options.subtitle.toString());var y={text:"".concat(a.options.units),fontSize:a.options.unitsFontSize,fontWeight:a.options.unitsFontWeight,color:a.options.unitsColor},b=0,k=1;if(a.options.showTitle&&(b+=p.texts.length),a.options.showSubtitle&&(b+=v.texts.length),a.options.showTitle){var _=!0,C=!1,w=void 0;try{for(var x,O=p.texts[Symbol.iterator]();!(_=(x=O.next()).done);_=!0){var S=x.value;p.tspans.push({span:S,dy:a.getRelativeY(k,b)}),k++}}catch(j){C=!0,w=j}finally{try{_||null==O.return||O.return()}finally{if(C)throw w}}}if(a.options.showSubtitle){var P=!0,M=!1,T=void 0;try{for(var R,E=v.texts[Symbol.iterator]();!(P=(R=E.next()).done);P=!0){var I=R.value;v.tspans.push({span:I,dy:a.getRelativeY(k,b)}),k++}}catch(j){M=!0,T=j}finally{try{P||null==E.return||E.return()}finally{if(M)throw T}}}null===a._gradientUUID&&(a._gradientUUID=a.uuid()),a.svg={viewBox:"0 0 ".concat(r," ").concat(r),width:a.options.responsive?"100%":r,height:a.options.responsive?"100%":r,backgroundCircle:{cx:s.x,cy:s.y,r:a.options.radius+a.options.outerStrokeWidth/2+a.options.backgroundPadding,fill:a.options.backgroundColor,fillOpacity:a.options.backgroundOpacity,stroke:a.options.backgroundStroke,strokeWidth:a.options.backgroundStrokeWidth},path:{d:"M ".concat(u," ").concat(l,"\n        A ").concat(a.options.radius," ").concat(a.options.radius," 0 ").concat(i," ").concat(o," ").concat(c.x," ").concat(c.y),stroke:a.options.outerStrokeColor,strokeWidth:a.options.outerStrokeWidth,strokeLinecap:a.options.outerStrokeLinecap,fill:"none"},circle:{cx:s.x,cy:s.y,r:a.options.radius-a.options.space-a.options.outerStrokeWidth/2-a.options.innerStrokeWidth/2,fill:"none",stroke:a.options.innerStrokeColor,strokeWidth:a.options.innerStrokeWidth},title:p,units:y,subtitle:v,image:{x:s.x-a.options.imageWidth/2,y:s.y-a.options.imageHeight/2,src:a.options.imageSrc,width:a.options.imageWidth,height:a.options.imageHeight},outerLinearGradient:{id:"outer-linear-"+a._gradientUUID,colorStop1:a.options.outerStrokeColor,colorStop2:"transparent"===a.options.outerStrokeGradientStopColor?"#FFF":a.options.outerStrokeGradientStopColor},radialGradient:{id:"radial-"+a._gradientUUID,colorStop1:a.options.backgroundColor,colorStop2:"transparent"===a.options.backgroundGradientStopColor?"#FFF":a.options.backgroundGradientStopColor}}},this.getAnimationParameters=function(e,t){var n,r,i,o=a.options.startFromZero?0:e<0?0:e,s=t<0?0:a.min(t,a.options.maxPercent),u=Math.abs(Math.round(s-o));return u>=100?(n=100,r=a.options.animateTitle||a.options.animateSubtitle?Math.round(u/n):1):(n=u,r=1),(i=Math.round(a.options.animationDuration/n))<10&&(i=10,n=a.options.animationDuration/i,r=!a.options.animateTitle&&!a.options.animateSubtitle&&u>100?Math.round(100/n):Math.round(u/n)),r<1&&(r=1),{times:n,step:r,interval:i}},this.animate=function(e,t){a._timerSubscription&&!a._timerSubscription.closed&&a._timerSubscription.unsubscribe();var n=a.options.startFromZero?0:e,r=t,o=a.getAnimationParameters(n,r),s=o.step,u=o.interval,l=n;a._timerSubscription=n<r?Object(i.a)(0,u).subscribe((function(){(l+=s)<=r?!a.options.animateTitle&&!a.options.animateSubtitle&&l>=100?(a.draw(r),a._timerSubscription.unsubscribe()):a.draw(l):(a.draw(r),a._timerSubscription.unsubscribe())})):Object(i.a)(0,u).subscribe((function(){(l-=s)>=r?!a.options.animateTitle&&!a.options.animateSubtitle&&r>=100?(a.draw(r),a._timerSubscription.unsubscribe()):a.draw(l):(a.draw(r),a._timerSubscription.unsubscribe())}))},this.emitClickEvent=function(e){a.options.renderOnClick&&a.animate(0,a.options.percent),a.onClick.emit(e)},this.applyOptions=function(){for(var e=0,t=Object.keys(a.options);e<t.length;e++){var n=t[e];a.hasOwnProperty(n)&&void 0!==a[n]?a.options[n]=a[n]:a.templateOptions&&void 0!==a.templateOptions[n]&&(a.options[n]=a.templateOptions[n])}a.options.radius=Math.abs(+a.options.radius),a.options.space=+a.options.space,a.options.percent=+a.options.percent>0?+a.options.percent:0,a.options.maxPercent=Math.abs(+a.options.maxPercent),a.options.animationDuration=Math.abs(a.options.animationDuration),a.options.outerStrokeWidth=Math.abs(+a.options.outerStrokeWidth),a.options.innerStrokeWidth=Math.abs(+a.options.innerStrokeWidth),a.options.backgroundPadding=+a.options.backgroundPadding},this.getRelativeY=function(e,t){return(1*(e-t/2)-.18).toFixed(2)+"em"},this.min=function(e,t){return e<t?e:t},this.max=function(e,t){return e>t?e:t},this.uuid=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))},this.findSvgElement=function(){if(null===this.svgElement){var e=this.elRef.nativeElement.getElementsByTagName("svg");e.length>0&&(this.svgElement=e[0])}},this.checkViewport=function(){a.findSvgElement();var e=a.isInViewport;a.isInViewport=a.isElementInViewport(a.svgElement),e!==a.isInViewport&&a.onViewportChanged.emit({oldValue:e,newValue:a.isInViewport})},this.onScroll=function(e){a.checkViewport()},this.loadEventsForLazyMode=function(){if(a.options.lazy){a.document.addEventListener("scroll",a.onScroll,!0),a.window.addEventListener("resize",a.onScroll,!0),null===a._viewportChangedSubscriber&&(a._viewportChangedSubscriber=a.onViewportChanged.subscribe((function(e){e.newValue&&a.render()})));var e=Object(i.a)(0,50).subscribe((function(){null===a.svgElement?a.checkViewport():e.unsubscribe()}))}},this.unloadEventsForLazyMode=function(){a.document.removeEventListener("scroll",a.onScroll,!0),a.window.removeEventListener("resize",a.onScroll,!0),null!==a._viewportChangedSubscriber&&(a._viewportChangedSubscriber.unsubscribe(),a._viewportChangedSubscriber=null)},this.document=s,this.window=this.document.defaultView,Object.assign(this.options,t),Object.assign(this.defaultOptions,t)}return _createClass(e,[{key:"isDrawing",value:function(){return this._timerSubscription&&!this._timerSubscription.closed}},{key:"isElementInViewport",value:function(e){if(null==e)return!1;var t,n=e.getBoundingClientRect(),r=e.parentNode;do{if(t=r.getBoundingClientRect(),n.top>=t.bottom)return!1;if(n.bottom<=t.top)return!1;if(n.left>=t.right)return!1;if(n.right<=t.left)return!1;r=r.parentNode}while(r!=this.document.body);return!(n.top>=(this.window.innerHeight||this.document.documentElement.clientHeight)||n.bottom<=0||n.left>=(this.window.innerWidth||this.document.documentElement.clientWidth)||n.right<=0)}},{key:"ngOnInit",value:function(){this.loadEventsForLazyMode()}},{key:"ngOnDestroy",value:function(){this.unloadEventsForLazyMode()}},{key:"ngOnChanges",value:function(e){this.render(),"lazy"in e&&(e.lazy.currentValue?this.loadEventsForLazyMode():this.unloadEventsForLazyMode())}}]),e}(),a=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[{provide:o,useValue:t}]}}}]),e}()},BG5D:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n("+qwt");t.Metadata=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getMetadata",value:function(e){"undefined"!=typeof navigator&&r.parse(navigator.userAgent);var t=e&&e.clientMetadata?e.clientMetadata:{},n={env:r.name,envv:r.version,os:r.os.family,osv:r.os.version,osa:r.os.architecture,sdk:"js-default"},i={};return["ver","env","envv","os","osv","osa","type","sdk","sdkv","dev","devv","devt","app","appv"].filter((function(e){return e in t||e in n})).forEach((function(e){return i[e]=e in t?t[e]:n[e]})),i}}]),e}()},BLvK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OfflineProductStorage=void 0;var r=n("arZA"),i=function(){function e(t){_classCallCheck(this,e),this.id=t}return _createClass(e,null,[{key:"create",value:function(t){if(t instanceof Object&&"storage_id"in t)return new e(t.storage_id);throw new r.TwilsockError('Field "storage_id" is missing')}}]),e}();t.OfflineProductStorage=i},BPEz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventSendingLimitation=t.TelemetryPoint=t.TelemetryEventDescription=t.TelemetryTracker=void 0;var r,i,o=n("KnDq"),s=n("uShU"),a=function(){function e(t,n,r,i,o,s){_classCallCheck(this,e),this.title=t,this.details=n,this.start=r,this.type=o,this.id=s,this.end=i}return _createClass(e,[{key:"toTelemetryEvent",value:function(){var e=new Date,t=this.start,n=this.end?this.end:e;if(n<t){var r=n;n=t,t=r}var i=t.getTime()-e.getTime(),s=n.getTime()-e.getTime();return new o.TelemetryEvent(i,s,this.title,this.details,this.id,this.type)}}]),e}();t.TelemetryEventDescription=a,function(e){e[e.Start=0]="Start",e[e.End=1]="End"}(r||(r={})),t.TelemetryPoint=r,function(e){e[e.MinEventsPortion=0]="MinEventsPortion",e[e.AnyEvents=1]="AnyEvents",e[e.AnyEventsIncludingUnfinished=2]="AnyEventsIncludingUnfinished"}(i||(i={})),t.EventSendingLimitation=i,t.TelemetryTracker=function(){function e(t,n){_classCallCheck(this,e),this.minEventsPortionToSend=50,this.maxEventsPortionToSend=100,this.pendingEvents=new Map,this.readyEvents=[],this.hasInitializationFinished=!1,this._canSendTelemetry=!1,this.config=t,this.packetInterface=n}return _createClass(e,[{key:"addTelemetryEvent",value:function(e){!this.canSendTelemetry&&this.hasInitializationFinished||this.readyEvents.push(e)}},{key:"addPartialEvent",value:function(e,t,n){s.log.debug("Adding ".concat(n===r.Start?"starting":"ending"," timepoint for '").concat(t,"' event"));var i=this.pendingEvents.has(t);if(n===r.Start)i&&s.log.debug("Overwriting starting point for '".concat(t,"' event")),this.pendingEvents.set(t,e);else{if(!i)return void s.log.error("Could not find started event for '".concat(t,"' event"));this.addTelemetryEvent(this.merge(this.pendingEvents.get(t),e)),this.pendingEvents.delete(t)}}},{key:"getTelemetryToSend",value:function(e){return this.canSendTelemetry&&0!=this.readyEvents.length?e==i.MinEventsPortion&&this.readyEvents.length<this.minEventsPortionToSend?[]:this.getTelemetryPortion(e==i.AnyEventsIncludingUnfinished):[]}},{key:"getTelemetryPortion",value:function(e){var t=this,n=Math.min(this.readyEvents.length,this.maxEventsPortionToSend),r=this.readyEvents.splice(0,n);return e&&r.length<this.maxEventsPortionToSend&&this.pendingEvents.forEach((function(e,n){if(!(r.length>=t.maxEventsPortionToSend)){var i=t.pendingEvents.get(n);t.pendingEvents.delete(n),r.push(new a("[UNFINISHED] ".concat(i.title),i.details,i.start,null,i.type,i.id))}})),r}},{key:"merge",value:function(e,t){return new a(t.title?t.title:e.title,t.details?t.details:e.details,e.start,t.end,t.type?t.type:e.type,t.id?t.id:e.id)}},{key:"sendTelemetryIfMinimalPortionCollected",value:function(){this.sendTelemetry(i.MinEventsPortion)}},{key:"sendTelemetry",value:function(e){var t=this.getTelemetryToSend(e);if(0!==t.length)try{this.packetInterface.send(new o.Telemetry(t.map((function(e){return e.toTelemetryEvent()}))))}catch(n){s.log.debug("Error while sending ".concat(t.length," telemetry events due to ").concat(n,"; they will be resubmitted")),this.readyEvents=this.readyEvents.concat(t)}}},{key:"isTelemetryEnabled",get:function(){return this.config.confirmedCapabilities.has("telemetry.v1")}},{key:"canSendTelemetry",get:function(){return this._canSendTelemetry&&this.isTelemetryEnabled},set:function(e){s.log.debug("TelemetryTracker.canSendTelemetry: ".concat(e," TelemetryTracker.isTelemetryEnabled: ").concat(this.isTelemetryEnabled)),this._canSendTelemetry&&!e&&(this.pendingEvents.clear(),this.readyEvents=[]),this._canSendTelemetry=e,e&&this.sendTelemetry(i.AnyEvents),e&&!this.hasInitializationFinished&&(this.hasInitializationFinished=!0)}}]),e}()},BRsN:function(e,t,n){var r=n("GhSp"),i=n("ENu8");e.exports=n("C61u")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},BSbQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n("8LU1");var r=function e(){_classCallCheck(this,e)}},BUbV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncEntity=void 0;var r=function(){function e(t,n){_classCallCheck(this,e),this.services=t,this.removalHandler=n,this.subscriptionState="none",this._attachedListeners=new Map}return _createClass(e,[{key:"_advanceLastEventId",value:function(e,t){}},{key:"reportFailure",value:function(e){404===e.status?this.onRemoved(!1):this.broadcastEventToListeners("failure",e)}},{key:"_subscribe",value:function(){this.services.router.subscribe(this.sid,this)}},{key:"_unsubscribe",value:function(){this.services.router.unsubscribe(this.sid)}},{key:"_setSubscriptionState",value:function(e){this.subscriptionState=e,this.broadcastEventToListeners("_subscriptionStateChanged",e)}},{key:"close",value:function(){this._unsubscribe(),null!=this.removalHandler&&this.removalHandler(this.type,this.sid,this.uniqueName)}},{key:"attach",value:function(e){var t=e.listenerUuid;this._attachedListeners.get(t)||(this._attachedListeners.size||this._subscribe(),this._attachedListeners.set(t,e))}},{key:"detach",value:function(e){this._attachedListeners.delete(e),this._attachedListeners.size||this.close()}},{key:"broadcastEventToListeners",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,s=this._attachedListeners.values()[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.emit(e,t)}}catch(a){r=!0,i=a}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}}]),e}();t.SyncEntity=r,t.default=r},BfU5:function(e,t,n){var r=n("ekG2"),i=n("7whZ").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},By1P:function(e,t,n){"use strict";var r=n("C61u"),i=n("mHY4"),o=n("/tXR"),s=n("GRew"),a=n("CYMq"),u=n("n7vu"),l=Object.assign;e.exports=!l||n("S4vA")((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=a(e),l=arguments.length,c=1,d=o.f,f=s.f;l>c;)for(var h,p=u(arguments[c++]),g=d?i(p).concat(d(p)):i(p),v=g.length,m=0;v>m;)h=g[m++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:l},"C/FO":function(e,t,n){n("MrV2"),e.exports=n("VSTI").Number.isInteger},C01u:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Upstream=void 0;var r=n("uShU"),i=n("7FP+"),o=n("rifi"),s=n("w7D8"),a=n("o+/m");function u(e,t){var n=function(e){var t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(t){var n={protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7],params:null};if(n.search.length>0){var r=n.search.substring(1);n.params=r.split("&").map((function(e){return e.split("=")})).reduce((function(e,t){return e.hasOwnProperty(t[0])?Array.isArray(e[t[0]])?e[t[0]].push(t[1]):e[t[0]]=[e[t[0]],t[1]]:e[t[0]]=t[1],e}),{})}return n}throw new i.TwilsockError("Incorrect URI: "+e)}(t),r={method:e,host:n.host,path:n.pathname};return n.params&&(r.params=n.params),r}t.Upstream=function(){function e(t,n,r){_classCallCheck(this,e),this.config=r,this.transport=t,this.pendingMessages=[],this.twilsock=n}var t;return _createClass(e,[{key:"saveMessage",value:function(e){var t=this;return new Promise((function(n,o){var s={message:e,resolve:n,reject:o,alreadyRejected:!1,timeout:setTimeout((function(){r.log.debug("request is timed out"),o(new i.TwilsockError("Twilsock: request timeout")),s.alreadyRejected=!0}),2e4)};t.pendingMessages.push(s)}))}},{key:"sendPendingMessages",value:function(){for(var e=this,t=function(){var t=e.pendingMessages[0];if(!t.alreadyRejected)try{e.actualSend(t.message).then((function(e){return t.resolve(e)})).catch((function(e){return t.reject(e)})),clearTimeout(t.timeout)}catch(n){return r.log.debug("Failed to send pending message",n),"break"}e.pendingMessages.splice(0,1)};this.pendingMessages.length;){if("break"===t())break}}},{key:"rejectPendingMessages",value:function(){var e=this;this.pendingMessages.forEach((function(t){t.reject(new a.TransportUnavailableError("Unable to connect: "+e.twilsock.getTerminationReason)),clearTimeout(t.timeout)})),this.pendingMessages.splice(0,this.pendingMessages.length)}},{key:"actualSend",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,a,u,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.to,r=t.headers,i=t.body,a=new s.Message(this.config.activeGrant,r["Content-Type"]||"application/json",{host:n.host,path:n.path,method:n.method,params:n.params,headers:r}),e.next=6,this.transport.sendWithReply(a,i);case 6:if(u=e.sent,!((c=u)&&c.header&&c.header.http_status)||(l=u.header.http_status.code)>=200&&l<300){e.next=9;break}throw new o.TwilsockUpstreamError(u.header.http_status.code,u.header.http_status.status,u.body);case 9:return e.abrupt("return",{status:u.header.http_status,headers:u.header.http_headers,body:u.body});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(this.twilsock.isTerminalState)return Promise.reject(new a.TransportUnavailableError("Unable to connect: "+this.twilsock.getTerminationReason));var i=function(e,t,n,r){return{to:u(e,t),headers:n,body:r}}(e,t,n,r);return this.twilsock.isConnected?this.actualSend(i):this.saveMessage(i)}}]),e}()},C5kU:function(e,t,n){"use strict";var r=n("GfoU")(!0);n("OTpG")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},C61u:function(e,t,n){e.exports=!n("S4vA")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},C9Jq:function(e,t,n){"use strict";var r=a(n("4d7F")),i=a(n("sk9p")),o=a(n("EJiy")),s=a(n("ql3t"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pureObject=t.nonNegativeInteger=t.nonEmptyString=t.stringifyReceivedType=t.custom=t.literal=t.type=t.asyncTypeCheck=t.typeCheck=t.runtimeTypeCheck=void 0;var u=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{mode:"type",checks:t}};t.type=u,t.literal=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{mode:"literal",checks:t}};var l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{mode:"custom",checks:t}};t.custom=l;var c=l((function(e){return["string"==typeof e&&e.length>0,"a non-empty string"]}));t.nonEmptyString=c;var d=l((function(e){return[(0,s.default)(e)&&e>=0,"a non-negative integer"]}));t.nonNegativeInteger=d;var f=l((function(e){return["object"===(void 0===e?"undefined":(0,o.default)(e))&&null!==e&&!Array.isArray(e),"a pure object (non-null and non-array)"]}));t.pureObject=f;var h=function(e,t,n){if(t.length>e.length)throw new Error("Expected at most "+e.length+" argument(s), but got "+t.length);for(;t.length<e.length;)t.push(void 0);t.forEach((function(t,r){var s=[],a=void 0,u=!1;if(e[r].forEach((function(e){switch(e.mode){case"type":e.checks.forEach((function(e){if("string"==typeof e)return u=u||(void 0===t?"undefined":(0,o.default)(t))===e,void s.push("of type "+e);u=u||t instanceof e,s.push("an instance of "+e.name)}));break;case"literal":e.checks.forEach((function(e){u=u||t===e,s.push("string"==typeof e?'"'+e+'"':""+e)}));break;case"custom":e.checks.forEach((function(e){var n=e(t),r=(0,i.default)(n,3),o=r[2];u=u||r[0],!a&&o&&(a=o),s.push(r[1])}))}})),!u){var l=a||p(t),c=n?" of "+n:"",d=s.length-1,f=d>0?s.slice(0,d).join(", ")+" or "+s[d]:s.join(", ");throw new Error("Argument "+(r+1)+c+" is expected to be "+f+(d>1?";":",")+" but got "+l)}}))};t.runtimeTypeCheck=h;var p=function(e){var t,n=void 0;["undefined","boolean","number","bigint","string"].includes(void 0===e?"undefined":(0,o.default)(e))&&(n="string"==typeof e?'"'+e+'"':""+e);var r=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name;return"object"===(void 0===e?"undefined":(0,o.default)(e))&&"Object"!==r&&(n=null===e?"null":"instance of "+r),n||(n=void 0===e?"undefined":(0,o.default)(e)),n};t.stringifyReceivedType=p,t.typeCheck=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=g(t);return function(e,t,n){if("function"!=typeof n.value)throw new Error("The typeCheck decorator can only be applied to methods");var i=n.value;n.value=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return h(r,t,i.name),i.apply(this,arguments)}}},t.asyncTypeCheck=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=g(t);return function(e,t,n){if("function"!=typeof n.value)throw new Error("The asyncTypeCheck decorator can only be applied to methods");var o=n.value;n.value=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];try{h(i,t,o.name)}catch(s){return r.default.reject(s)}return o.apply(this,arguments)}}};var g=function(e){var t=[];return e.forEach((function(e){var n=[];(Array.isArray(e)?e:[e]).forEach((function(e){["string","function"].includes(void 0===e?"undefined":(0,o.default)(e))?n.push(u(e)):n.push(e)})),t.push(n)})),t}},"CE4/":function(e,t,n){"use strict";var r=n("nAx8"),i=n("USwo"),o=n("CYMq"),s=n("xMGN"),a=n("bS86"),u=n("0WpP"),l=n("SkeG"),c=n("I90/");i(i.S+i.F*!n("h3Hq")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,d,f=o(e),h="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,v=void 0!==g,m=0,y=c(f);if(v&&(g=r(g,p>2?arguments[2]:void 0,2)),null==y||h==Array&&a(y))for(n=new h(t=u(f.length));t>m;m++)l(n,m,v?g(f[m],m):f[m]);else for(d=y.call(f),n=new h;!(i=d.next()).done;m++)l(n,m,v?s(d,g,[i.value,m],!0):i.value);return n.length=m,n}})},CFWb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwilsockImpl=t.TwilsockChannel=t.Response=void 0;var r=n("+qE3"),i=n("xDTo"),o=n("uShU"),s=n("w7D8"),a=n("CQrr"),u=n("L5mX"),l=n("ZgEp");t.Response=function(){return function e(){_classCallCheck(this,e)}}();var c=function(e){function t(e,n,r){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).terminalStates=["disconnected","rejected"],s.lastEmittedState=void 0,s.tokenExpiredSasCode=20104,s.terminationReason="Connection is not initialized",s.websocket=e,s.websocket.on("connected",(function(){return s.fsm.socketConnected()})),s.websocket.on("disconnected",(function(e){return s.fsm.socketClosed()})),s.websocket.on("message",(function(e){return s.onIncomingMessage(e)})),s.websocket.on("socketError",(function(e){return s.emit("connectionError",{terminal:!1,message:e.message,httpStatusCode:null,errorCode:null})})),s.transport=n,s.config=r,s.retrier=new l.BackoffRetrier(r.retryPolicy),s.retrier.on("attempt",(function(){return s.retry()})),s.retrier.on("failed",(function(e){o.log.warn("Retrying failed: ".concat(e.message)),s.disconnect()})),"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",(function(){o.log.debug("Browser reported connectivity state: online"),s.fsm.systemOnline()})),window.addEventListener("offline",(function(){o.log.debug("Browser reported connectivity state: offline"),s.websocket.close(),s.fsm.socketClosed()}))),s.fsm=new i({init:"disconnected",transitions:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"},{name:"userSend",from:["connected"],to:"connected"},{name:"systemOnline",from:["retrying"],to:"connecting"}],methods:{onConnecting:function(){s.setupSocket(),s.emit("connecting")},onEnterInitialising:function(){s.sendInit()},onLeaveInitialising:function(){s.cancelInit()},onEnterUpdating:function(){s.sendUpdate()},onLeaveUpdating:function(){s.cancelUpdate()},onEnterRetrying:function(){s.initRetry(),s.emit("connecting")},onEnterConnected:function(){s.resetBackoff(),s.onConnected()},onUserUpdateToken:function(){s.resetBackoff()},onTokenRejected:function(){s.resetBackoff(),s.closeSocket(!0),s.finalizeSocket()},onUserDisconnect:function(){s.closeSocket(!0)},onEnterDisconnecting:function(){s.startDisconnectTimer()},onLeaveDisconnecting:function(){s.cancelDisconnectTimer()},onEnterWaitSocketClosed:function(){s.startDisconnectTimer()},onLeaveWaitSocketClosed:function(){s.cancelDisconnectTimer()},onEnterWaitOffloadSocketClosed:function(){s.startDisconnectTimer()},onLeaveWaitOffloadSocketClosed:function(){s.cancelDisconnectTimer()},onDisconnected:function(){s.resetBackoff(),s.finalizeSocket()},onReceiveClose:function(e,t){s.onCloseReceived(t)},onReceiveOffload:function(e,t){o.log.debug("onreceiveoffload: ",t),s.modifyBackoff(t.body),s.onCloseReceived(t.status)},onUnsupported:function(){s.closeSocket(!0),s.finalizeSocket()},onError:function(e,t){s.closeSocket(t),s.finalizeSocket()},onEnterState:function(e){"none"!==e.from&&s.changeState(e)},onInvalidTransition:function(e,t,n){o.log.warn("FSM: unexpected transition",t,n)}}}),s}var n,r;return _inherits(t,e),_createClass(t,[{key:"changeState",value:function(e){o.log.debug("FSM: ".concat(e.transition,": ").concat(e.from," --\x3e ").concat(e.to)),this.lastEmittedState!==this.state&&(this.lastEmittedState=this.state,this.emit("stateChanged",this.state))}},{key:"resetBackoff",value:function(){o.log.trace("resetBackoff"),this.retrier.stop()}},{key:"modifyBackoff",value:function(e){o.log.trace("modifyBackoff",e);var t=e?e.backoff_policy:null;t&&"number"==typeof t.reconnect_min_ms&&this.retrier.modifyBackoff(t.reconnect_min_ms)}},{key:"startDisconnectTimer",value:function(){var e=this;o.log.trace("startDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null),this.disconnectingTimer=setTimeout((function(){o.log.debug("disconnecting is timed out"),e.closeSocket(!0)}),3e3)}},{key:"cancelDisconnectTimer",value:function(){o.log.trace("cancelDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null)}},{key:"initRetry",value:function(){o.log.debug("initRetry"),this.retrier.inProgress?this.retrier.attemptFailed():this.retrier.start()}},{key:"retry",value:function(){"connecting"!=this.fsm.state?(o.log.trace("retry"),this.websocket.close(),this.fsm.userRetry()):o.log.trace("can\t retry as already connecting")}},{key:"onConnected",value:function(){this.emit("connected")}},{key:"finalizeSocket",value:function(){o.log.trace("finalizeSocket"),this.websocket.close(),this.emit("disconnected"),this.disconnectedPromiseResolve&&(this.disconnectedPromiseResolve(),this.disconnectedPromiseResolve=null)}},{key:"setupSocket",value:function(){o.log.trace("setupSocket:",this.config.token),this.emit("beforeConnect"),this.websocket.connect()}},{key:"onIncomingMessage",value:function(e){var t=a.Parser.parse(e),n=t.method,r=t.header,i=t.payload;if("reply"!==n&&this.confirmReceiving(r),"notification"===n)this.emit("message",r.message_type,i);else if("reply"===r.method)this.transport.processReply({id:r.id,status:r.status,header:r,body:i});else if("client_update"===r.method)"token_about_to_expire"===r.client_update_type&&this.emit("tokenAboutToExpire");else if("close"===r.method)if(308===r.status.code)o.log.debug("Connection has been offloaded"),this.fsm.receiveOffload({status:r.status.status,body:i});else if(406===r.status.code){var s="Server closed connection because can't parse protocol: ".concat(JSON.stringify(r.status));this.emitReplyConnectionError(s,r,!0),o.log.error(s),this.fsm.receiveFatalClose()}else 417===r.status.code?(o.log.error("Server closed connection because can't parse client reply: ".concat(JSON.stringify(r.status))),this.fsm.receiveFatalClose(r.status.status)):410===r.status.code?(o.log.warn("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status),this.emit("tokenExpired")):401===r.status.code?(o.log.error("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status)):(o.log.warn("unexpected message: ",r.status),this.fsm.receiveOffload({status:r.status.status,body:null}))}},{key:"sendInit",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.log.trace("sendInit"),e.prev=1,this.emit("beforeSendInit"),e.next=5,this.transport.sendInit();case 5:t=e.sent,this.config.updateContinuationToken(t.continuationToken),this.config.confirmedCapabilities=t.confirmedCapabilities,this.fsm.initSuccess(t),this.emit("initialized",t),this.emit("tokenUpdated"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0 instanceof u.TwilsockReplyError?(n=!1,o.log.warn("Init rejected by server: ".concat(JSON.stringify(e.t0.reply.status))),this.emit("sendInitFailed"),401===e.t0.reply.status.code||403===e.t0.reply.status.code?(n=!0,this.fsm.tokenRejected(e.t0.reply.status),e.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===e.t0.reply.status.code?(this.modifyBackoff(e.t0.reply.body),this.fsm.initError(!0)):this.fsm.initError(500!==e.t0.reply.status.code),this.emitReplyConnectionError(e.t0.message,e.t0.reply,n)):(this.terminationReason=e.t0.message,this.emit("connectionError",{terminal:!0,message:e.t0.message,httpStatusCode:null,errorCode:null}),this.fsm.initError(!0)),this.emit("tokenUpdated",e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return r.apply(this,arguments)})},{key:"sendUpdate",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.log.trace("sendUpdate"),t=new s.Update(this.config.token),e.prev=2,e.next=5,this.transport.sendWithReply(t);case 5:n=e.sent,this.fsm.updateSuccess(n.body),this.emit("tokenUpdated"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0 instanceof u.TwilsockReplyError?(r=!1,o.log.warn("Token update rejected by server: ".concat(JSON.stringify(e.t0.reply.status))),401===e.t0.reply.status.code||403===e.t0.reply.status.code?(r=!0,this.fsm.tokenRejected(e.t0.reply.status),e.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===e.t0.reply.status.code?(this.modifyBackoff(e.t0.reply.body),this.fsm.updateError(e.t0.reply.status)):this.fsm.updateError(e.t0.reply.status),this.emitReplyConnectionError(e.t0.message,e.t0.reply,r)):(this.emit("error",!1,e.t0.message,null,null),this.fsm.updateError(e.t0)),this.emit("tokenUpdated",e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(){return n.apply(this,arguments)})},{key:"emitReplyConnectionError",value:function(e,t,n){var r=t.status&&t.status.description?t.status.description:e,i=t.status.code,o=t.status&&t.status.errorCode?t.status.errorCode:null;n&&(this.terminationReason=r),this.emit("connectionError",{terminal:n,message:r,httpStatusCode:i,errorCode:o})}},{key:"cancelInit",value:function(){o.log.trace("cancelInit")}},{key:"cancelUpdate",value:function(){o.log.trace("cancelUpdate")}},{key:"confirmReceiving",value:function(e){o.log.trace("confirmReceiving");try{this.transport.send(new s.Reply(e.id))}catch(t){o.log.debug("failed to confirm packet receiving",t)}}},{key:"closeSocket",value:function(e){var t=this;o.log.trace("closeSocket (graceful: ".concat(e,")")),e&&this.transport.isConnected&&this.transport.sendClose(),this.websocket.close(),setTimeout((function(){return t.fsm.socketClosed()}),0)}},{key:"connect",value:function(){o.log.trace("connect"),this.fsm.userConnect()}},{key:"disconnect",value:function(){var e=this;return o.log.trace("disconnect"),this.fsm.is("disconnected")?Promise.resolve():new Promise((function(t){e.disconnectedPromiseResolve=t,e.fsm.userDisconnect()}))}},{key:"updateToken",value:function(e){var t=this;return o.log.trace("updateToken:",e),new Promise((function(e,n){t.once("tokenUpdated",(function(t){t?n(t):e()})),t.fsm.userUpdateToken()}))}},{key:"onCloseReceived",value:function(e){this.websocket.close()}},{key:"isConnected",get:function(){return"connected"===this.state&&this.websocket.isConnected}},{key:"state",get:function(){switch(this.fsm.state){case"connecting":case"initialising":case"retrying":case"error":return"connecting";case"updating":case"connected":return"connected";case"rejected":return"rejected";case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return"disconnecting";case"disconnected":default:return"disconnected"}}},{key:"isTerminalState",get:function(){return-1!==this.terminalStates.indexOf(this.fsm.state)}},{key:"getTerminationReason",get:function(){return this.terminationReason}}]),t}(r.EventEmitter);t.TwilsockChannel=c,t.TwilsockImpl=c},CQrr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var r=n("uShU");function i(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})).length}function o(e){var t=Array.prototype.map.call(e,(function(e){return String.fromCharCode(e)})).join("").replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}));return decodeURIComponent(t)}function s(e){return JSON.parse(o(e))}t.Parser=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"parse",value:function(e){var t=new Uint8Array(e),n=function(e){for(var t="",n=0;n<e.length;++n){var r=String.fromCharCode(e[n]);if(t+=r,"\r"===r){n+=2;break}}var i=t.split(" ");return{size:n,protocol:i[0],version:i[1],headerSize:Number(i[2])}}(t);if("TWILSOCK"===n.protocol&&"V3.0"===n.version){var i=null;try{i=s(t.subarray(n.size,n.size+n.headerSize))}catch(c){return void r.log.error("failed to parse message header",c,e)}r.log.debug("message received: ",i.method),r.log.trace("message received: ",i);var a=null;if(i.payload_size>0){var u=2+n.size+n.headerSize,l=i.payload_size;if(i.hasOwnProperty("payload_type")&&0!==i.payload_type.indexOf("application/json"))0===i.payload_type.indexOf("text/plain")&&(a=o(t.subarray(u,u+l)));else try{a=s(t.subarray(u,u+l))}catch(c){return void r.log.error("failed to parse message body",c,e)}}return{method:i.method,header:i,payload:a}}r.log.error("unsupported protocol: ".concat(n.protocol," ver ").concat(n.version))}},{key:"createPacket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.payload_size=i(t);var n,o,s,a=JSON.stringify(e)+"\r\n",u="TWILSOCK V3.0 "+(i(a)-2)+"\r\n";return r.log.debug("send request:",u+a+t),(n=u+a+t,o=encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})),s=new Uint8Array(o.length),Array.prototype.forEach.call(o,(function(e,t){s[t]=e.charCodeAt(0)})),s).buffer}}]),e}()},CYMq:function(e,t,n){var r=n("yQFZ");e.exports=function(e){return Object(r(e))}},Cjvl:function(e,t,n){"use strict";var r=a(n("14Xm")),i=a(n("D3Ub")),o=a(n("iCc5")),s=a(n("V7oC"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserChannels=void 0;var u=n("iqZd"),l=n("IMt4"),c=n("k1+U"),d=function(){function e(t,n,r){(0,o.default)(this,e),this.client=t,this.services=n,this.url=r}var t;return(0,s.default)(e,[{key:"getChannels",value:(t=(0,i.default)(r.default.mark((function e(){var t,n,i=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new u.UriBuilder(this.url).arg("PageToken",o.pageToken).build(),e.next=3,this.services.network.get(t);case 3:return e.abrupt("return",new l.RestPaginator((n=e.sent).body.channels.map((function(e){return new c.ChannelDescriptor(i.client,e)})),(function(e){return i.getChannels({pageToken:e})}),n.body.meta.previous_token,n.body.meta.next_token));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();t.UserChannels=d},CruZ:function(e,t,n){"use strict";var r,i=(r=n("iCc5"))&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0}),t.PushNotification=void 0,t.PushNotification=function e(t){(0,i.default)(this,e),this.title=t.title||null,this.body=t.body||null,this.sound=t.sound||null,this.badge=t.badge||null,this.action=t.action||null,this.type=t.type||null,this.data=t.data||{}}},CuL1:function(e,t,n){var r=n("mHY4"),i=n("/tXR"),o=n("GRew");e.exports=function(e){var t=r(e),n=i.f;if(n)for(var s,a=n(e),u=o.f,l=0;a.length>l;)u.call(e,s=a[l++])&&t.push(s);return t}},D0ik:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0,t.Configuration=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e);var r=n.notifications||{};this.registrarUrl=r.ersUrl||"https://ers.".concat(r.region||n.region||"us1",".twilio.com/v1/registrations"),this._token=t}return _createClass(e,[{key:"updateToken",value:function(e){this._token=e}},{key:"token",get:function(){return this._token}}]),e}()},D3Ub:function(e,t,n){"use strict";t.__esModule=!0;var r,i=(r=n("4d7F"))&&r.__esModule?r:{default:r};t.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default((function(e,n){return function r(o,s){try{var a=t[o](s),u=a.value}catch(l){return void n(l)}if(!a.done)return i.default.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}},DQkm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Update=void 0;var r=n("PmLG");t.Update=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).method="update",n.token=e,n}return _inherits(t,e),t}(r.AbstractMessage)},DrT7:function(e,t,n){var r=n("ekG2"),i=n("d+lc"),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n("nAx8")(Function.call,n("TSC6").f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},ECU5:function(e,t,n){"use strict";var r=n("8Y7J"),i=function e(){_classCallCheck(this,e)},o=r.xb({encapsulation:0,styles:[[".empty-state-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%;height:100%}.empty-state-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-bottom:24px}.empty-state-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:22px;font-size:24px;line-height:32px;font-weight:500}"]],data:{}});function s(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,5,"div",[["class","empty-state-container"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,0,"img",[["alt",""],["src","assets/images/icons/icon-no-reservations.svg"]],null,null,null,null,null)),(e()(),r.zb(2,0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),r.Xb(3,null,["",""])),(e()(),r.zb(4,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(5,null,["",""]))],null,(function(e,t){var n=t.component;e(t,3,0,n.header),e(t,5,0,n.subtitle)}))}var a=n("B0QU"),u=n("SVse"),l=r.xb({encapsulation:2,styles:[],data:{}});function c(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,2,":svg:linearGradient",[],[[1,"id",0]],null,null,null,null)),(e()(),r.zb(1,0,null,null,0,":svg:stop",[["offset","5%"]],[[1,"stop-color",0],[1,"stop-opacity",0]],null,null,null,null)),(e()(),r.zb(2,0,null,null,0,":svg:stop",[["offset","95%"]],[[1,"stop-color",0],[1,"stop-opacity",0]],null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,n.svg.outerLinearGradient.id),e(t,1,0,n.svg.outerLinearGradient.colorStop1,1),e(t,2,0,n.svg.outerLinearGradient.colorStop2,1)}))}function d(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,2,":svg:radialGradient",[],[[1,"id",0]],null,null,null,null)),(e()(),r.zb(1,0,null,null,0,":svg:stop",[["offset","5%"]],[[1,"stop-color",0],[1,"stop-opacity",0]],null,null,null,null)),(e()(),r.zb(2,0,null,null,0,":svg:stop",[["offset","95%"]],[[1,"stop-color",0],[1,"stop-opacity",0]],null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,n.svg.radialGradient.id),e(t,1,0,n.svg.radialGradient.colorStop1,1),e(t,2,0,n.svg.radialGradient.colorStop2,1)}))}function f(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,0,":svg:circle",[],[[1,"cx",0],[1,"cy",0],[1,"r",0],[1,"fill",0],[1,"fill-opacity",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,n.svg.backgroundCircle.cx,n.svg.backgroundCircle.cy,n.svg.backgroundCircle.r,n.svg.backgroundCircle.fill,n.svg.backgroundCircle.fillOpacity,n.svg.backgroundCircle.stroke,n.svg.backgroundCircle.strokeWidth)}))}function h(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,0,":svg:circle",[],[[1,"cx",0],[1,"cy",0],[1,"r",0],[1,"fill",0],[1,"fill-opacity",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,n.svg.backgroundCircle.cx,n.svg.backgroundCircle.cy,n.svg.backgroundCircle.r,r.Gb(1,"url(#",n.svg.radialGradient.id,")"),n.svg.backgroundCircle.fillOpacity,n.svg.backgroundCircle.stroke,n.svg.backgroundCircle.strokeWidth)}))}function p(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,f)),r.yb(2,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,h)),r.yb(4,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,!n.options.backgroundGradient),e(t,4,0,n.options.backgroundGradient)}),null)}function g(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,0,":svg:circle",[],[[1,"cx",0],[1,"cy",0],[1,"r",0],[1,"fill",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,n.svg.circle.cx,n.svg.circle.cy,n.svg.circle.r,n.svg.circle.fill,n.svg.circle.stroke,n.svg.circle.strokeWidth)}))}function v(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,0,":svg:path",[],[[1,"d",0],[1,"stroke",0],[1,"stroke-width",0],[1,"stroke-linecap",0],[1,"fill",0]],null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,n.svg.path.d,n.svg.path.stroke,n.svg.path.strokeWidth,n.svg.path.strokeLinecap,n.svg.path.fill)}))}function m(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,0,":svg:path",[],[[1,"d",0],[1,"stroke",0],[1,"stroke-width",0],[1,"stroke-linecap",0],[1,"fill",0]],null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,n.svg.path.d,r.Gb(1,"url(#",n.svg.outerLinearGradient.id,")"),n.svg.path.strokeWidth,n.svg.path.strokeLinecap,n.svg.path.fill)}))}function y(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,v)),r.yb(2,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,m)),r.yb(4,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,!n.options.outerStrokeGradient),e(t,4,0,n.options.outerStrokeGradient)}),null)}function b(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,":svg:tspan",[],[[1,"x",0],[1,"y",0],[1,"dy",0],[1,"font-size",0],[1,"font-weight",0],[1,"fill",0]],null,null,null,null)),(e()(),r.Xb(1,null,["",""]))],null,(function(e,t){var n=t.component;e(t,0,0,n.svg.title.x,n.svg.title.y,t.context.$implicit.dy,n.svg.title.fontSize,n.svg.title.fontWeight,n.svg.title.color),e(t,1,0,t.context.$implicit.span)}))}function k(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,b)),r.yb(2,278528,null,0,u.l,[r.R,r.N,r.t],{ngForOf:[0,"ngForOf"]},null),(e()(),r.jb(0,null,null,0))],(function(e,t){e(t,2,0,t.component.svg.title.tspans)}),null)}function _(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,":svg:tspan",[],[[1,"font-size",0],[1,"font-weight",0],[1,"fill",0]],null,null,null,null)),(e()(),r.Xb(1,null,["",""]))],null,(function(e,t){var n=t.component;e(t,0,0,n.svg.units.fontSize,n.svg.units.fontWeight,n.svg.units.color),e(t,1,0,n.svg.units.text)}))}function C(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,":svg:tspan",[],[[1,"x",0],[1,"y",0],[1,"dy",0],[1,"font-size",0],[1,"font-weight",0],[1,"fill",0]],null,null,null,null)),(e()(),r.Xb(1,null,["",""]))],null,(function(e,t){var n=t.component;e(t,0,0,n.svg.subtitle.x,n.svg.subtitle.y,t.context.$implicit.dy,n.svg.subtitle.fontSize,n.svg.subtitle.fontWeight,n.svg.subtitle.color),e(t,1,0,t.context.$implicit.span)}))}function w(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,C)),r.yb(2,278528,null,0,u.l,[r.R,r.N,r.t],{ngForOf:[0,"ngForOf"]},null),(e()(),r.jb(0,null,null,0))],(function(e,t){e(t,2,0,t.component.svg.subtitle.tspans)}),null)}function x(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,6,":svg:text",[["alignment-baseline","baseline"]],[[1,"x",0],[1,"y",0],[1,"text-anchor",0]],null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,k)),r.yb(2,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,_)),r.yb(4,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,w)),r.yb(6,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.options.showTitle),e(t,4,0,n.options.showUnits),e(t,6,0,n.options.showSubtitle)}),(function(e,t){var n=t.component;e(t,0,0,n.svg.circle.cx,n.svg.circle.cy,n.svg.title.textAnchor)}))}function O(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,0,":svg:image",[["preserveAspectRatio","none"]],[[1,"height",0],[1,"width",0],[1,":xlink:href",0],[1,"x",0],[1,"y",0]],null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,n.svg.image.height,n.svg.image.width,n.svg.image.src,n.svg.image.x,n.svg.image.y)}))}function S(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,15,":svg:svg",[["preserveAspectRatio","xMidYMid meet"],["xmlns","http://www.w3.org/2000/svg"]],[[1,"viewBox",0],[1,"height",0],[1,"width",0],[1,"class",0]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.emitClickEvent(n)&&r),r}),null,null)),(e()(),r.zb(1,0,null,null,4,":svg:defs",[],null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,c)),r.yb(3,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,d)),r.yb(5,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,p)),r.yb(7,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,g)),r.yb(9,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,y)),r.yb(11,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,x)),r.yb(13,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,O)),r.yb(15,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,3,0,n.options.outerStrokeGradient),e(t,5,0,n.options.backgroundGradient),e(t,7,0,n.options.showBackground),e(t,9,0,n.options.showInnerStroke),e(t,11,0,n.options.percent-0!=0||n.options.showZeroOuterStroke),e(t,13,0,!n.options.showImage&&(n.options.showTitle||n.options.showUnits||n.options.showSubtitle)),e(t,15,0,n.options.showImage)}),(function(e,t){var n=t.component;e(t,0,0,n.svg.viewBox,n.svg.height,n.svg.width,n.options.class)}))}function P(e){return r.ac(0,[(e()(),r.jb(16777216,null,null,1,null,S)),r.yb(1,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,t.component.svg)}),null)}var M=n("wd/R"),T=function(){function e(){_classCallCheck(this,e),this.expiresAt=0,this.timeHasExpired=new r.o,this.secondsToExpiration=0,this.secondsAsCompleteTime=600}return _createClass(e,[{key:"ngOnInit",value:function(){this.initTimer()}},{key:"initTimer",value:function(){var e=this,t=setInterval((function(){var n=M(e.expiresAt),r=M();if(n.isAfter(r)){var i=M.duration(n.diff(r));e.secondsToExpiration=i.asSeconds(),e.secondsToExpiration<=0&&(clearInterval(t),e.secondsToExpiration=0,e.timeHasExpired.emit(e.reservationId))}else clearInterval(t),e.secondsToExpiration=0,e.timeHasExpired.emit(e.reservationId)}),1e3)}},{key:"timeToExpire",get:function(){var e=Math.floor(this.secondsToExpiration/60);return("00"+e).slice(-2)+":"+("00"+Math.floor(this.secondsToExpiration-60*e)).slice(-2)}},{key:"percent",get:function(){return Math.floor(100*this.secondsToExpiration/this.secondsAsCompleteTime)}},{key:"progressColor",get:function(){return this.percent>50?"#35B24D":this.percent>25?"#F2A412":"#571B15"}}]),e}(),R=r.xb({encapsulation:2,styles:[],data:{}});function E(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"circle-progress",[],null,null,null,P,l)),r.yb(1,770048,null,0,a.a,[a.b,r.l,u.d],{backgroundColor:[0,"backgroundColor"],backgroundPadding:[1,"backgroundPadding"],radius:[2,"radius"],space:[3,"space"],percent:[4,"percent"],outerStrokeWidth:[5,"outerStrokeWidth"],outerStrokeColor:[6,"outerStrokeColor"],outerStrokeLinecap:[7,"outerStrokeLinecap"],innerStrokeColor:[8,"innerStrokeColor"],innerStrokeWidth:[9,"innerStrokeWidth"],title:[10,"title"],titleFontSize:[11,"titleFontSize"],animation:[12,"animation"],showTitle:[13,"showTitle"],showSubtitle:[14,"showSubtitle"],showUnits:[15,"showUnits"],showInnerStroke:[16,"showInnerStroke"],showZeroOuterStroke:[17,"showZeroOuterStroke"]},null)],(function(e,t){var n=t.component;e(t,1,1,["transparent",0,19,-3,n.percent,3,n.progressColor,"square","#E1E1E1",3,n.timeToExpire,10,!1,!0,!1,!1,!0,!1])}),null)}var I,j=n("1Xc+"),N=n("Dxy4"),A=n("YEUz"),U=n("omvX"),D=n("s7LF"),L=n("3Y8D"),F=n("iFvM"),z=function(){function e(t,n,i){var o=this;_classCallCheck(this,e),this.fb=t,this.chatService=n,this.snackBar=i,this.closeClicked=new r.o,this.startingChat=!0,this.form=this.fb.group({message:new D.h("",[D.x.required])}),this.messages=[],this.messageSound=F.a,this.playSoundMessages=function(){o.messageSound.loop(!1),o.messageSound.play(),o.messageSound.volume(1)}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.chatService.createReservationChat(this.reservationId).subscribe((function(){e.chatService.getChatAccessToken().subscribe((function(t){e.staffEmail=t.identity,L.Client.create(t.token).then((function(t){t.getChannelByUniqueName("rsv"+e.reservationId).then((function(t){e.currentChannel=t,e.getMessagesHistory(),e.initMessagesListener(),e.startingChat=!1})).catch((function(){e.errorCatchedWithChat()}))})).catch((function(){e.errorCatchedWithChat()}))}))}))}},{key:"ngOnDestroy",value:function(){this.currentChannel.removeAllListeners("messageAdded")}},{key:"getMessagesHistory",value:function(){var e=this;this.currentChannel.getMessages().then((function(t){e.messages=t.items}))}},{key:"initMessagesListener",value:function(){var e=this;this.currentChannel.on("messageAdded",(function(t){e.staffEmail!==t.author&&e.playSoundMessages(),e.messages.push(t)}))}},{key:"sendMessage",value:function(){if(this.form.valid){var e=this.form.get("message").value;this.form.get("message").setValue(""),this.currentChannel.sendMessage(e)}}},{key:"errorCatchedWithChat",value:function(){this.snackBar.open("Ocurri\xf3 un error tratando de conectar el chat","Entendido",{duration:15e3}),this.emitCloseAction()}},{key:"emitCloseAction",value:function(){this.closeClicked.emit()}},{key:"clientInitials",get:function(){var e="";if(this.clientName){var t=this.clientName.split(" ");e=1===t.length?t[0].slice(0,1):t[0].slice(0,1)+t[1].slice(0,1)}return e}}]),e}(),q=n("AytR"),B=n("IheW"),G=((I=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"createReservationChat",value:function(e){var t=q.a.RESERVATION_CHAT.replace("{reservationId}",e.toString());return this.http.post(t,null)}},{key:"getChatAccessToken",value:function(){return this.http.get(q.a.CHAT_ACCESS_TOKEN+"?type=web")}}]),e}()).\u0275prov=r.bc({factory:function(){return new I(r.cc(B.c))},token:I,providedIn:"root"}),I),W=n("zHaW"),V=r.xb({encapsulation:0,styles:[["section[_ngcontent-%COMP%]{position:fixed;right:32px;bottom:32px;border:1px solid #f2f2f2;border-radius:8px;width:360px;height:440px;box-shadow:0 0 8px 0 rgba(0,0,0,.04)}section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;border-radius:8px 8px 0 0;padding:0 16px;height:54px;background-color:#f2a412}section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:calc(100% - 24px);font-size:16px;color:#fff;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;width:24px;height:24px;cursor:pointer}section[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:8px}section[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]{padding:24px 16px;height:336px;overflow:auto;background-color:#fff}section[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:nth-child(n+2){margin-top:12px}section[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message.user-staff[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}section[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message.user-staff[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%]   .client-initials[_ngcontent-%COMP%]{display:none}section[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message.user-staff[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{background-color:#fbfbfb}section[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message.user-staff[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{text-align:right}section[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message.user-client[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:end;align-items:flex-end}section[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message.user-client[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%]   .client-initials[_ngcontent-%COMP%]{margin:0 8px 4px 0}section[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message.user-client[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{max-width:calc(100% - 40px);background-color:#dbeaef}section[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%]   .client-initials[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;border-radius:100%;height:32px;width:32px;background-color:#3c3c3c;line-height:1;font-size:10px;color:#fff}section[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-info[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:inline-block;border-radius:8px;padding:12px 16px;line-height:18px;font-size:14px;color:#3c3c3c}section[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{margin-top:4px;line-height:18px;font-size:10px;color:#a8a8a8}section[_ngcontent-%COMP%]   .text-field[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;border:1px solid #f2f2f2;border-radius:0 0 8px 8px;height:50px;background-color:#fbfbfb}section[_ngcontent-%COMP%]   .text-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;padding-left:16px;width:calc(100% - 52px);height:100%;background-color:transparent;font-size:14px;color:#7a7a7a}section[_ngcontent-%COMP%]   .text-field[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:14px;border:none;width:26px;height:24px;background-color:transparent;background-image:url(/assets/images/icons/send.svg);background-position:50%;background-repeat:no-repeat;background-size:cover;cursor:pointer}"]],data:{}});function X(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"div",[["class","client-initials"]],null,null,null,null,null)),(e()(),r.Xb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.clientInitials)}))}function J(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,7,"div",[["class","message user-staff"]],null,null,null,null,null)),r.yb(1,278528,null,0,u.k,[r.t,r.u,r.l,r.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Qb(2,{"user-staff":0,"user-client":1}),(e()(),r.zb(3,0,null,null,4,"div",[["class","message-info"]],null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,X)),r.yb(5,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.zb(6,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(e()(),r.Xb(7,null,[" "," "]))],(function(e,t){var n=t.component,r=e(t,2,0,n.staffEmail===t.context.$implicit.author,n.staffEmail!==t.context.$implicit.author);e(t,1,0,"message user-staff",r),e(t,5,0,n.staffEmail!==t.context.$implicit.author)}),(function(e,t){e(t,7,0,t.context.$implicit.body)}))}function H(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,20,"section",[],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,4,"div",[["class","header"]],null,null,null,null,null)),(e()(),r.zb(2,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(3,null,["Reserva ",""])),(e()(),r.zb(4,0,null,null,1,"div",[["class","close"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.emitCloseAction()&&r),r}),null,null)),(e()(),r.zb(5,0,null,null,0,"img",[["src","assets/images/icons/icon-reject.svg"]],null,null,null,null,null)),(e()(),r.zb(6,0,null,null,2,"div",[["class","messages-container"]],null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,J)),r.yb(8,278528,null,0,u.l,[r.R,r.N,r.t],{ngForOf:[0,"ngForOf"]},null),(e()(),r.zb(9,0,null,null,11,"form",[["class","text-field"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(e,t,n){var i=!0,o=e.component;return"submit"===t&&(i=!1!==r.Ob(e,11).onSubmit(n)&&i),"reset"===t&&(i=!1!==r.Ob(e,11).onReset()&&i),"ngSubmit"===t&&(i=!1!==o.sendMessage()&&i),i}),null,null)),r.yb(10,16384,null,0,D.B,[],null,null),r.yb(11,540672,null,0,D.l,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Sb(2048,null,D.c,null,[D.l]),r.yb(13,16384,null,0,D.t,[[4,D.c]],null,null),(e()(),r.zb(14,0,null,null,5,"input",[["formControlName","message"],["placeholder","Escribe tu mensaje..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==r.Ob(e,15)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==r.Ob(e,15).onTouched()&&i),"compositionstart"===t&&(i=!1!==r.Ob(e,15)._compositionStart()&&i),"compositionend"===t&&(i=!1!==r.Ob(e,15)._compositionEnd(n.target.value)&&i),i}),null,null)),r.yb(15,16384,null,0,D.d,[r.F,r.l,[2,D.a]],null,null),r.Sb(1024,null,D.q,(function(e){return[e]}),[D.d]),r.yb(17,671744,null,0,D.j,[[3,D.c],[8,null],[8,null],[6,D.q],[2,D.A]],{name:[0,"name"]},null),r.Sb(2048,null,D.r,null,[D.j]),r.yb(19,16384,null,0,D.s,[[4,D.r]],null,null),(e()(),r.zb(20,0,null,null,0,"button",[["type","submit"]],null,null,null,null,null))],(function(e,t){var n=t.component;e(t,8,0,n.messages),e(t,11,0,n.form),e(t,17,0,"message")}),(function(e,t){e(t,3,0,t.component.reservationCode),e(t,9,0,r.Ob(t,13).ngClassUntouched,r.Ob(t,13).ngClassTouched,r.Ob(t,13).ngClassPristine,r.Ob(t,13).ngClassDirty,r.Ob(t,13).ngClassValid,r.Ob(t,13).ngClassInvalid,r.Ob(t,13).ngClassPending),e(t,14,0,r.Ob(t,19).ngClassUntouched,r.Ob(t,19).ngClassTouched,r.Ob(t,19).ngClassPristine,r.Ob(t,19).ngClassDirty,r.Ob(t,19).ngClassValid,r.Ob(t,19).ngClassInvalid,r.Ob(t,19).ngClassPending)}))}function K(e){return r.ac(0,[(e()(),r.jb(16777216,null,null,1,null,H)),r.yb(1,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,!t.component.startingChat)}),null)}var Y=n("N7/N"),Q=n("kMt3"),Z=n("quSY"),$=function(){function e(t,n,i,o){_classCallCheck(this,e),this.reservationsService=t,this.snackBar=n,this.dialog=i,this.reservationService=o,this.reservationCancelled=new r.o,this.reservationAccepted=new r.o,this.dishesChanged=new r.o,this.reservationClosed=new r.o,this.afterModalClosesSubscription=Z.a.EMPTY}return _createClass(e,[{key:"getTotalAmountPerDiner",value:function(e){var t=0,n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a.price_in_cents&&(t+=a.amount*a.price_in_cents)}}catch(u){r=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return t/100}},{key:"onReservationConfirmation",value:function(){var e=this;"pending"===this.reservation.status?this.reservationsService.confirmReservation(this.reservation.id).subscribe((function(){e.openSnackBar("Aceptaste la solicitud","Entendido"),e.reservationAccepted.emit()})):"checkout"===this.reservation.status&&this.reservationsService.confirmOrder(this.reservation.id).subscribe((function(){e.openSnackBar("Aceptaste la solicitud de \xf3rdenes","Entendido"),setTimeout((function(){e.reservationAccepted.emit()}),2e3)})),Object(F.c)()}},{key:"onReservationCancellation",value:function(){var e=this,t=this.dialog.open(Y.a,{width:"540px",data:{reservationId:this.reservation.id}});this.afterModalClosesSubscription=t.afterClosed().subscribe((function(t){e.afterModalClosesSubscription.unsubscribe(),t&&e.reservationCancelled.emit()})),Object(F.c)()}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:2e3})}},{key:"handleAddDish",value:function(e){var t=this,n=this.dialog.open(Q.a,{width:"680px",height:"800px",panelClass:"no-padding",data:{orderId:e}});this.afterModalClosesSubscription=n.afterClosed().subscribe((function(e){e&&t.dishesChanged.emit(t.reservation.id)}))}},{key:"removeDishFromOrder",value:function(e,t){var n=this;this.reservationService.removeDishFromOrder(e,t).subscribe((function(){n.dishesChanged.emit(n.reservation.id)}))}},{key:"chatClickHandler",value:function(){this.reservationIdForChat=this.reservation.id}},{key:"closeChat",value:function(){this.reservationIdForChat=void 0}},{key:"closeReservation",value:function(e){var t=this;this.reservationService.closeReservation(this.reservation.id,e).subscribe((function(){t.reservationClosed.emit()}))}},{key:"getRatingStars",value:function(e){for(var t="",n=0;n<e;n++)t+=" &#9733;";return t}},{key:"total",get:function(){var e=0,t=!0,n=!1,r=void 0;try{for(var i,o=this.reservation.orders[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;s.total_in_cents&&(e+=s.total_in_cents)}}catch(a){n=!0,r=a}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e/100}}]),e}(),ee=n("fx7b"),te=n("iELJ"),ne=n("6fQM"),re=r.xb({encapsulation:0,styles:[[".reservation-header[_ngcontent-%COMP%]{position:relative;margin-bottom:16px;border:1px solid #f2f2f2;border-radius:4px;padding:24px;background-color:#fbfbfb}.reservation-header[_ngcontent-%COMP%]   .info-containers[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding-bottom:24px}.reservation-header[_ngcontent-%COMP%]   .info-containers[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]:nth-child(n+2){margin-left:40px}.reservation-header[_ngcontent-%COMP%]   .info-containers[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:center;align-items:center}.reservation-header[_ngcontent-%COMP%]   .info-containers[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]:nth-child(n+2){margin-top:16px}.reservation-header[_ngcontent-%COMP%]   .info-containers[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;max-height:18px}.reservation-header[_ngcontent-%COMP%]   .info-containers[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:12px;margin-bottom:0;color:#444;font-weight:500;white-space:nowrap}.reservation-header[_ngcontent-%COMP%]   .info-containers[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   p.date[_ngcontent-%COMP%]{text-transform:capitalize}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;border-top:1px solid #f2f2f2;padding-top:24px;width:100%}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]{margin-right:50px}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance[_ngcontent-%COMP%]:nth-child(n+2), .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]:nth-child(n+2), .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]:nth-child(n+2){border-left:1px solid #f2f2f2;padding-left:40px}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance.rating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance.tips[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating.rating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating.tips[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips.rating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips.tips[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-transform:none}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance.rating[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance.tips[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating.rating[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating.tips[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips.rating[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips.tips[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:5px;color:#7a7a7a;font-size:30px}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#f2a412;text-transform:uppercase;font-weight:400;font-family:SF-UI}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:34px;font-weight:300;line-height:40px;display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;font-family:SF-UI}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:10px;line-height:normal}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:-webkit-box;display:flex;margin-top:8px}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{font-size:32px;color:#f2a412}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]:nth-child(n+2), .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]:nth-child(n+2), .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]:nth-child(n+2){margin-left:5px}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .balance[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]   .fill-star[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]   .fill-star[_ngcontent-%COMP%], .reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .tips[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]   .fill-star[_ngcontent-%COMP%]{font-size:32px;color:#e1e1e1}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .cta-section[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:center;align-items:center;width:100%}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .cta-section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:40px;text-align:center}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .cta-section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:70px;height:70px}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .cta-section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span.mat-button-wrapper[_ngcontent-%COMP%]{padding:23px 0}.reservation-header[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   .cta-section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{color:#7a7a7a}.reservation-comments[_ngcontent-%COMP%]{margin-top:16px;border-radius:4px;border:1px solid #f2f2f2;padding:20px 28px;background-color:#fbfbfb}.reservation-comments[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#444;line-height:22px}.reservation-comments[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:4px;font-size:16px;font-style:italic;color:#7a7a7a;line-height:24px}.reservation-body[_ngcontent-%COMP%]{display:-webkit-box;display:flex;margin-top:16px;padding-bottom:16px;width:100%;overflow-x:auto}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]{border:1px solid #f2f2f2;border-radius:4px;min-width:318px;background-color:#fbfbfb;box-sizing:border-box}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]:nth-child(n+2){margin-left:16px}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .name-container[_ngcontent-%COMP%]{padding:20px 20px 16px}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .name-container[_ngcontent-%COMP%]   .commensal-number[_ngcontent-%COMP%]{font-size:12px;line-height:18px;color:#7a7a7a}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .name-container[_ngcontent-%COMP%]   .commensal-name[_ngcontent-%COMP%]{line-height:26px;font-size:16px;color:#3c3c3c}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .separation[_ngcontent-%COMP%]{width:calc(100% - 40px);margin:0 auto;height:1px;background-color:#f2f2f2}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .dishes-container[_ngcontent-%COMP%]{padding:16px 24px;height:316px;overflow:auto}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .dishes-container[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]:nth-child(n+2){margin-top:12px}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .dishes-container[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .dishes-container[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:start;justify-content:flex-start}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .dishes-container[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#444}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .dishes-container[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{width:24px}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .dishes-container[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;-webkit-box-align:center;align-items:center}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .dishes-container[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#444}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .dishes-container[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;margin-left:8px;cursor:pointer}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .dishes-container[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .ingredients-container[_ngcontent-%COMP%]{margin-top:2px}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .dishes-container[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .ingredients-container[_ngcontent-%COMP%]   .ingredient[_ngcontent-%COMP%]{padding-left:24px;font-size:14px;font-weight:300;line-height:22px}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .dishes-container[_ngcontent-%COMP%]   .dish[_ngcontent-%COMP%]   .instructions[_ngcontent-%COMP%]{font-size:11px;color:#a8a8a8;padding-left:24px}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .add-dish-and-total[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;border-top:1px solid #f2f2f2;padding:16px 40px 24px 22px}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .add-dish-and-total.contains-add-dish-option[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .add-dish-and-total[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:14px;color:#f2a412;cursor:pointer}.reservation-body[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   .add-dish-and-total[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{font-size:16px;color:#3c3c3c}"]],data:{}});function ie(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,7,"div",[["class","balance"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Total "])),(e()(),r.zb(3,0,null,null,4,"h2",[],null,null,null,null,null)),(e()(),r.Xb(4,null,[" "," "])),r.Rb(5,2),(e()(),r.zb(6,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["MXN"]))],null,(function(e,t){var n=t.component,i=r.Yb(t,4,0,e(t,5,0,r.Ob(t.parent,0),n.total,"MXN"));e(t,4,0,i)}))}function oe(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,2,"button",[["class","big accept"],["mat-fab",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.onReservationConfirmation()&&r),r}),j.b,j.a)),r.yb(2,180224,null,0,N.b,[r.l,A.g,[2,U.a]],null,null),(e()(),r.zb(3,0,null,0,0,"img",[["alt",""],["height","24px"],["src","assets/images/icons/icon-accept.svg"]],null,null,null,null,null)),(e()(),r.zb(4,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Aceptar"]))],null,(function(e,t){e(t,1,0,r.Ob(t,2).disabled||null,"NoopAnimations"===r.Ob(t,2)._animationMode)}))}function se(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,2,"button",[["class","big"],["color","primary"],["mat-fab",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.chatClickHandler({assisted:!0})&&r),r}),j.b,j.a)),r.yb(2,180224,null,0,N.b,[r.l,A.g,[2,U.a]],{color:[0,"color"]},null),(e()(),r.zb(3,0,null,0,0,"img",[["alt",""],["height","24px"],["src","assets/images/icons/icon-chat.svg"]],null,null,null,null,null)),(e()(),r.zb(4,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Chat"]))],(function(e,t){e(t,2,0,"primary")}),(function(e,t){e(t,1,0,r.Ob(t,2).disabled||null,"NoopAnimations"===r.Ob(t,2)._animationMode)}))}function ae(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,10,"div",[["class","cta-section"]],null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,oe)),r.yb(2,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.zb(3,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),r.zb(4,0,null,null,2,"button",[["class","big"],["color","warn"],["mat-fab",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.onReservationCancellation()&&r),r}),j.b,j.a)),r.yb(5,180224,null,0,N.b,[r.l,A.g,[2,U.a]],{color:[0,"color"]},null),(e()(),r.zb(6,0,null,0,0,"img",[["alt",""],["height","24px"],["src","assets/images/icons/icon-reject.svg"]],null,null,null,null,null)),(e()(),r.zb(7,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Rechazar"])),(e()(),r.jb(16777216,null,null,1,null,se)),r.yb(10,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,"pending"===n.reservation.status||"checkout"===n.reservation.status),e(t,5,0,"warn"),e(t,10,0,"active"===n.reservation.status||"checkout"===n.reservation.status)}),(function(e,t){e(t,4,0,r.Ob(t,5).disabled||null,"NoopAnimations"===r.Ob(t,5)._animationMode)}))}function ue(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,12,"div",[["class","cta-section"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),r.zb(2,0,null,null,2,"button",[["class","big accept"],["mat-fab",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.closeReservation({assisted:!0})&&r),r}),j.b,j.a)),r.yb(3,180224,null,0,N.b,[r.l,A.g,[2,U.a]],null,null),(e()(),r.zb(4,0,null,0,0,"img",[["alt",""],["height","24px"],["src","assets/images/icons/icon-accept.svg"]],null,null,null,null,null)),(e()(),r.zb(5,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Finalizar"])),(e()(),r.zb(7,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),r.zb(8,0,null,null,2,"button",[["class","big not-assisted"],["color","warn"],["mat-fab",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.closeReservation({assisted:!1})&&r),r}),j.b,j.a)),r.yb(9,180224,null,0,N.b,[r.l,A.g,[2,U.a]],{color:[0,"color"]},null),(e()(),r.zb(10,0,null,0,0,"img",[["alt",""],["height","24px"],["src","assets/images/icons/no-asistio.svg"]],null,null,null,null,null)),(e()(),r.zb(11,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["No asisti\xf3"]))],(function(e,t){e(t,9,0,"warn")}),(function(e,t){e(t,2,0,r.Ob(t,3).disabled||null,"NoopAnimations"===r.Ob(t,3)._animationMode),e(t,8,0,r.Ob(t,9).disabled||null,"NoopAnimations"===r.Ob(t,9)._animationMode)}))}function le(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,7,"div",[["class","tips"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Propinas"])),(e()(),r.zb(3,0,null,null,4,"h2",[],null,null,null,null,null)),(e()(),r.Xb(4,null,[" "," "])),r.Rb(5,2),(e()(),r.zb(6,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["MXN"]))],null,(function(e,t){var n=t.component,i=r.Yb(t,4,0,e(t,5,0,r.Ob(t.parent,0),n.reservation.tips,"MXN"));e(t,4,0,i)}))}function ce(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,5,"div",[["class","rating"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Calificaci\xf3n"])),(e()(),r.zb(3,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),r.zb(4,0,null,null,0,"span",[["class","star"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),r.zb(5,0,null,null,0,"span",[["class","fill-star"]],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,t){var n=t.component;e(t,4,0,n.getRatingStars(n.reservation.rating.score)),e(t,5,0,n.getRatingStars(5-n.reservation.rating.score))}))}function de(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(1,null,[" \u201c",'" ']))],null,(function(e,t){var n=t.component;e(t,1,0,n.reservation.comments?n.reservation.comments:"")}))}function fe(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(1,null,[" \u201c",'" ']))],null,(function(e,t){var n=t.component;e(t,1,0,n.reservation.rating&&n.reservation.rating.comment?n.reservation.rating.comment:"")}))}function he(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,0,"img",[["src","assets/images/icons/icon-delete-gray.svg"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.removeDishFromOrder(e.parent.parent.context.$implicit.id,e.parent.context.$implicit.uid)&&r),r}),null,null))],null,null)}function pe(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"p",[["class","ingredient"]],null,null,null,null,null)),(e()(),r.Xb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.context.$implicit.name)}))}function ge(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"p",[["class","instructions"]],null,null,null,null,null)),(e()(),r.Xb(1,null,[" \u201c","\u201d "]))],null,(function(e,t){e(t,1,0,t.parent.context.$implicit.comments)}))}function ve(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,17,"div",[["class","dish"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,11,"div",[["class","header"]],null,null,null,null,null)),(e()(),r.zb(2,0,null,null,4,"div",[["class","left-side"]],null,null,null,null,null)),(e()(),r.zb(3,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(4,null,["",""])),(e()(),r.zb(5,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(6,null,["",""])),(e()(),r.zb(7,0,null,null,5,"div",[["class","right-side"]],null,null,null,null,null)),(e()(),r.zb(8,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),r.Xb(9,null,["",""])),r.Rb(10,2),(e()(),r.jb(16777216,null,null,1,null,he)),r.yb(12,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.zb(13,0,null,null,2,"div",[["class","ingredients-container"]],null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,pe)),r.yb(15,278528,null,0,u.l,[r.R,r.N,r.t],{ngForOf:[0,"ngForOf"]},null),(e()(),r.jb(16777216,null,null,1,null,ge)),r.yb(17,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,12,0,"checkout"===t.component.reservation.status),e(t,15,0,t.context.$implicit.modifiers),e(t,17,0,t.context.$implicit.comments)}),(function(e,t){e(t,4,0,t.context.$implicit.amount),e(t,6,0,t.context.$implicit.name);var n=r.Yb(t,9,0,e(t,10,0,r.Ob(t.parent.parent,0),t.context.$implicit.price_in_cents/100,"MXN"));e(t,9,0,n)}))}function me(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"p",[["class","add"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.handleAddDish(e.parent.context.$implicit.id)&&r),r}),null,null)),(e()(),r.Xb(-1,null,[" + Agregar platillo "]))],null,null)}function ye(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,17,"div",[["class","order"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,4,"div",[["class","name-container"]],null,null,null,null,null)),(e()(),r.zb(2,0,null,null,1,"p",[["class","commensal-number"]],null,null,null,null,null)),(e()(),r.Xb(3,null,["Comensal ",""])),(e()(),r.zb(4,0,null,null,1,"p",[["class","commensal-name"]],null,null,null,null,null)),(e()(),r.Xb(5,null,["",""])),(e()(),r.zb(6,0,null,null,0,"div",[["class","separation"]],null,null,null,null,null)),(e()(),r.zb(7,0,null,null,2,"div",[["class","dishes-container"]],null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,ve)),r.yb(9,278528,null,0,u.l,[r.R,r.N,r.t],{ngForOf:[0,"ngForOf"]},null),(e()(),r.zb(10,0,null,null,7,"div",[["class","add-dish-and-total"]],null,null,null,null,null)),r.yb(11,278528,null,0,u.k,[r.t,r.u,r.l,r.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Qb(12,{"contains-add-dish-option":0}),(e()(),r.jb(16777216,null,null,1,null,me)),r.yb(14,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.zb(15,0,null,null,2,"p",[["class","total"]],null,null,null,null,null)),(e()(),r.Xb(16,null,[" Total "," "])),r.Rb(17,2)],(function(e,t){var n=t.component;e(t,9,0,t.context.$implicit.dishes);var r=e(t,12,0,"checkout"===n.reservation.status);e(t,11,0,"add-dish-and-total",r),e(t,14,0,"checkout"===n.reservation.status)}),(function(e,t){var n=t.component;e(t,3,0,t.context.index+1),e(t,5,0,t.context.$implicit.customerFullName);var i=r.Yb(t,16,0,e(t,17,0,r.Ob(t.parent,0),n.getTotalAmountPerDiner(t.context.$implicit.dishes),"MXN"));e(t,16,0,i)}))}function be(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"app-chat",[],null,[[null,"closeClicked"]],(function(e,t,n){var r=!0;return"closeClicked"===t&&(r=!1!==e.component.closeChat()&&r),r}),K,V)),r.yb(1,245760,null,0,z,[D.g,G,W.b],{reservationId:[0,"reservationId"],reservationCode:[1,"reservationCode"],clientName:[2,"clientName"]},{closeClicked:"closeClicked"})],(function(e,t){var n=t.component;e(t,1,0,n.reservationIdForChat,n.reservation.code,n.reservation.customerFullName)}),null)}function ke(e){return r.ac(0,[r.Pb(0,u.c,[r.v,r.k]),(e()(),r.zb(1,0,null,null,41,"div",[["class","reservation"]],null,null,null,null,null)),(e()(),r.zb(2,0,null,null,30,"div",[["class","reservation-header"]],null,null,null,null,null)),(e()(),r.zb(3,0,null,null,18,"div",[["class","info-containers"]],null,null,null,null,null)),(e()(),r.zb(4,0,null,null,8,"div",[["class","column"]],null,null,null,null,null)),(e()(),r.zb(5,0,null,null,3,"div",[["class","data"]],null,null,null,null,null)),(e()(),r.zb(6,0,null,null,0,"img",[["alt",""],["src","assets/images/icons/icon-calendar.svg"]],null,null,null,null,null)),(e()(),r.zb(7,0,null,null,1,"p",[["class","date"]],null,null,null,null,null)),(e()(),r.Xb(8,null,[" "," "])),(e()(),r.zb(9,0,null,null,3,"div",[["class","data"]],null,null,null,null,null)),(e()(),r.zb(10,0,null,null,0,"img",[["alt",""],["src","assets/images/icons/icon-diners.svg"]],null,null,null,null,null)),(e()(),r.zb(11,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(12,null,[" "," "," "])),(e()(),r.zb(13,0,null,null,8,"div",[["class","column"]],null,null,null,null,null)),(e()(),r.zb(14,0,null,null,3,"div",[["class","data"]],null,null,null,null,null)),(e()(),r.zb(15,0,null,null,0,"img",[["alt",""],["src","assets/images/icons/icon-time.svg"]],null,null,null,null,null)),(e()(),r.zb(16,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(17,null,[" "," "])),(e()(),r.zb(18,0,null,null,3,"div",[["class","data"]],null,null,null,null,null)),(e()(),r.zb(19,0,null,null,0,"img",[["alt",""],["src","assets/images/icons/icon-sitting-area.svg"]],null,null,null,null,null)),(e()(),r.zb(20,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(21,null,[" "," "])),(e()(),r.zb(22,0,null,null,10,"div",[["class","bottom-section"]],null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,ie)),r.yb(24,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,ae)),r.yb(26,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,ue)),r.yb(28,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,le)),r.yb(30,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,ce)),r.yb(32,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.zb(33,0,null,null,6,"div",[["class","reservation-comments"]],null,null,null,null,null)),(e()(),r.zb(34,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Comentarios"])),(e()(),r.jb(16777216,null,null,1,null,de)),r.yb(37,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,fe)),r.yb(39,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.zb(40,0,null,null,2,"div",[["class","reservation-body"]],null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,ye)),r.yb(42,278528,null,0,u.l,[r.R,r.N,r.t],{ngForOf:[0,"ngForOf"]},null),(e()(),r.jb(16777216,null,null,1,null,be)),r.yb(44,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,24,0,"pending"!==n.reservation.status),e(t,26,0,!n.hasToUseAssistanceOptions&&"closed"!==n.reservation.status),e(t,28,0,n.hasToUseAssistanceOptions&&"closed"!==n.reservation.status),e(t,30,0,"closed"===n.reservation.status&&n.reservation.rating),e(t,32,0,"closed"===n.reservation.status&&n.reservation.rating),e(t,37,0,"closed"!==n.reservation.status),e(t,39,0,"closed"===n.reservation.status),e(t,42,0,n.reservation.orders),e(t,44,0,n.reservationIdForChat)}),(function(e,t){var n=t.component;e(t,8,0,n.reservation.fullDate),e(t,12,0,n.reservation.people,n.reservation.people>1?"comensales":"comensal"),e(t,17,0,n.reservation.fullTime),e(t,21,0,n.reservation.zoneName)}))}var _e=n("YHaq"),Ce=n("PDjf"),we=n("Y1Mv"),xe=n("Q2Ze"),Oe=n("ZTz/"),Se=n("7KAL"),Pe=n("UhP/"),Me=n("9gLZ"),Te=n("CeGm"),Re=n("H3DK"),Ee=n("SCoL"),Ie=n("TN/R"),je=n("e6WT"),Ne=n("8sFK"),Ae=n("nmIE"),Ue=n("1O3W"),De=n("Wcq6"),Le=function(){function e(t,n){_classCallCheck(this,e),this.router=t,this.fb=n,this.actionClicked=new r.o,this.activePeriodChanged=new r.o,this.dateChanged=new r.o,this.openMenu=!1,this.form=this.fb.group({activeReservationsPeriod:["today"],date:[new Date]})}return _createClass(e,[{key:"activePeriodChangedHandler",value:function(e){this.activePeriodChanged.emit(e)}},{key:"dateChangedHandler",value:function(e){this.dateChanged.emit(e)}},{key:"logout",value:function(){var e=this;De.auth().signOut().then((function(){localStorage.clear(),e.router.navigate(["/login"])}))}}]),e}(),Fe=n("iInd"),ze=r.xb({encapsulation:0,styles:[[".dashboard-header[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between;position:relative;padding-left:24px;padding-right:40px;height:74px;width:100%;background-color:#fff;box-shadow:0 1px 0 0 #f2f2f2,0 2px 4px 0 rgba(0,0,0,.02);z-index:2}.dashboard-header[_ngcontent-%COMP%], .dashboard-header[_ngcontent-%COMP%]   .left-options[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.dashboard-header[_ngcontent-%COMP%]   .left-options[_ngcontent-%COMP%]{-webkit-box-pack:start;justify-content:flex-start}.dashboard-header[_ngcontent-%COMP%]   .left-options[_ngcontent-%COMP%]   .section-name-action[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center}.dashboard-header[_ngcontent-%COMP%]   .left-options[_ngcontent-%COMP%]   .section-name-action[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;line-height:21px;color:#3c3c3c}.dashboard-header[_ngcontent-%COMP%]   .left-options[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{margin-left:16px}.dashboard-header[_ngcontent-%COMP%]   .left-options[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{padding-bottom:0}.dashboard-header[_ngcontent-%COMP%]   .left-options[_ngcontent-%COMP%]   .grey-select[_ngcontent-%COMP%]{width:216px;margin-left:30px}.dashboard-header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{border:1px solid #f2a412;border-radius:50%;width:38px;height:38px;cursor:pointer}.dashboard-header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:none;position:absolute;top:44px;right:0;border-radius:4px;width:175px;box-shadow:0 0 6px 0 rgba(60,60,60,.12);z-index:3;background-color:#fff}.dashboard-header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .menu.open[_ngcontent-%COMP%]{display:block}.dashboard-header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;list-style:none}.dashboard-header[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:13px 0 13px 20px;color:#3c3c3c;font-size:14px;line-height:22px}  .mat-form-field-wrapper{padding-bottom:0}  .mat-form-field-wrapper .mat-form-field-flex{border-radius:4px;height:42px}  .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{border:0;padding:0;font-size:14px}  .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-select .mat-select-trigger .mat-select-value{color:#7a7a7a}  .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-select .mat-select-trigger .mat-select-arrow-wrapper{-webkit-transform:none;transform:none}  .mat-form-field-underline{display:none}  .mat-select-arrow{color:#f2a412}"]],data:{}});function qe(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,15,"mat-select",[["class","mat-select"],["formControlName","activeReservationsPeriod"],["role","listbox"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"valueChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],(function(e,t,n){var i=!0,o=e.component;return"keydown"===t&&(i=!1!==r.Ob(e,4)._handleKeydown(n)&&i),"focus"===t&&(i=!1!==r.Ob(e,4)._onFocus()&&i),"blur"===t&&(i=!1!==r.Ob(e,4)._onBlur()&&i),"valueChange"===t&&(i=!1!==o.activePeriodChangedHandler(n)&&i),i}),we.b,we.a)),r.Sb(6144,null,xe.d,null,[Oe.c]),r.yb(2,671744,null,0,D.j,[[3,D.c],[8,null],[8,null],[8,null],[2,D.A]],{name:[0,"name"]},null),r.Sb(2048,null,D.r,null,[D.j]),r.yb(4,2080768,null,3,Oe.c,[Se.c,r.h,r.A,Pe.b,r.l,[2,Me.b],[2,D.u],[2,D.l],[2,xe.c],[6,D.r],[8,null],Oe.a,A.j],null,{valueChange:"valueChange"}),r.Tb(603979776,1,{options:1}),r.Tb(603979776,2,{optionGroups:1}),r.Tb(603979776,3,{customTrigger:0}),r.yb(8,16384,null,0,D.s,[[4,D.r]],null,null),r.Sb(2048,null,Pe.h,null,[Oe.c]),(e()(),r.zb(10,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==r.Ob(e,11)._selectViaInteraction()&&i),"keydown"===t&&(i=!1!==r.Ob(e,11)._handleKeydown(n)&&i),i}),Te.b,Te.a)),r.yb(11,8568832,[[1,4]],0,Pe.n,[r.l,r.h,[2,Pe.h],[2,Pe.m]],{value:[0,"value"]},null),(e()(),r.Xb(-1,0,["Reservaciones de hoy"])),(e()(),r.zb(13,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==r.Ob(e,14)._selectViaInteraction()&&i),"keydown"===t&&(i=!1!==r.Ob(e,14)._handleKeydown(n)&&i),i}),Te.b,Te.a)),r.yb(14,8568832,[[1,4]],0,Pe.n,[r.l,r.h,[2,Pe.h],[2,Pe.m]],{value:[0,"value"]},null),(e()(),r.Xb(-1,0,["Pr\xf3ximas reservaciones"]))],(function(e,t){e(t,2,0,"activeReservationsPeriod"),e(t,4,0),e(t,11,0,"today"),e(t,14,0,"next")}),(function(e,t){e(t,0,1,[r.Ob(t,4).id,r.Ob(t,4).tabIndex,r.Ob(t,4)._getAriaLabel(),r.Ob(t,4)._getAriaLabelledby(),r.Ob(t,4).required.toString(),r.Ob(t,4).disabled.toString(),r.Ob(t,4).errorState,r.Ob(t,4).panelOpen?r.Ob(t,4)._optionIds:null,r.Ob(t,4).multiple,r.Ob(t,4)._ariaDescribedby||null,r.Ob(t,4)._getAriaActiveDescendant(),r.Ob(t,4).disabled,r.Ob(t,4).errorState,r.Ob(t,4).required,r.Ob(t,4).empty,r.Ob(t,8).ngClassUntouched,r.Ob(t,8).ngClassTouched,r.Ob(t,8).ngClassPristine,r.Ob(t,8).ngClassDirty,r.Ob(t,8).ngClassValid,r.Ob(t,8).ngClassInvalid,r.Ob(t,8).ngClassPending]),e(t,10,0,r.Ob(t,11)._getTabIndex(),r.Ob(t,11).selected,r.Ob(t,11).multiple,r.Ob(t,11).active,r.Ob(t,11).id,r.Ob(t,11)._getAriaSelected(),r.Ob(t,11).disabled.toString(),r.Ob(t,11).disabled),e(t,13,0,r.Ob(t,14)._getTabIndex(),r.Ob(t,14).selected,r.Ob(t,14).multiple,r.Ob(t,14).active,r.Ob(t,14).id,r.Ob(t,14)._getAriaSelected(),r.Ob(t,14).disabled.toString(),r.Ob(t,14).disabled)}))}function Be(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,30,"mat-form-field",[["class","datepicker back-gray mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,Re.b,Re.a)),r.yb(1,7520256,null,9,xe.c,[r.l,r.h,[2,Pe.f],[2,Me.b],[2,xe.a],Ee.a,r.A,[2,U.a]],null,null),r.Tb(603979776,4,{_controlNonStatic:0}),r.Tb(335544320,5,{_controlStatic:0}),r.Tb(603979776,6,{_labelChildNonStatic:0}),r.Tb(335544320,7,{_labelChildStatic:0}),r.Tb(603979776,8,{_placeholderChild:0}),r.Tb(603979776,9,{_errorChildren:1}),r.Tb(603979776,10,{_hintChildren:1}),r.Tb(603979776,11,{_prefixChildren:1}),r.Tb(603979776,12,{_suffixChildren:1}),(e()(),r.zb(11,0,null,3,2,"mat-label",[],null,null,null,null,null)),r.yb(12,16384,[[6,4],[7,4]],0,xe.f,[],null,null),(e()(),r.Xb(-1,null,["Reservaciones del"])),(e()(),r.zb(14,0,null,1,10,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","date"],["matInput",""],["readonly",""]],[[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"dateChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"focus"]],(function(e,t,n){var i=!0,o=e.component;return"input"===t&&(i=!1!==r.Ob(e,15)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==r.Ob(e,15).onTouched()&&i),"compositionstart"===t&&(i=!1!==r.Ob(e,15)._compositionStart()&&i),"compositionend"===t&&(i=!1!==r.Ob(e,15)._compositionEnd(n.target.value)&&i),"input"===t&&(i=!1!==r.Ob(e,16)._onInput(n.target.value)&&i),"change"===t&&(i=!1!==r.Ob(e,16)._onChange()&&i),"blur"===t&&(i=!1!==r.Ob(e,16)._onBlur()&&i),"keydown"===t&&(i=!1!==r.Ob(e,16)._onKeydown(n)&&i),"blur"===t&&(i=!1!==r.Ob(e,23)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==r.Ob(e,23)._focusChanged(!0)&&i),"input"===t&&(i=!1!==r.Ob(e,23)._onInput()&&i),"dateChange"===t&&(i=!1!==o.dateChangedHandler(n.value)&&i),i}),null,null)),r.yb(15,16384,null,0,D.d,[r.F,r.l,[2,D.a]],null,null),r.yb(16,147456,null,0,Ie.h,[r.l,[2,Pe.a],[2,Pe.d],[2,xe.c]],{matDatepicker:[0,"matDatepicker"]},{dateChange:"dateChange"}),r.Sb(1024,null,D.p,(function(e){return[e]}),[Ie.h]),r.Sb(1024,null,D.q,(function(e,t){return[e,t]}),[D.d,Ie.h]),r.yb(19,671744,null,0,D.j,[[3,D.c],[6,D.p],[8,null],[6,D.q],[2,D.A]],{name:[0,"name"]},null),r.Sb(2048,null,D.r,null,[D.j]),r.yb(21,16384,null,0,D.s,[[4,D.r]],null,null),r.Sb(2048,null,je.a,null,[Ie.h]),r.yb(23,999424,null,0,je.b,[r.l,Ee.a,[6,D.r],[2,D.u],[2,D.l],Pe.b,[6,je.a],Ne.a,r.A],{readonly:[0,"readonly"]},null),r.Sb(2048,[[4,4],[5,4]],xe.d,null,[je.b]),(e()(),r.zb(25,0,null,4,3,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==r.Ob(e,27)._button.focus()&&i),i}),Ae.e,Ae.d)),r.yb(26,16384,[[12,4]],0,xe.g,[],null,null),r.yb(27,1753088,null,1,Ie.k,[Ie.i,r.h,[8,null]],{datepicker:[0,"datepicker"]},null),r.Tb(603979776,13,{_customIcon:0}),(e()(),r.zb(29,16777216,null,1,1,"mat-datepicker",[],null,null,null,Ae.f,Ae.c)),r.yb(30,180224,[["date",4]],0,Ie.f,[te.e,Ue.c,r.A,r.R,Ie.a,[2,Pe.a],[2,Me.b],[2,u.d]],null,null)],(function(e,t){e(t,16,0,r.Ob(t,30)),e(t,19,0,"date"),e(t,23,0,""),e(t,27,0,r.Ob(t,30))}),(function(e,t){e(t,0,1,["standard"==r.Ob(t,1).appearance,"fill"==r.Ob(t,1).appearance,"outline"==r.Ob(t,1).appearance,"legacy"==r.Ob(t,1).appearance,r.Ob(t,1)._control.errorState,r.Ob(t,1)._canLabelFloat,r.Ob(t,1)._shouldLabelFloat(),r.Ob(t,1)._hasFloatingLabel(),r.Ob(t,1)._hideControlPlaceholder(),r.Ob(t,1)._control.disabled,r.Ob(t,1)._control.autofilled,r.Ob(t,1)._control.focused,"accent"==r.Ob(t,1).color,"warn"==r.Ob(t,1).color,r.Ob(t,1)._shouldForward("untouched"),r.Ob(t,1)._shouldForward("touched"),r.Ob(t,1)._shouldForward("pristine"),r.Ob(t,1)._shouldForward("dirty"),r.Ob(t,1)._shouldForward("valid"),r.Ob(t,1)._shouldForward("invalid"),r.Ob(t,1)._shouldForward("pending"),!r.Ob(t,1)._animationsEnabled]),e(t,14,1,[r.Ob(t,16)._datepicker?"dialog":null,(null==r.Ob(t,16)._datepicker?null:r.Ob(t,16)._datepicker.opened)&&r.Ob(t,16)._datepicker.id||null,r.Ob(t,16).min?r.Ob(t,16)._dateAdapter.toIso8601(r.Ob(t,16).min):null,r.Ob(t,16).max?r.Ob(t,16)._dateAdapter.toIso8601(r.Ob(t,16).max):null,r.Ob(t,16).disabled,r.Ob(t,21).ngClassUntouched,r.Ob(t,21).ngClassTouched,r.Ob(t,21).ngClassPristine,r.Ob(t,21).ngClassDirty,r.Ob(t,21).ngClassValid,r.Ob(t,21).ngClassInvalid,r.Ob(t,21).ngClassPending,r.Ob(t,23)._isServer,r.Ob(t,23).id,r.Ob(t,23).placeholder,r.Ob(t,23).disabled,r.Ob(t,23).required,r.Ob(t,23).readonly&&!r.Ob(t,23)._isNativeSelect||null,r.Ob(t,23)._ariaDescribedby||null,r.Ob(t,23).errorState,r.Ob(t,23).required.toString()]),e(t,25,0,r.Ob(t,27).disabled?null:-1,r.Ob(t,27).datepicker&&r.Ob(t,27).datepicker.opened,r.Ob(t,27).datepicker&&"accent"===r.Ob(t,27).datepicker.color,r.Ob(t,27).datepicker&&"warn"===r.Ob(t,27).datepicker.color)}))}function Ge(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,19,"div",[["class","dashboard-header"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,12,"div",[["class","left-options"]],null,null,null,null,null)),(e()(),r.zb(2,0,null,null,2,"div",[["class","section-name-action"]],null,null,null,null,null)),(e()(),r.zb(3,0,null,null,1,"p",[["class","title"]],null,null,null,null,null)),(e()(),r.Xb(4,null,["",""])),(e()(),r.zb(5,0,null,null,8,"form",[["class","grey-select"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==r.Ob(e,7).onSubmit(n)&&i),"reset"===t&&(i=!1!==r.Ob(e,7).onReset()&&i),i}),null,null)),r.yb(6,16384,null,0,D.B,[],null,null),r.yb(7,540672,null,0,D.l,[[8,null],[8,null]],{form:[0,"form"]},null),r.Sb(2048,null,D.c,null,[D.l]),r.yb(9,16384,null,0,D.t,[[4,D.c]],null,null),(e()(),r.jb(16777216,null,null,1,null,qe)),r.yb(11,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,Be)),r.yb(13,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.zb(14,0,null,null,5,"div",[["class","profile relative"]],null,null,null,null,null)),(e()(),r.zb(15,0,null,null,0,"div",[["class","backImg user relative"]],null,[[null,"click"]],(function(e,t,n){var r=!0,i=e.component;return"click"===t&&(r=0!=(i.openMenu=!i.openMenu)&&r),r}),null,null)),(e()(),r.zb(16,0,null,null,3,"ul",[["class","menu"]],[[2,"open",null]],null,null,null,null)),(e()(),r.zb(17,0,null,null,2,"li",[],null,[[null,"click"]],(function(e,t,n){var r=!0,i=e.component;return"click"===t&&(i.logout(),r=0!=(i.openMenu=!1)&&r),r}),null,null)),(e()(),r.zb(18,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Cerrar sesi\xf3n"]))],(function(e,t){var n=t.component;e(t,7,0,n.form),e(t,11,0,n.hasPeriodSelectToBeVisible),e(t,13,0,n.hasCalendarToBeVisible)}),(function(e,t){var n=t.component;e(t,4,0,n.sectionName),e(t,5,0,r.Ob(t,9).ngClassUntouched,r.Ob(t,9).ngClassTouched,r.Ob(t,9).ngClassPristine,r.Ob(t,9).ngClassDirty,r.Ob(t,9).ngClassValid,r.Ob(t,9).ngClassInvalid,r.Ob(t,9).ngClassPending),e(t,16,0,n.openMenu)}))}n("XL7Z"),n("xv9W"),n("NUHO"),n.d(t,"a",(function(){return We})),n.d(t,"b",(function(){return $e}));var We=r.xb({encapsulation:0,styles:[['#reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{position:absolute;top:74px;left:0;width:260px;height:inherit;box-shadow:inset -1px 0 0 0 #f2f2f2;background-color:#fff;overflow:auto}#reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%]{list-style-type:none}#reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%] > .reservation[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:start;align-items:flex-start;border-bottom:1px solid #f2f2f2;padding:10px 20px 10px 24px;min-height:106;cursor:pointer;position:relative}#reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%] > .reservation.active[_ngcontent-%COMP%], #reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%] > .reservation[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}#reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%] > .reservation[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{cursor:default}#reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%] > .reservation[_ngcontent-%COMP%]   .reservations-data.contains-timer[_ngcontent-%COMP%]{width:calc(100% - 48px)}#reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%] > .reservation[_ngcontent-%COMP%]   .reservations-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;font-size:12px;line-height:18px;color:#7a7a7a;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}#reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%] > .reservation[_ngcontent-%COMP%]   .reservations-data[_ngcontent-%COMP%]   p.code[_ngcontent-%COMP%], #reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%] > .reservation[_ngcontent-%COMP%]   .reservations-data[_ngcontent-%COMP%]   p.name[_ngcontent-%COMP%]{font-size:14px;line-height:22px;font-weight:500}#reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%] > .reservation[_ngcontent-%COMP%]   .reservations-data[_ngcontent-%COMP%]   p.code[_ngcontent-%COMP%]{color:#f2a412;text-transform:uppercase}#reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%] > .reservation[_ngcontent-%COMP%]   .reservations-data[_ngcontent-%COMP%]   p.name[_ngcontent-%COMP%]{color:#444}#reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%] > .reservation[_ngcontent-%COMP%]   .reservations-data[_ngcontent-%COMP%]   p.date[_ngcontent-%COMP%]{text-transform:capitalize}#reservations[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%] > ul.reservations-list[_ngcontent-%COMP%] > .reservation.unread[_ngcontent-%COMP%]:before{content:"";position:absolute;left:7px;top:calc(50% - 6px);border-radius:50%;height:12px;width:12px;background-color:#ff4549}#reservations[_ngcontent-%COMP%]   main#content[_ngcontent-%COMP%]{margin:0 0 0 auto;width:calc(100% - 261px);min-height:100%}#reservations[_ngcontent-%COMP%]   main#content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{height:100%;overflow:auto}#reservations[_ngcontent-%COMP%]   main#content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{margin:0 auto}']],data:{animation:[{type:7,name:"items",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"scale(0.5)",opacity:0},offset:null},{type:4,styles:{type:6,styles:{transform:"scale(1)",opacity:1},offset:null},timings:"500ms ease-out"}],options:null},{type:1,expr:":leave",animation:[{type:3,steps:[{type:6,styles:{opacity:1,overflow:"hidden"},offset:null},{type:4,styles:{type:6,styles:{height:0,paddingTop:0,paddingBottom:0},offset:null},timings:"800ms ease"},{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"200ms"}],options:null}],options:null}],options:{}}]}});function Ve(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"app-reservations-empty-state",[],null,null,null,s,o)),r.yb(1,49152,null,0,i,[],{header:[0,"header"],subtitle:[1,"subtitle"]},null)],(function(e,t){var n=t.component;e(t,1,0,n.emptyReservationsHeader,n.emptyReservationsSubtitle)}),null)}function Xe(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,"pending"===t.parent.context.$implicit.status?"Solicitud de espacio":"Solicitud de \xf3rdenes")}))}function Je(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"p",[["class","date"]],null,null,null,null,null)),(e()(),r.Xb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.parent.context.$implicit.fullDate)}))}function He(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r.Xb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.parent.context.$implicit.customerPhone)}))}function Ke(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"app-reservation-timer",[],null,[[null,"timeHasExpired"]],(function(e,t,n){var r=!0;return"timeHasExpired"===t&&(r=!1!==e.component.removeReservationFromList(n)&&r),r}),E,R)),r.yb(1,114688,null,0,T,[],{expiresAt:[0,"expiresAt"],reservationId:[1,"reservationId"]},{timeHasExpired:"timeHasExpired"})],(function(e,t){e(t,1,0,t.parent.context.$implicit.expires_at,t.parent.context.$implicit.id)}),null)}function Ye(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,17,"li",[["class","reservation"]],[[24,"@items",0]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.onReservationClick(e.context.$implicit.id)&&r),r}),null,null)),r.yb(1,278528,null,0,u.k,[r.t,r.u,r.l,r.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Qb(2,{active:0,unread:1}),(e()(),r.zb(3,0,null,null,12,"div",[["class","reservations-data"]],null,null,null,null,null)),r.yb(4,278528,null,0,u.k,[r.t,r.u,r.l,r.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Qb(5,{"contains-timer":0}),(e()(),r.zb(6,0,null,null,1,"p",[["class","code"]],null,null,null,null,null)),(e()(),r.Xb(7,null,[" "," "])),(e()(),r.jb(16777216,null,null,1,null,Xe)),r.yb(9,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,Je)),r.yb(11,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.zb(12,0,null,null,1,"p",[["class","name"]],null,null,null,null,null)),(e()(),r.Xb(13,null,["",""])),(e()(),r.jb(16777216,null,null,1,null,He)),r.yb(15,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,Ke)),r.yb(17,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=e(t,2,0,t.context.$implicit.id===t.component.selectedReservation.id,t.context.$implicit.is_new);e(t,1,0,"reservation",n);var r=e(t,5,0,"pending"===t.context.$implicit.status||"checkout"===t.context.$implicit.status);e(t,4,0,"reservations-data",r),e(t,9,0,"pending"===t.context.$implicit.status||"checkout"===t.context.$implicit.status),e(t,11,0,"active"===t.context.$implicit.status||"closed"===t.context.$implicit.status),e(t,15,0,t.context.$implicit.customerPhone),e(t,17,0,t.context.$implicit.expires_at&&("pending"===t.context.$implicit.status||"checkout"===t.context.$implicit.status))}),(function(e,t){e(t,0,0,void 0),e(t,7,0,t.context.$implicit.code?t.context.$implicit.code:""),e(t,13,0,t.context.$implicit.customerFullName)}))}function Qe(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"app-reservation",[],null,[[null,"reservationCancelled"],[null,"reservationAccepted"],[null,"reservationClosed"],[null,"dishesChanged"]],(function(e,t,n){var r=!0,i=e.component;return"reservationCancelled"===t&&(r=!1!==i.getReservations()&&r),"reservationAccepted"===t&&(r=!1!==i.getReservations()&&r),"reservationClosed"===t&&(r=!1!==i.getReservations()&&r),"dishesChanged"===t&&(r=!1!==i.getSelectedReservation(n)&&r),r}),ke,re)),r.yb(1,49152,null,0,$,[ee.a,W.b,te.e,ne.a],{reservation:[0,"reservation"],hasToUseAssistanceOptions:[1,"hasToUseAssistanceOptions"]},{reservationCancelled:"reservationCancelled",reservationAccepted:"reservationAccepted",dishesChanged:"dishesChanged",reservationClosed:"reservationClosed"})],(function(e,t){var n=t.component;e(t,1,0,n.reservation,n.hasToUseAssistanceOptions)}),null)}function Ze(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,11,"div",[["class","dashboard-content"],["id","reservations"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,3,"aside",[],null,null,null,null,null)),(e()(),r.zb(2,0,null,null,2,"ul",[["class","reservations-list"]],null,null,null,null,null)),(e()(),r.jb(16777216,null,null,1,null,Ye)),r.yb(4,278528,null,0,u.l,[r.R,r.N,r.t],{ngForOf:[0,"ngForOf"]},null),(e()(),r.zb(5,0,null,null,6,"main",[["id","content"]],null,null,null,null,null)),(e()(),r.zb(6,0,null,null,5,"mat-card",[["class","mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,_e.b,_e.a)),r.yb(7,49152,null,0,Ce.a,[[2,U.a]],null,null),(e()(),r.zb(8,0,null,0,3,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),r.yb(9,16384,null,0,Ce.b,[],null,null),(e()(),r.jb(16777216,null,null,1,null,Qe)),r.yb(11,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,4,0,n.reservations),e(t,11,0,n.reservation.id)}),(function(e,t){e(t,6,0,"NoopAnimations"===r.Ob(t,7)._animationMode)}))}function $e(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,6,"section",[["class","dashboard-section-container"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,1,"app-staff-header",[],null,[[null,"activePeriodChanged"],[null,"dateChanged"]],(function(e,t,n){var r=!0,i=e.component;return"activePeriodChanged"===t&&(r=!1!==i.reservationsPeriodChangedHandler(n)&&r),"dateChanged"===t&&(r=!1!==i.getReservations(void 0,n)&&r),r}),Ge,ze)),r.yb(2,49152,null,0,Le,[Fe.l,D.g],{sectionName:[0,"sectionName"],hasCalendarToBeVisible:[1,"hasCalendarToBeVisible"],hasPeriodSelectToBeVisible:[2,"hasPeriodSelectToBeVisible"]},{activePeriodChanged:"activePeriodChanged",dateChanged:"dateChanged"}),(e()(),r.jb(16777216,null,null,1,null,Ve)),r.yb(4,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,null,1,null,Ze)),r.yb(6,16384,null,0,u.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.sectionTitle,n.hasCalendarToBeVisible,n.hasPeriodOfTimeLogicToBeActive),e(t,4,0,0===n.reservations.length),e(t,6,0,n.reservations.length>0)}),null)}},EJiy:function(e,t,n){"use strict";t.__esModule=!0;var r=s(n("F+2o")),i=s(n("+JPL")),o="function"==typeof i.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function s(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(r.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}},ENu8:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},EcEN:function(e,t,n){var r=n("xDdU"),i=n("xk4V"),o=i;o.v1=r,o.v4=i,e.exports=o},Eig5:function(e,t,n){"use strict";var r=m(n("4d7F")),i=m(n("gDS+")),o=m(n("14Xm")),s=m(n("D3Ub")),a=m(n("ql3t")),u=m(n("Yz+Y")),l=m(n("iCc5")),c=m(n("V7oC")),d=m(n("FYw3")),f=m(n("mRg0")),h=m(n("u8T8")),p=m(n("SEkw")),g=m(n("EJiy")),v=m(n("JO7F"));function m(e){return e&&e.__esModule?e:{default:e}}var y=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,g.default)(Reflect))&&"function"==typeof h.default)return(0,h.default)(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Member=void 0;var b=n("+qE3"),k=n("iqZd"),_=n("yC9A"),C=n("C9Jq"),w=_.Logger.scope("Member"),x=function(e){function t(e,n,r,i){(0,l.default)(this,t);var o=(0,d.default)(this,(t.__proto__||(0,u.default)(t)).call(this));if(o.channel=n,o.services=e,o.state={attributes:k.parseAttributes(r.attributes,"Retrieved malformed attributes from the server for member: "+i,w),dateCreated:r.dateCreated?k.parseTime(r.dateCreated):null,dateUpdated:r.dateCreated?k.parseTime(r.dateUpdated):null,sid:i,typingTimeout:null,isTyping:!1,identity:r.identity||null,roleSid:r.roleSid||null,lastConsumedMessageIndex:(0,a.default)(r.lastConsumedMessageIndex)?r.lastConsumedMessageIndex:null,lastConsumptionTimestamp:r.lastConsumptionTimestamp?k.parseTime(r.lastConsumptionTimestamp):null,type:r.type||"chat",userInfo:r.userInfo},!r.identity&&!r.type)throw new Error("Received invalid Member object from server: Missing identity or type of Member.");return o}var n,r,h,p;return(0,f.default)(t,e),(0,c.default)(t,[{key:"_startTyping",value:function(e){var t=this;return clearTimeout(this.state.typingTimeout),this.state.isTyping=!0,this.emit("typingStarted",this),this.channel.emit("typingStarted",this),this.state.typingTimeout=setTimeout((function(){return t._endTyping()}),e),this}},{key:"_endTyping",value:function(){this.state.typingTimeout&&(this.state.isTyping=!1,this.emit("typingEnded",this),this.channel.emit("typingEnded",this),clearInterval(this.state.typingTimeout),this.state.typingTimeout=null)}},{key:"_update",value:function(e){var t=[],n=k.parseAttributes(e.attributes,"Retrieved malformed attributes from the server for member: "+this.state.sid,w);e.attributes&&!k.isDeepEqual(this.state.attributes,n)&&(this.state.attributes=n,t.push("attributes"));var r=k.parseTime(e.dateUpdated);e.dateUpdated&&r.getTime()!==(this.state.dateUpdated&&this.state.dateUpdated.getTime())&&(this.state.dateUpdated=r,t.push("dateUpdated"));var i=k.parseTime(e.dateCreated);if(e.dateCreated&&i.getTime()!==(this.state.dateCreated&&this.state.dateCreated.getTime())&&(this.state.dateCreated=i,t.push("dateCreated")),e.roleSid&&this.state.roleSid!==e.roleSid&&(this.state.roleSid=e.roleSid,t.push("roleSid")),!(0,a.default)(e.lastConsumedMessageIndex)&&null!==e.lastConsumedMessageIndex||this.state.lastConsumedMessageIndex===e.lastConsumedMessageIndex||(this.state.lastConsumedMessageIndex=e.lastConsumedMessageIndex,t.push("lastConsumedMessageIndex")),e.lastConsumptionTimestamp){var o=new Date(e.lastConsumptionTimestamp);this.state.lastConsumptionTimestamp&&this.state.lastConsumptionTimestamp.getTime()===o.getTime()||(this.state.lastConsumptionTimestamp=o,t.push("lastConsumptionTimestamp"))}return t.length>0&&this.emit("updated",{member:this,updateReasons:t}),this}},{key:"getUserDescriptor",value:(p=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("chat"==this.type){e.next=2;break}throw new Error("Getting User Descriptor is not supported for this Member type: "+this.type);case 2:return e.abrupt("return",this.services.users.getUserDescriptor(this.state.identity));case 3:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"getUser",value:(h=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("chat"==this.type){e.next=2;break}throw new Error("Getting User is not supported for this Member type: "+this.type);case 2:return e.abrupt("return",this.services.users.getUser(this.state.identity,this.state.userInfo));case 3:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"remove",value:(r=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.channel.removeMember(this));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"updateAttributes",value:(n=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("editMemberAttributes",{channelSid:this.channel.sid,memberSid:this.sid,attributes:(0,i.default)(t)});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"sid",get:function(){return this.state.sid}},{key:"attributes",get:function(){return this.state.attributes}},{key:"dateCreated",get:function(){return this.state.dateCreated}},{key:"dateUpdated",get:function(){return this.state.dateUpdated}},{key:"identity",get:function(){return this.state.identity}},{key:"isTyping",get:function(){return this.state.isTyping}},{key:"lastConsumedMessageIndex",get:function(){return this.state.lastConsumedMessageIndex}},{key:"lastConsumptionTimestamp",get:function(){return this.state.lastConsumptionTimestamp}},{key:"roleSid",get:function(){return this.state.roleSid}},{key:"type",get:function(){return this.state.type}}]),t}(b.EventEmitter);(function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=(0,v.default)(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":(0,g.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&(0,p.default)(t,n,s)})([C.asyncTypeCheck(["string","number","boolean","object",C.literal(null)]),y("design:type",Function),y("design:paramtypes",[Object]),y("design:returntype",r.default)],x.prototype,"updateAttributes",null),t.Member=x},EvBC:function(e,t,n){"use strict";var r=o(n("iCc5")),i=o(n("V7oC"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;var s=function(){function e(t){(0,r.default)(this,e);var n=(t=t||{}).Chat||t.IPMessaging||t||{};this.region=n.region||t.region,this.baseUrl=n.apiUri||n.typingUri||(this.region&&"us1"!==this.region?"https://aim."+this.region+".twilio.com":"https://aim.twilio.com"),this.typingIndicatorUri=this.baseUrl+"/v1/typing",this.typingIndicatorTimeoutOverride=n.typingIndicatorTimeoutOverride,this.httpCacheIntervalOverride=n.httpCacheIntervalOverride,this.consumptionReportIntervalOverride=n.consumptionReportIntervalOverride,this.userInfosToSubscribeOverride=n.userInfosToSubscribeOverride,this.retryWhenThrottledOverride=n.retryWhenThrottledOverride,this.backoffConfigOverride=n.backoffConfigOverride,this.productId=t.productId}return(0,i.default)(e,[{key:"typingIndicatorTimeoutDefault",get:function(){return 5e3}},{key:"httpCacheIntervalDefault",get:function(){return"PT5S"}},{key:"consumptionReportIntervalDefault",get:function(){return"PT5S"}},{key:"userInfosToSubscribeDefault",get:function(){return 100}},{key:"retryWhenThrottledDefault",get:function(){return!0}},{key:"backoffConfigDefault",get:function(){return{min:1e3,max:4e3,maxAttemptsCount:3}}}]),e}();t.Configuration=s},"F+2o":function(e,t,n){e.exports={default:n("UR8F"),__esModule:!0}},FYw3:function(e,t,n){"use strict";t.__esModule=!0;var r,i=(r=n("EJiy"))&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},FgkJ:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},FkhZ:function(e,t,n){n("3+Ww"),n("C5kU"),n("ZY/g"),n("ZWGZ"),n("3P3t"),n("nhJU"),n("l+6R"),e.exports=n("VSTI").Map},FxMp:function(e,t,n){"use strict";var r=d(n("AyUB")),i=d(n("s3Ml")),o=d(n("rfXi")),s=d(n("Qv35")),a=d(n("Yz+Y")),u=d(n("iCc5")),l=d(n("FYw3")),c=d(n("mRg0"));function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SessionError=void 0;var f=function(e){function t(e,n){(0,u.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return r.name=r.constructor.name,r.message=e,r.code=n,Error.captureStackTrace?Error.captureStackTrace(r,r.constructor):r.stack=(new Error).stack,r}return(0,c.default)(t,e),t}(function(e){function t(){var t=(0,s.default)(e,(0,o.default)(arguments));return(0,i.default)(t,(0,a.default)(this)),t}return t.prototype=(0,r.default)(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i.default?(0,i.default)(t,e):t.__proto__=e,t}(Error));t.SessionError=f},FyfS:function(e,t,n){e.exports={default:n("fUKC"),__esModule:!0}},GDZC:function(e,t,n){var r=n("bKEA"),i=n("ZDin").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return s.slice()}}(e):i(r(e))}},GQeE:function(e,t,n){e.exports={default:n("1GvH"),__esModule:!0}},GRew:function(e,t){t.f={}.propertyIsEnumerable},GfoU:function(e,t,n){var r=n("/F7N"),i=n("yQFZ");e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),u=r(n),l=a.length;return u<0||u>=l?e?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):o:e?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},GhSp:function(e,t,n){var r=n("d+lc"),i=n("+vXQ"),o=n("M5dz"),s=Object.defineProperty;t.f=n("C61u")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},H86R:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncListImpl=t.SyncList=void 0;var r=n("IMmU"),i=n("v2fs"),o=n("PyJ+"),s=n("PalJ"),a=n("BUbV"),u=n("1dR4"),l=n("/2MY"),c=n("9y9p"),d=n("oaU9"),f=n("PEWQ"),h=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).updateMergingQueue=new d.NamespacedMergingQueue((function(e,t){return"number"==typeof t.ttl?{ttl:t.ttl}:e})),i.cache=new c.Cache,i.descriptor=n,i.descriptor.date_updated=new Date(i.descriptor.date_updated),i}var n,a,f,h,p,g,v,m,y,b,k,_,C,w,x,O;return _inherits(t,e),_createClass(t,[{key:"_addOrUpdateItemOnServer",value:(O=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r,i){var o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={data:n},void 0!==i&&(o.ttl=i),e.next=4,this.services.network.post(t,o,r);case 4:return s=e.sent,e.abrupt("return",(s.body.data=n,s.body.date_updated=new Date(s.body.date_updated),s.body));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return O.apply(this,arguments)})},{key:"push",value:(x=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n||{}).ttl,r.validateOptionalTtl(i),e.next=4,this._addOrUpdateItemOnServer(this.links.items,t,void 0,i);case 4:return o=e.sent,s=Number(o.index),e.abrupt("return",(this._handleItemMutated(s,o.url,o.last_event_id,o.revision,t,o.date_updated,o.date_expires,!0,!1),this.cache.get(s)));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return x.apply(this,arguments)})},{key:"set",value:(w=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,i){var o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i||{},e.abrupt("return",(r.validateOptionalTtl(o.ttl),this.updateMergingQueue.squashAndAdd(t,o,(function(e){return s._updateItemUnconditionally(t,n,e.ttl)}))));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return w.apply(this,arguments)})},{key:"_updateItemUnconditionally",value:(C=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(t);case 2:return i=e.sent,e.next=5,this._addOrUpdateItemOnServer(i.uri,n,void 0,r);case 5:return o=e.sent,e.abrupt("return",(this._handleItemMutated(t,o.url,o.last_event_id,o.revision,o.data,o.date_updated,o.date_expires,!1,!1),this.cache.get(t)));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return C.apply(this,arguments)})},{key:"_updateItemWithIfMatch",value:(_=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,i){var o,s,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(t);case 2:if(o=e.sent,s=n(r.deepClone(o.value))){e.next=6;break}return e.abrupt("return",o);case 6:return a=o.revision,e.prev=7,e.next=10,this._addOrUpdateItemOnServer(o.uri,s,a,i);case 10:return u=e.sent,e.abrupt("return",(this._handleItemMutated(t,u.url,u.last_event_id,u.revision,u.data,u.date_updated,u.date_expires,!1,!1),this.cache.get(t)));case 14:if(e.prev=14,e.t0=e.catch(7),412!==e.t0.status){e.next=20;break}return e.next=19,this._getItemFromServer(t);case 19:return e.abrupt("return",this._updateItemWithIfMatch(t,n,i));case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,this,[[7,14]])}))),function(e,t,n){return _.apply(this,arguments)})},{key:"mutate",value:(k=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,i){var o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i||{},e.abrupt("return",(r.validateOptionalTtl(o.ttl),this.updateMergingQueue.add(t,o,(function(e){return s._updateItemWithIfMatch(t,n,e.ttl)}))));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return k.apply(this,arguments)})},{key:"update",value:(b=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mutate(t,(function(e){return Object.assign(e,n)}),r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return b.apply(this,arguments)})},{key:"remove",value:(y=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(t);case 2:return n=e.sent,e.next=5,this.services.network.delete(n.uri);case 5:r=e.sent,this._handleItemRemoved(t,r.body.last_event_id,void 0,new Date(r.body.date_updated),!1);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"get",value:(m=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cache.get(t)||this._getItemFromServer(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"_getItemFromServer",value:(v=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryItems({index:t});case 2:if(!((n=e.sent).items.length<1)){e.next=5;break}throw new o.SyncError("No item with index ".concat(t," found"),404,54151);case 5:return e.abrupt("return",n.items[0]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"queryItems",value:(g=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,o,s,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||{},n=new i.UriBuilder(this.links.items).queryParam("From",t.from).queryParam("PageSize",t.limit).queryParam("Index",t.index).queryParam("PageToken",t.pageToken).queryParam("Order",t.order).build(),e.next=4,this.services.network.get(n);case 4:return r=e.sent,o=r.body.items.map((function(e){return e.date_updated=new Date(e.date_updated),a.cache.get(e.index)?a._handleItemMutated(e.index,e.url,e.last_event_id,e.revision,e.data,e.date_updated,e.date_expires,!1,!0):a.cache.store(Number(e.index),new u.ListItem({index:Number(e.index),uri:e.url,revision:e.revision,lastEventId:e.last_event_id,dateUpdated:e.date_updated,dateExpires:e.date_expires,value:e.data}),e.last_event_id),a.cache.get(e.index)})),s=r.body.meta,e.abrupt("return",new l.Paginator(o,(function(e){return a.queryItems({pageToken:e})}),s.previous_token,s.next_token));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"getItems",value:(p=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(r.validatePageSize((t=t||{}).pageSize),t.limit=t.pageSize||t.limit||50,t.order=t.order||"asc",this.queryItems(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getContext",value:(h=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.context){e.next=5;break}return e.next=3,this.services.network.get(this.links.context);case 3:t=e.sent,this._updateContextIfRequired(t.body.data,t.body.last_event_id);case 5:return e.abrupt("return",this.context);case 6:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"setTtl",value:(f=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.validateMandatoryTtl(t),e.prev=1,n={ttl:t},e.next=5,this.services.network.post(this.uri,n);case 5:i=e.sent,this.descriptor.date_expires=i.body.date_expires,e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),404===e.t0.status&&this.onRemoved(!1),e.t0;case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return f.apply(this,arguments)})},{key:"setItemTtl",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.validateMandatoryTtl(n),e.next=3,this.get(t);case 3:return i=e.sent,o={ttl:n},e.next=7,this.services.network.post(i.uri,o);case 7:s=e.sent,i.updateDateExpires(s.body.date_expires);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"removeList",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onRemoved",value:function(e){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:e})}},{key:"shouldIgnoreEvent",value:function(e,t){return this.cache.isKnown(e,t)}},{key:"_update",value:function(e,t){var n=Number(e.item_index);switch(e.date_created=new Date(e.date_created),e.type){case"list_item_added":case"list_item_updated":this._handleItemMutated(n,e.item_url,e.id,e.item_revision,e.item_data,e.date_created,void 0,"list_item_added"===e.type,!0);break;case"list_item_removed":this._handleItemRemoved(n,e.id,e.item_data,e.date_created,!0);break;case"list_context_updated":this._handleContextUpdate(e.context_data,e.id,e.date_created);break;case"list_removed":this.onRemoved(!1)}t&&this._advanceLastEventId(e.id,e.list_revision)}},{key:"_advanceLastEventId",value:function(e,t){this.lastEventId<e&&(this.descriptor.last_event_id=e,t&&(this.descriptor.revision=t))}},{key:"_updateRootDateUpdated",value:function(e){(!this.descriptor.date_updated||e.getTime()>this.descriptor.date_updated.getTime())&&(this.descriptor.date_updated=e,this.services.storage.update(this.type,this.sid,this.uniqueName,{date_updated:e}))}},{key:"_handleItemMutated",value:function(e,t,n,r,i,o,a,l,c){if(this.shouldIgnoreEvent(e,n))s.default.trace("Item ",e," update skipped, current:",this.lastEventId,", remote:",n);else{this._updateRootDateUpdated(o);var d=this.cache.get(e);if(d)d.update(n,r,i,o),this.cache.store(e,d,n),void 0!==a&&d.updateDateExpires(a),this.emitItemMutationEvent(d,c,!1);else{var f=new u.ListItem({index:e,uri:t,lastEventId:n,revision:r,value:i,dateUpdated:o,dateExpires:a});this.cache.store(e,f,n),this.emitItemMutationEvent(f,c,l)}}}},{key:"emitItemMutationEvent",value:function(e,t,n){this.broadcastEventToListeners(n?"itemAdded":"itemUpdated",{item:e,isLocal:!t})}},{key:"_handleItemRemoved",value:function(e,t,n,r,i){this._updateRootDateUpdated(r),this.cache.delete(e,t),this.broadcastEventToListeners("itemRemoved",{index:e,isLocal:!i,value:n})}},{key:"_handleContextUpdate",value:function(e,t,n){this._updateRootDateUpdated(n),this._updateContextIfRequired(e,t)&&this.broadcastEventToListeners("contextUpdated",{context:e,isLocal:!1})}},{key:"_updateContextIfRequired",value:function(e,t){return!this.contextEventId||t>this.contextEventId?(this.context=e,this.contextEventId=t,!0):(s.default.trace("Context update skipped, current:",this.lastEventId,", remote:",t),!1)}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"links",get:function(){return this.descriptor.links}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"list"}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}}],[{key:"type",get:function(){return"list"}}]),t}(a.SyncEntity);t.SyncListImpl=h;var p=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).syncListImpl=e,n.syncListImpl.attach(_assertThisInitialized(n)),n}var n,r,i,o,s,a,u,l,c,d,f;return _inherits(t,e),_createClass(t,[{key:"push",value:(f=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncListImpl.push(t,n)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"set",value:(d=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncListImpl.set(t,n,r)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return d.apply(this,arguments)})},{key:"mutate",value:(c=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncListImpl.mutate(t,n,r)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return c.apply(this,arguments)})},{key:"update",value:(l=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncListImpl.update(t,n,r)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return l.apply(this,arguments)})},{key:"remove",value:(u=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncListImpl.remove(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"get",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncListImpl.get(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getContext",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncListImpl.getContext()));case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getItems",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncListImpl.getItems(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"setTtl",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncListImpl.setTtl(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"setItemTtl",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncListImpl.setItemTtl(t,n)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"removeList",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncListImpl.removeList()));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"close",value:function(){_get(_getPrototypeOf(t.prototype),"close",this).call(this),this.syncListImpl.detach(this.listenerUuid)}},{key:"uri",get:function(){return this.syncListImpl.uri}},{key:"revision",get:function(){return this.syncListImpl.revision}},{key:"lastEventId",get:function(){return this.syncListImpl.lastEventId}},{key:"links",get:function(){return this.syncListImpl.links}},{key:"dateExpires",get:function(){return this.syncListImpl.dateExpires}},{key:"type",get:function(){return h.type}},{key:"sid",get:function(){return this.syncListImpl.sid}},{key:"uniqueName",get:function(){return this.syncListImpl.uniqueName}},{key:"dateUpdated",get:function(){return this.syncListImpl.dateUpdated}}],[{key:"type",get:function(){return h.type}}]),t}(f.default);t.SyncList=p,t.default=p},HlZy:function(e,t,n){"use strict";var r=d(n("4d7F")),i=d(n("14Xm")),o=d(n("D3Ub")),s=d(n("Yz+Y")),a=d(n("iCc5")),u=d(n("V7oC")),l=d(n("FYw3")),c=d(n("mRg0"));function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Members=void 0;var f=n("+qE3"),h=n("Eig5"),p=n("yC9A").Logger.scope("Members"),g=function(e){function t(e,n,r){(0,a.default)(this,t);var i=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return i.services=n,i.channel=e,i.members=r,i}var n,d,f,g;return(0,c.default)(t,e),(0,u.default)(t,[{key:"unsubscribe",value:(g=(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.rosterEntityPromise){e.next=6;break}return e.next=3,this.rosterEntityPromise;case 3:e.sent.close(),this.rosterEntityPromise=null;case 6:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"subscribe",value:function(e){var t=this;return this.rosterEntityPromise=this.rosterEntityPromise||this.services.syncClient.map({id:e,mode:"open_existing"}).then((function(e){e.on("itemAdded",(function(e){p.debug(t.channel.sid+" itemAdded: "+e.item.key),t.upsertMember(e.item.key,e.item.value).then((function(e){t.emit("memberJoined",e)}))})),e.on("itemRemoved",(function(e){p.debug(t.channel.sid+" itemRemoved: "+e.key);var n=e.key;if(t.members.has(n)){var r=t.members.get(n);t.members.delete(n),t.emit("memberLeft",r)}})),e.on("itemUpdated",(function(e){p.debug(t.channel.sid+" itemUpdated: "+e.item.key),t.upsertMember(e.item.key,e.item.value)}));var n=[],i=t;return e.getItems().then((function e(t){return t.items.forEach((function(e){n.push(i.upsertMember(e.key,e.value))})),t.hasNextPage?t.nextPage().then(e):null})).then((function(){return r.default.all(n)})).then((function(){return e}))})).catch((function(e){throw t.rosterEntityPromise=null,"disconnected"!=t.services.syncClient.connectionState&&p.error("Failed to get roster object for channel",t.channel.sid,e),p.debug("ERROR: Failed to get roster object for channel",t.channel.sid,e),e}))}},{key:"upsertMember",value:(f=(0,o.default)(i.default.mark((function e(t,n){var r,o=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.members.get(t))){e.next=3;break}return e.abrupt("return",r._update(n));case 3:return r=new h.Member(this.services,this.channel,n,t),this.members.set(t,r),r.on("updated",(function(e){return o.emit("memberUpdated",e)})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"getMembers",value:function(){var e=this;return this.rosterEntityPromise.then((function(){var t=[];return e.members.forEach((function(e){return t.push(e)})),t}))}},{key:"getMemberBySid",value:(d=(0,o.default)(i.default.mark((function e(t){var n=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rosterEntityPromise.then((function(){var e=n.members.get(t);if(!e)throw new Error("Member with SID "+t+" was not found");return e})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"getMemberByIdentity",value:(n=(0,o.default)(i.default.mark((function e(t){var n,r=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.abrupt("return",this.rosterEntityPromise.then((function(){if(r.members.forEach((function(e){e.identity===t&&(n=e)})),!n)throw new Error("Member with identity "+t+" was not found");return n})));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"add",value:function(e){return this.services.session.addCommand("addMemberV2",{channelSid:this.channel.sid,username:e})}},{key:"invite",value:function(e){return this.services.session.addCommand("inviteMember",{channelSid:this.channel.sid,username:e})}},{key:"removeByIdentity",value:function(e){return this.services.session.addCommand("removeMember",{channelSid:this.channel.sid,username:e})}},{key:"removeBySid",value:function(e){return this.services.session.addCommand("removeMember",{channelSid:this.channel.sid,memberSid:e})}}]),t}(f.EventEmitter);t.Members=g},Huux:function(e,t,n){n("PJ8w")("Set")},I2ZF:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}},I7B1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n("+qwt");t.Metadata=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getMetadata",value:function(e){"undefined"!=typeof navigator&&r.parse(navigator.userAgent);var t=e&&e.clientMetadata?e.clientMetadata:{},n={env:r.name,envv:r.version,os:r.os.family,osv:r.os.version,osa:r.os.architecture,sdk:"js-default"},i={};return["ver","env","envv","os","osv","osa","type","sdk","sdkv","dev","devv","devt","app","appv"].filter((function(e){return e in t||e in n})).forEach((function(e){return i[e]=e in t?t[e]:n[e]})),i}}]),e}()},"I90/":function(e,t,n){var r=n("aqg2"),i=n("zBWt")("iterator"),o=n("ig3W");e.exports=n("VSTI").getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},IMmU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateId=t.validatePageSize=t.validateMandatoryTtl=t.validateOptionalTtl=t.deepClone=void 0;var r=n("PyJ+");function i(e,t){if(!t||void 0!==e){var n,i=typeof e;if("number"!==i||!(o(n=e)&&n>=0))throw new r.default("Invalid TTL, expected a positive integer of type number, was ".concat("object"===i?"object":"'".concat(e,"' of type '").concat(i,"'")),400,54011)}}function o(e){return!isNaN(parseInt(e))&&isFinite(e)}t.deepClone=function(e){return JSON.parse(JSON.stringify(e))},t.validateId=function(e){if(void 0!==e){var t=typeof e;if("string"!==t)throw new Error("Invalid ID type, expected a string, got '".concat(t,"'"))}},t.validateOptionalTtl=function(e){i(e,!0)},t.validateMandatoryTtl=function(e){i(e,!1)},t.validatePageSize=function(e){var t;if(!(void 0===e||o(t=e)&&t>0))throw new r.default("Invalid pageSize parameter. Expected a positive integer, was '".concat(e,"'."),400,54455)}},IMt4:function(e,t,n){"use strict";var r=s(n("4d7F")),i=s(n("iCc5")),o=s(n("V7oC"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RestPaginator=void 0;var a=function(){function e(t,n,r,o){(0,i.default)(this,e),this.state={prevToken:r,nextToken:o,source:n,items:t}}return(0,o.default)(e,[{key:"nextPage",value:function(){return this.hasNextPage?this.state.source(this.state.nextToken):r.default.reject(new Error("No next page"))}},{key:"prevPage",value:function(){return this.hasPrevPage?this.state.source(this.state.prevToken):r.default.reject(new Error("No previous page"))}},{key:"hasNextPage",get:function(){return!!this.state.nextToken}},{key:"hasPrevPage",get:function(){return!!this.state.prevToken}},{key:"items",get:function(){return this.state.items}}]),e}();t.RestPaginator=a},IYKI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Close=void 0;var r=n("PmLG");t.Close=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).method="close",e}return _inherits(t,e),t}(r.AbstractMessage)},IouD:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(){_classCallCheck(this,e)}},"Ir+t":function(e,t,n){n("3+Ww"),n("C5kU"),n("ZY/g"),n("xXl2"),n("Nlwn"),n("XLeT"),e.exports=n("VSTI").Promise},JAUQ:function(e,t,n){var r=n("ekG2");e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},JKKi:function(e,t,n){var r=n("d+lc"),i=n("ekG2"),o=n("8sL3");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},JO7F:function(e,t,n){e.exports={default:n("ZblS"),__esModule:!0}},JpO0:function(e,t,n){var r=n("CYMq"),i=n("znrX");n("czaS")("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},Jt1Q:function(e,t,n){"use strict";var r=n("b08l"),i=n("ENu8"),o=n("kvAF"),s={};n("BRsN")(s,n("zBWt")("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},KgOX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncMap=t.SyncMapImpl=void 0;var r=n("IMmU"),i=n("v2fs"),o=n("PyJ+"),s=n("PalJ"),a=n("BUbV"),u=n("mK5Q"),l=n("/2MY"),c=n("9y9p"),d=n("oaU9"),f=n("PEWQ"),h=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).updateMergingQueue=new d.NamespacedMergingQueue((function(e,t){return"number"==typeof t.ttl?{ttl:t.ttl}:e})),i.cache=new c.Cache,i.descriptor=n,i.descriptor.date_updated=new Date(i.descriptor.date_updated),n.items&&n.items.forEach((function(e){e.date_updated=new Date(e.date_updated),i.cache.store(e.key,new u.MapItem(e),e.last_event_id)})),i}var n,a,f,h,p,g,v,m,y,b,k,_,C,w;return _inherits(t,e),_createClass(t,[{key:"set",value:(w=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,i){var o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i||{},e.abrupt("return",(r.validateOptionalTtl(o.ttl),this.updateMergingQueue.squashAndAdd(t,o,(function(e){return s._putItemUnconditionally(t,n,e.ttl)}))));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return w.apply(this,arguments)})},{key:"get",value:(C=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.cache.has(t)?this.cache.get(t):this._getItemFromServer(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"_getItemFromServer",value:(_=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryItems({key:t});case 2:if(!((n=e.sent).items.length<1)){e.next=5;break}throw new o.SyncError("No item with key ".concat(t," found"),404,54201);case 5:return e.abrupt("return",n.items[0]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"mutate",value:(k=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,i){var o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i||{},e.abrupt("return",(r.validateOptionalTtl(o.ttl),this.updateMergingQueue.add(t,o,(function(e){return s._putItemWithIfMatch(t,n,e.ttl)}))));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return k.apply(this,arguments)})},{key:"update",value:(b=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mutate(t,(function(e){return Object.assign(e,n)}),r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return b.apply(this,arguments)})},{key:"_putItemUnconditionally",value:(y=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){var i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._putItemToServer(t,n,void 0,r);case 2:return i=e.sent,o=i.item,e.abrupt("return",(this._handleItemMutated(o.key,o.url,o.last_event_id,o.revision,o.data,o.date_updated,o.date_expires,i.added,!1),this.cache.get(o.key)));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return y.apply(this,arguments)})},{key:"_putItemWithIfMatch",value:(m=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,i){var o,s,a,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(t).catch((function(e){if(404===e.status)return new u.MapItem({key:t,data:{},last_event_id:-1,revision:"-1",url:null,date_updated:null,date_expires:null});throw e}));case 2:if(o=e.sent,s=n(r.deepClone(o.value))){e.next=6;break}return e.abrupt("return",o);case 6:return a=o.revision,e.prev=7,e.next=10,this._putItemToServer(t,s,a,i);case 10:return l=e.sent,c=l.item,e.abrupt("return",(this._handleItemMutated(c.key,c.url,c.last_event_id,c.revision,c.data,c.date_updated,c.date_expires,l.added,!1),this.cache.get(c.key)));case 15:if(e.prev=15,e.t0=e.catch(7),412!==e.t0.status){e.next=21;break}return e.next=20,this._getItemFromServer(t);case 20:return e.abrupt("return",this._putItemWithIfMatch(t,n,i));case 21:throw e.t0;case 22:case"end":return e.stop()}}),e,this,[[7,15]])}))),function(e,t,n){return m.apply(this,arguments)})},{key:"_putItemToServer",value:(v=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r,o){var s,a,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new i.UriBuilder(this.links.items).pathSegment(t).build(),a={data:n},void 0!==o&&(a.ttl=o),e.prev=2,e.next=5,this.services.network.put(s,a,r);case 5:return u=e.sent,l=u.body,e.abrupt("return",(l.data=n,l.date_updated=new Date(l.date_updated),{added:201===u.status.code,item:l}));case 10:throw e.prev=10,e.t0=e.catch(2),404===e.t0.status&&this.onRemoved(!1),e.t0;case 13:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(e,t,n,r){return v.apply(this,arguments)})},{key:"remove",value:(g=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}throw new Error("Key argument is invalid");case 2:return e.next=4,this.get(t);case 4:return n=e.sent,e.next=7,this.services.network.delete(n.uri);case 7:r=e.sent,this._handleItemRemoved(t,r.body.last_event_id,void 0,new Date(r.body.date_updated),!1);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"queryItems",value:(p=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,o,s,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||{},n=new i.UriBuilder(this.links.items).queryParam("From",t.from).queryParam("PageSize",t.limit).queryParam("Key",t.key).queryParam("PageToken",t.pageToken).queryParam("Order",t.order).build(),e.next=4,this.services.network.get(n);case 4:return r=e.sent,o=r.body.items.map((function(e){return e.date_updated=new Date(e.date_updated),a.cache.get(e.key)?a._handleItemMutated(e.key,e.url,e.last_event_id,e.revision,e.data,e.date_updated,e.date_expires,!1,!0):a.cache.store(e.key,new u.MapItem(e),e.last_event_id),a.cache.get(e.key)})),s=r.body.meta,e.abrupt("return",new l.Paginator(o,(function(e){return a.queryItems({pageToken:e})}),s.previous_token,s.next_token));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"getItems",value:(h=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(r.validatePageSize((t=t||{}).pageSize),t.limit=t.pageSize||t.limit||50,t.order=t.order||"asc",this.queryItems(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"shouldIgnoreEvent",value:function(e,t){return this.cache.isKnown(e,t)}},{key:"_update",value:function(e,t){switch(e.date_created=new Date(e.date_created),e.type){case"map_item_added":case"map_item_updated":this._handleItemMutated(e.item_key,e.item_url,e.id,e.item_revision,e.item_data,e.date_created,void 0,"map_item_added"===e.type,!0);break;case"map_item_removed":this._handleItemRemoved(e.item_key,e.id,e.item_data,e.date_created,!0);break;case"map_removed":this.onRemoved(!1)}t&&this._advanceLastEventId(e.id,e.map_revision)}},{key:"_advanceLastEventId",value:function(e,t){this.lastEventId<e&&(this.descriptor.last_event_id=e,t&&(this.descriptor.revision=t))}},{key:"_updateRootDateUpdated",value:function(e){(!this.descriptor.date_updated||e.getTime()>this.descriptor.date_updated.getTime())&&(this.descriptor.date_updated=e,this.services.storage.update(this.type,this.sid,this.uniqueName,{date_updated:e}))}},{key:"_handleItemMutated",value:function(e,t,n,r,i,o,a,l,c){if(this.shouldIgnoreEvent(e,n))s.default.trace("Item ",e," update skipped, current:",this.lastEventId,", remote:",n);else{this._updateRootDateUpdated(o);var d=this.cache.get(e);d?(d.update(n,r,i,o),this.cache.store(e,d,n),void 0!==a&&d.updateDateExpires(a),this.emitItemMutationEvent(d,c,!1)):(d=new u.MapItem({key:e,url:t,last_event_id:n,revision:r,data:i,date_updated:o,date_expires:a}),this.cache.store(e,d,n),this.emitItemMutationEvent(d,c,l))}}},{key:"emitItemMutationEvent",value:function(e,t,n){this.broadcastEventToListeners(n?"itemAdded":"itemUpdated",{item:e,isLocal:!t})}},{key:"_handleItemRemoved",value:function(e,t,n,r,i){this._updateRootDateUpdated(r),this.cache.delete(e,t),this.broadcastEventToListeners("itemRemoved",{key:e,isLocal:!i,value:n})}},{key:"onRemoved",value:function(e){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:e})}},{key:"setTtl",value:(f=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.validateMandatoryTtl(t),e.prev=1,n={ttl:t},e.next=5,this.services.network.post(this.uri,n);case 5:i=e.sent,this.descriptor.date_expires=i.body.date_expires,e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),404===e.t0.status&&this.onRemoved(!1),e.t0;case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return f.apply(this,arguments)})},{key:"setItemTtl",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.validateMandatoryTtl(n),e.next=3,this.get(t);case 3:return i=e.sent,o={ttl:n},e.next=7,this.services.network.post(i.uri,o);case 7:s=e.sent,i.updateDateExpires(s.body.date_expires);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"removeMap",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"map"}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}}],[{key:"type",get:function(){return"map"}}]),t}(a.SyncEntity);t.SyncMapImpl=h;var p=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).syncMapImpl=e,n.syncMapImpl.attach(_assertThisInitialized(n)),n}var n,r,i,o,s,a,u,l,c;return _inherits(t,e),_createClass(t,[{key:"set",value:(c=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncMapImpl.set(t,n,r)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return c.apply(this,arguments)})},{key:"get",value:(l=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncMapImpl.get(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"mutate",value:(u=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncMapImpl.mutate(t,n,r)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return u.apply(this,arguments)})},{key:"update",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncMapImpl.update(t,n,r)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"remove",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncMapImpl.remove(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getItems",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncMapImpl.getItems(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"setTtl",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncMapImpl.setTtl(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"setItemTtl",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncMapImpl.setItemTtl(t,n)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"removeMap",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ensureNotClosed(),e.next=3,this.syncMapImpl.removeMap();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"close",value:function(){_get(_getPrototypeOf(t.prototype),"close",this).call(this),this.syncMapImpl.detach(this.listenerUuid)}},{key:"uri",get:function(){return this.syncMapImpl.uri}},{key:"links",get:function(){return this.syncMapImpl.links}},{key:"revision",get:function(){return this.syncMapImpl.revision}},{key:"lastEventId",get:function(){return this.syncMapImpl.lastEventId}},{key:"dateExpires",get:function(){return this.syncMapImpl.dateExpires}},{key:"type",get:function(){return h.type}},{key:"sid",get:function(){return this.syncMapImpl.sid}},{key:"uniqueName",get:function(){return this.syncMapImpl.uniqueName}},{key:"dateUpdated",get:function(){return this.syncMapImpl.dateUpdated}}],[{key:"type",get:function(){return h.type}}]),t}(f.Closeable);t.SyncMap=p,t.default=p},KnDq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryEvent=t.Telemetry=void 0;var r=n("NDb0");t.TelemetryEvent=function(){return function e(t,n,r,i,o,s){_classCallCheck(this,e),this.start=t,this.end=n,this.title=r,this.details=i,this.id=o,this.type=s}}(),t.Telemetry=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).method="telemetry.v1",n.events=e,n}return _inherits(t,e),t}(r.AbstractMessage)},KtlF:function(e,t,n){var r=n("aqg2"),i=n("AjXP");e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},"L+wn":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStorage=void 0,t.SessionStorage=function(){function e(t,n){_classCallCheck(this,e),this.config=t,this.storageId=null;try{this.storage=n||sessionStorage}catch(r){}}return _createClass(e,[{key:"storageKey",value:function(e,t){return"".concat(this.storageId,"::").concat(e,"::").concat(t)}},{key:"updateStorageId",value:function(e){this.storageId=e}},{key:"store",value:function(e,t,n){return this.isReady?this._store(this.storageKey(e,t),n):null}},{key:"read",value:function(e,t){return this.isReady?this._read(this.storageKey(e,t)):null}},{key:"remove",value:function(e,t,n){if(!this.isReady)return null;try{this.storage.removeItem(this.storageKey(e,t)),n&&this.storage.removeItem(this.storageKey(e,n))}catch(r){}}},{key:"update",value:function(e,t,n,r){if(!this.isReady)return null;this._apply(this.storageKey(e,t),r),n&&this._apply(this.storageKey(e,n),r)}},{key:"_store",value:function(e,t){try{this.storage.setItem(e,JSON.stringify(t))}catch(n){}}},{key:"_read",value:function(e){try{var t=this.storage.getItem(e);if(t)return JSON.parse(t)}catch(n){}return null}},{key:"_apply",value:function(e,t){var n=this._read(e);if(!n)return!1;this._store(e,Object.assign(n,t))}},{key:"isReady",get:function(){return this.config.sessionStorageEnabled&&!!this.storageId}}]),e}()},L5Xn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTests=t.createPatch=t.applyPatch=void 0;var r=n("b0Ca"),i=n("MJ8e"),o=n("RoUj");function s(e,t){var n=r.Pointer.fromJSON(t).evaluate(e);if(void 0!==n)return{op:"test",path:t,value:n.value}}t.applyPatch=function(e,t){return t.map((function(t){return i.apply(e,t)}))},t.createPatch=function(e,t,n){var i=new r.Pointer;return(n?function(e){return function t(n,r,i){var s=e(n,r,i);return Array.isArray(s)?s:o.diffAny(n,r,i,t)}}(n):o.diffAny)(e,t,i)},t.createTests=function(e,t){var n=new Array;return t.filter(o.isDestructive).forEach((function(t){var r=s(e,t.path);if(r&&n.push(r),"from"in t){var i=s(e,t.from);i&&n.push(i)}})),n}},L5mX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwilsockReplyError=void 0;var r=n("7FP+");t.TwilsockReplyError=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).reply=n,r}return _inherits(t,e),t}(r.TwilsockError)},L5pH:function(e,t){e.exports=function(){}},LHh4:function(e,t,n){"use strict";var r,i=n("7whZ"),o=n("rNHk")(0),s=n("ugGH"),a=n("40oJ"),u=n("By1P"),l=n("qwtH"),c=n("ekG2"),d=n("JAUQ"),f=n("JAUQ"),h=!i.ActiveXObject&&"ActiveXObject"in i,p=a.getWeak,g=Object.isExtensible,v=l.ufstore,m=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(c(e)){var t=p(e);return!0===t?v(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(d(this,"WeakMap"),e,t)}},b=e.exports=n("M+fh")("WeakMap",m,y,l,!0,!0);f&&h&&(u((r=l.getConstructor(m,"WeakMap")).prototype,y),a.NEED=!0,o(["delete","has","get","set"],(function(e){var t=b.prototype,n=t[e];s(t,e,(function(t,i){if(c(t)&&!g(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)}))})))},LQWY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clone=t.objectType=t.hasOwnProperty=void 0,t.hasOwnProperty=Object.prototype.hasOwnProperty,t.objectType=function(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"array":typeof e},t.clone=function e(n){if(null==n||"object"!=typeof n)return n;if(n.constructor==Array){for(var r=n.length,i=new Array(r),o=0;o<r;o++)i[o]=e(n[o]);return i}var s={};for(var a in n)t.hasOwnProperty.call(n,a)&&(s[a]=e(n[a]));return s}},Li4W:function(e,t,n){n("1i29")("Set")},Lr1a:function(e,t,n){n("JpO0"),e.exports=n("VSTI").Object.getPrototypeOf},"M+fh":function(e,t,n){"use strict";var r=n("7whZ"),i=n("USwo"),o=n("40oJ"),s=n("S4vA"),a=n("BRsN"),u=n("iZ5/"),l=n("wlNh"),c=n("ukM9"),d=n("ekG2"),f=n("kvAF"),h=n("GhSp").f,p=n("rNHk")(0),g=n("C61u");e.exports=function(e,t,n,v,m,y){var b=r[e],k=b,_=m?"set":"add",C=k&&k.prototype,w={};return g&&"function"==typeof k&&(y||C.forEach&&!s((function(){(new k).entries().next()})))?(k=t((function(t,n){c(t,k,e,"_c"),t._c=new b,null!=n&&l(n,m,t[_],t)})),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;e in C&&(!y||"clear"!=e)&&a(k.prototype,e,(function(n,r){if(c(this,k,e),!t&&y&&!d(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i}))})),y||h(k.prototype,"size",{get:function(){return this._c.size}})):(k=v.getConstructor(t,e,m,_),u(k.prototype,n),o.NEED=!0),f(k,e),w[e]=k,i(i.G+i.W+i.F,w),y||v.setStrong(k,e,m),k}},M5dz:function(e,t,n){var r=n("ekG2");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},MBy0:function(e,t,n){n("4Zg2")("asyncIterator")},MJ8e:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.InvalidOperationError=t.test=t.copy=t.move=t.replace=t.remove=t.add=t.TestError=t.MissingError=void 0;var o=n("b0Ca"),s=n("LQWY"),a=n("NjAj"),u=function(e){function t(t){var n=e.call(this,"Value required at path: "+t)||this;return n.path=t,n.name="MissingError",n}return i(t,e),t}(Error);t.MissingError=u;var l=function(e){function t(t,n){var r=e.call(this,"Test failed: "+t+" != "+n)||this;return r.actual=t,r.expected=n,r.name="TestError",r}return i(t,e),t}(Error);function c(e,t,n){if(Array.isArray(e))if("-"==t)e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function d(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function f(e,t){var n=o.Pointer.fromJSON(t.path).evaluate(e);return void 0===n.parent?new u(t.path):(c(n.parent,n.key,s.clone(t.value)),null)}function h(e,t){var n=o.Pointer.fromJSON(t.path).evaluate(e);return void 0===n.value?new u(t.path):(d(n.parent,n.key),null)}function p(e,t){var n=o.Pointer.fromJSON(t.path).evaluate(e);if(null===n.parent)return new u(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new u(t.path)}else if(void 0===n.value)return new u(t.path);return n.parent[n.key]=t.value,null}function g(e,t){var n=o.Pointer.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new u(t.from);var r=o.Pointer.fromJSON(t.path).evaluate(e);return void 0===r.parent?new u(t.path):(d(n.parent,n.key),c(r.parent,r.key,n.value),null)}function v(e,t){var n=o.Pointer.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new u(t.from);var r=o.Pointer.fromJSON(t.path).evaluate(e);return void 0===r.parent?new u(t.path):(c(r.parent,r.key,s.clone(n.value)),null)}function m(e,t){var n=o.Pointer.fromJSON(t.path).evaluate(e);return a.compare(n.value,t.value)?null:new l(n.value,t.value)}t.TestError=l,t.add=f,t.remove=h,t.replace=p,t.move=g,t.copy=v,t.test=m;var y=function(e){function t(t){var n=e.call(this,"Invalid operation: "+t.op)||this;return n.operation=t,n.name="InvalidOperationError",n}return i(t,e),t}(Error);t.InvalidOperationError=y,t.apply=function(e,t){switch(t.op){case"add":return f(e,t);case"remove":return h(e,t);case"replace":return p(e,t);case"move":return g(e,t);case"copy":return v(e,t);case"test":return m(e,t)}return new y(t)}},MZ0W:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.Logger=void 0;var r=n("XH0y").getLogger("twilsock");function i(e,t){return["".concat((new Date).toISOString()," Twilsock ").concat(e,":")].concat(Array.from(t))}var o=function(){function e(t){_classCallCheck(this,e),this.prefix="",this.prefix=null!=t&&t.length>0?" "+t+":":""}return _createClass(e,[{key:"setLevel",value:function(e){r.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.debug.apply(null,i("T",t))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.debug.apply(null,i("D",t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.info.apply(null,i("I",t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.warn.apply(null,i("W",t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.error.apply(null,i("E",t))}}],[{key:"setLevel",value:function(e){r.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.trace.apply(null,i("T",t))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.debug.apply(null,i("D",t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.info.apply(null,i("I",t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.warn.apply(null,i("W",t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.error.apply(null,i("E",t))}}]),e}();t.Logger=o;var s=new o("");t.log=s},MrV2:function(e,t,n){var r=n("USwo");r(r.S,"Number",{isInteger:n("PAC6")})},N4c9:function(e,t,n){n("wYM1");var r=n("VSTI").Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},"N7/N":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("s7LF"),i=n("quSY"),o=function(){function e(t,n,o,s,a){_classCallCheck(this,e),this.data=t,this.dialogRef=n,this.fB=o,this.reservationsService=s,this.snackBar=a,this.form=this.fB.group({motive:["",[r.x.required,r.x.maxLength(400)]]}),this.cancellationSubscription=i.a.EMPTY,this.visibleContent="motiveForm"}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.cancellationSubscription.unsubscribe()}},{key:"requestCancellation",value:function(){var e=this;if(this.form.valid){var t=this.form.get("motive").value;this.cancellationSubscription=this.reservationsService.cancelReservation(this.data.reservationId,t).subscribe((function(){e.cancellationSubscription.unsubscribe(),e.closeDialog(!0),e.openSnackBar("Cancelaste la solicitud","Entendido")}))}}},{key:"closeDialog",value:function(e){this.dialogRef.close(e)}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:2e3})}},{key:"setVisibleSection",value:function(e){this.visibleContent=e}}]),e}()},NDb0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessage=void 0;var r=n("EcEN");t.AbstractMessage=function(){return function e(t){_classCallCheck(this,e),this.id=t||"TM".concat(r.v4())}}()},NRBv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InitReply=t.ContinuationTokenStatus=void 0;var r=n("NDb0");t.ContinuationTokenStatus=function(){return function e(){_classCallCheck(this,e)}}(),t.InitReply=function(e){function t(e,n,r,i,o,s,a){var u;return _classCallCheck(this,t),(u=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).continuationToken=n,u.continuationTokenStatus=r,u.offlineStorage=i,u.initRegistrations=o,u.debugInfo=s,u.confirmedCapabilities=a,u}return _inherits(t,e),t}(r.AbstractMessage)},NjAj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compare=void 0;var r=n("LQWY");t.compare=function e(t,n){if(t===n)return!0;var i=r.objectType(t),o=r.objectType(n);return"array"==i&&"array"==o?function(t,n){var r=t.length;if(r!==n.length)return!1;for(var i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}(t,n):"object"==i&&"object"==o&&function(t,n){var i=Object.keys(t),o=Object.keys(n),s=i.length;if(s!==o.length)return!1;for(var a=0;a<s;a++){var u=i[a];if(!r.hasOwnProperty.call(n,u)||!e(t[u],n[u]))return!1}return!0}(t,n)}},Nlwn:function(e,t,n){"use strict";var r=n("USwo"),i=n("VSTI"),o=n("7whZ"),s=n("2zfi"),a=n("JKKi");r(r.P+r.R,"Promise",{finally:function(e){var t=s(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return a(t,e()).then((function(){return n}))}:e,n?function(n){return a(t,e()).then((function(){throw n}))}:e)}})},ODRq:function(e,t,n){e.exports={default:n("FkhZ"),__esModule:!0}},"OS/M":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(){_classCallCheck(this,e)}},OTpG:function(e,t,n){"use strict";var r=n("5ETA"),i=n("USwo"),o=n("ugGH"),s=n("BRsN"),a=n("ig3W"),u=n("Jt1Q"),l=n("kvAF"),c=n("znrX"),d=n("zBWt")("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,p,g,v,m){u(n,t,p);var y,b,k,_=function(e){if(!f&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},C=t+" Iterator",w="values"==g,x=!1,O=e.prototype,S=O[d]||O["@@iterator"]||g&&O[g],P=S||_(g),M=g?w?_("entries"):P:void 0,T="Array"==t&&O.entries||S;if(T&&(k=c(T.call(new e)))!==Object.prototype&&k.next&&(l(k,C,!0),r||"function"==typeof k[d]||s(k,d,h)),w&&S&&"values"!==S.name&&(x=!0,P=function(){return S.call(this)}),r&&!m||!f&&!x&&O[d]||s(O,d,P),a[t]=P,a[C]=h,g)if(y={values:w?P:_("values"),keys:v?P:_("keys"),entries:M},m)for(b in y)b in O||o(O,b,y[b]);else i(i.P+i.F*(f||x),t,y);return y}},Oa1h:function(e,t,n){var r=n("bKEA"),i=n("0WpP"),o=n("nRFE");e.exports=function(e){return function(t,n,s){var a,u=r(t),l=i(u.length),c=o(s,l);if(e&&n!=n){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},OnFN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Media=function(){function e(t,n,r){_classCallCheck(this,e),this.config=t,this.network=n,this._update(r)}var t;return _createClass(e,[{key:"getContentUrl",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.network.get("".concat(this.config.baseUrl,"/").concat(this.sid));case 2:return t=e.sent,e.abrupt("return",(this._update(t.body),Promise.resolve(this.state.contentDirectUrl)));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_update",value:function(e){this.state={sid:e.sid,serviceSid:e.service_sid,channelSid:e.channel_sid,messageSid:e.message_sid,dateCreated:e.date_created?new Date(e.date_created):null,dateUpdated:e.date_updated?new Date(e.date_updated):null,size:e.size,contentType:e.content_type,url:e.url,contentUrl:e.links.content,contentDirectUrl:e.links.content_direct_temporary,filename:e.filename?e.filename:null}}},{key:"sid",get:function(){return this.state.sid}},{key:"serviceSid",get:function(){return this.state.serviceSid}},{key:"dateCreated",get:function(){return this.state.dateCreated}},{key:"dateUpdated",get:function(){return this.state.dateUpdated}},{key:"contentType",get:function(){return this.state.contentType}},{key:"size",get:function(){return this.state.size}},{key:"fileName",get:function(){return this.state.filename}}]),e}()},OxZ0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PacketInterface=t.PacketResponse=void 0;var r=n("uShU"),i=n("EcEN"),o=n("7FP+"),s=n("L5mX"),a=n("CQrr"),u=n("w7D8"),l=n("BG5D");t.PacketResponse=function(){return function e(){_classCallCheck(this,e)}}(),t.PacketInterface=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.config=n,this.activeRequests=new Map,this.channel=t,this.channel.on("reply",(function(e){return r.processReply(e)})),this.channel.on("disconnected",(function(){r.activeRequests.forEach((function(e){clearTimeout(e.timeout),e.reject(new o.TwilsockError("disconnected"))})),r.activeRequests.clear()}))}var t;return _createClass(e,[{key:"processReply",value:function(e){var t,n=this.activeRequests.get(e.id);n&&(clearTimeout(n.timeout),this.activeRequests.delete(e.id),(t=e.status.code)>=200&&t<300?n.resolve(e):(n.reject(new s.TwilsockReplyError("Transport failure: "+e.status.status,e)),r.log.trace("message rejected")))}},{key:"storeRequest",value:function(e,t,n){var i={resolve:t,reject:n,timeout:setTimeout((function(){r.log.trace("request",e,"is timed out"),n(new o.TwilsockError("Twilsock: request timeout: "+e))}),3e4)};this.activeRequests.set(e,i)}},{key:"shutdown",value:function(){this.activeRequests.forEach((function(e){clearTimeout(e.timeout),e.reject(new o.TwilsockError("Twilsock: request cancelled by user"))})),this.activeRequests.clear()}},{key:"sendInit",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.log.trace("sendInit"),t=l.Metadata.getMetadata(this.config),n=new u.Init(this.config.token,this.config.continuationToken,t,this.config.initRegistrations,this.config.tweaks),e.next=5,this.sendWithReply(n);case 5:return i=e.sent,e.abrupt("return",new u.InitReply(i.id,i.header.continuation_token,i.header.continuation_token_status,i.header.offline_storage,i.header.init_registrations,i.header.debug_info,new Set(i.header.capabilities)));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"sendClose",value:function(){var e=new u.Close;this.send(e)}},{key:"sendWithReply",value:function(e,t){var n=this;return new Promise((function(r,i){var o=n.send(e,t);n.storeRequest(o,r,i)}))}},{key:"send",value:function(e,t){e.id=e.id||"TM".concat(i.v4());var n=a.Parser.createPacket(e,function(e){switch(typeof e){case"undefined":return"";case"object":return JSON.stringify(e);default:return e}}(t));try{return this.channel.send(n),e.id}catch(o){throw r.log.debug("failed to send ",e,o),r.log.trace(o.stack),o}}},{key:"isConnected",get:function(){return this.channel.isConnected}}]),e}()},P15O:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InitReply=t.ContinuationTokenStatus=void 0;var r=n("PmLG");t.ContinuationTokenStatus=function(){return function e(){_classCallCheck(this,e)}}(),t.InitReply=function(e){function t(e,n,r,i,o,s,a){var u;return _classCallCheck(this,t),(u=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).continuationToken=n,u.continuationTokenStatus=r,u.offlineStorage=i,u.initRegistrations=o,u.debugInfo=s,u.confirmedCapabilities=a,u}return _inherits(t,e),t}(r.AbstractMessage)},P2sY:function(e,t,n){e.exports={default:n("uccp"),__esModule:!0}},PAC6:function(e,t,n){var r=n("ekG2"),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},PDjf:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return s}));var r=function e(){_classCallCheck(this,e)},i=function e(t){_classCallCheck(this,e),this._animationMode=t},o=function e(){_classCallCheck(this,e)},s=function e(){_classCallCheck(this,e)},a=function e(){_classCallCheck(this,e)}},PEWQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Closeable=void 0;var r=n("+qE3"),i=n("EcEN"),o=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).closed=!1,e.uuid=i(),e}return _inherits(t,e),_createClass(t,[{key:"close",value:function(){this.removeAllListeners(),this.closed=!0}},{key:"ensureNotClosed",value:function(){if(this.closed)throw new Error("Invalid operation on closed object")}},{key:"listenerUuid",get:function(){return this.uuid}}]),t}(r.EventEmitter);t.Closeable=o,t.default=o},PJ8w:function(e,t,n){"use strict";var r=n("USwo");e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},PWsN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntitiesCache=void 0,t.EntitiesCache=function(){function e(){_classCallCheck(this,e),this.names=new Map,this.entities=new Map}return _createClass(e,[{key:"store",value:function(e){return this.entities.get(e.sid)||(this.entities.set(e.sid,e),e.uniqueName&&this.names.set(e.type+"::"+e.uniqueName,e.sid),e)}},{key:"getResolved",value:function(e,t){var n=this.names.get(t+"::"+e);return n?this.entities.get(n):null}},{key:"get",value:function(e,t){return this.entities.get(e)||this.getResolved(e,t)||null}},{key:"remove",value:function(e){var t=this.entities.get(e);t&&(this.entities.delete(e),t.uniqueName&&this.names.delete(t.type+"::"+t.uniqueName))}}]),e}()},PalJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("XH0y").getLogger("twilio-sync");function i(e,t){return["".concat((new Date).toISOString()," Sync ").concat(e,":")].concat(Array.from(t))}t.default={setLevel:function(e){r.setLevel(e)},trace:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.trace.apply(null,i("T",t))},debug:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.debug.apply(null,i("D",t))},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.info.apply(null,i("I",t))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.warn.apply(null,i("W",t))},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.error.apply(null,i("E",t))}}},PfQu:function(e,t,n){"use strict";var r=n("rdj4"),i=n("JAUQ");e.exports=n("M+fh")("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},PmLG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessage=void 0;var r=n("EcEN");t.AbstractMessage=function(){return function e(t){_classCallCheck(this,e),this.id=t||"TM".concat(r.v4())}}()},"PyJ+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncNetworkError=t.SyncError=void 0;var r=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).name=n.constructor.name,n.message="".concat(e," (status: ").concat(r,", code: ").concat(i,")"),n.status=r,n.code=i,n}return _inherits(t,_wrapNativeSuper(Error)),t}();t.SyncError=r,t.SyncNetworkError=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r,i))).body=o,n}return _inherits(t,e),t}(r),t.default=r},Q3x1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.Logger=void 0;var r=n("XH0y");function i(e,t){return["".concat((new Date).toISOString()," Notifications ").concat(e,":")].concat(Array.from(t))}var o=function(){function e(){_classCallCheck(this,e),this.prefix=""}return _createClass(e,[{key:"setLevel",value:function(e){r.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.debug.apply(null,i("T"+this.prefix,t))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.debug.apply(null,i("D"+this.prefix,t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.info.apply(null,i("I"+this.prefix,t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.warn.apply(null,i("W"+this.prefix,t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.error.apply(null,i("E"+this.prefix,t))}}],[{key:"scope",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new e}}]),e}();t.Logger=o;var s=o.scope();t.log=s},QQLf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var r=n("PalJ"),i=function(){function e(t){var n=this;_classCallCheck(this,e),this.config=t.config,this.subscriptions=t.subscriptions,this.notifications=t.notifications,this.notifications.subscribe("twilio.sync.event"),this.notifications.subscribe("com.twilio.rtd.cds.document"),this.notifications.subscribe("com.twilio.rtd.cds.list"),this.notifications.subscribe("com.twilio.rtd.cds.map"),this.notifications.on("message",(function(e,t){return n.onMessage(e,t)})),this.notifications.on("transportReady",(function(e){return n.onConnectionStateChanged(e)}))}return _createClass(e,[{key:"onMessage",value:function(e,t){switch(r.default.trace("Notification type:",e,"content:",t),e){case"com.twilio.rtd.cds.document":case"com.twilio.rtd.cds.list":case"com.twilio.rtd.cds.map":this.subscriptions.acceptMessage(t,!1);break;case"twilio.sync.event":this.subscriptions.acceptMessage(t,!0)}}},{key:"subscribe",value:function(e,t){this.subscriptions.add(e,t)}},{key:"unsubscribe",value:function(e){this.subscriptions.remove(e)}},{key:"onConnectionStateChanged",value:function(e){this.subscriptions.onConnectionStateChanged(e)}}]),e}();t.Router=i,t.default=i},QRdY:function(e,t,n){n("xfML"),e.exports=n("VSTI").Object.setPrototypeOf},Qv35:function(e,t,n){e.exports={default:n("UWlV"),__esModule:!0}},RoUj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffAny=t.diffObjects=t.diffArrays=t.intersection=t.subtract=t.isDestructive=void 0;var r=n("NjAj"),i=n("LQWY");function o(e,t){var n={};for(var r in e)i.hasOwnProperty.call(e,r)&&void 0!==e[r]&&(n[r]=1);for(var o in t)i.hasOwnProperty.call(t,o)&&void 0!==t[o]&&delete n[o];return Object.keys(n)}function s(e){for(var t=e.length,n={},r=0;r<t;r++){var o=e[r];for(var s in o)i.hasOwnProperty.call(o,s)&&void 0!==o[s]&&(n[s]=(n[s]||0)+1)}for(var s in n)n[s]<t&&delete n[s];return Object.keys(n)}function a(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function u(e,t,n,i){void 0===i&&(i=c);var o={"0,0":{operations:[],cost:0}},s=isNaN(e.length)||e.length<=0?0:e.length,u=isNaN(t.length)||t.length<=0?0:t.length;return function n(i,s){var u=i+","+s,l=o[u];if(void 0===l){if(i>0&&s>0&&r.compare(e[i-1],t[s-1]))l=n(i-1,s-1);else{var c=[];if(i>0){var d=n(i-1,s);c.push(a(d,{op:"remove",index:i-1}))}if(s>0){var f=n(i,s-1);c.push(a(f,{op:"add",index:i-1,value:t[s-1]}))}if(i>0&&s>0){var h=n(i-1,s-1);c.push(a(h,{op:"replace",index:i-1,original:e[i-1],value:t[s-1]}))}l=c.sort((function(e,t){return e.cost-t.cost}))[0]}o[u]=l}return l}(s,u).operations.reduce((function(e,t){var r=e[0],o=e[1];if(function(e){return"add"===e.op}(t)){var a=t.index+1+o,u=a<s+o?String(a):"-",l={op:t.op,path:n.add(u).toString(),value:t.value};return[r.concat(l),o+1]}if(function(e){return"remove"===e.op}(t))return l={op:t.op,path:n.add(String(t.index+o)).toString()},[r.concat(l),o-1];var c=n.add(String(t.index+o)),d=i(t.original,t.value,c);return[r.concat.apply(r,d),o]}),[[],0])[0]}function l(e,t,n,r){void 0===r&&(r=c);var i=[];return o(e,t).forEach((function(e){i.push({op:"remove",path:n.add(e).toString()})})),o(t,e).forEach((function(e){i.push({op:"add",path:n.add(e).toString(),value:t[e]})})),s([e,t]).forEach((function(o){i.push.apply(i,r(e[o],t[o],n.add(o)))})),i}function c(e,t,n,r){if(void 0===r&&(r=c),e===t)return[];var o=i.objectType(e),s=i.objectType(t);return"array"==o&&"array"==s?u(e,t,n,r):"object"==o&&"object"==s?l(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}t.isDestructive=function(e){var t=e.op;return"remove"===t||"replace"===t||"copy"===t||"move"===t},t.subtract=o,t.intersection=s,t.diffArrays=u,t.diffObjects=l,t.diffAny=c},RpkJ:function(e,t,n){var r=n("ZWGZ"),i=n("USwo"),o=n("s2er")("metadata"),s=o.store||(o.store=new(n("LHh4"))),a=function(e,t,n){var i=s.get(e);if(!i){if(!n)return;s.set(e,i=new r)}var o=i.get(t);if(!o){if(!n)return;i.set(t,o=new r)}return o};e.exports={store:s,map:a,has:function(e,t,n){var r=a(t,n,!1);return void 0!==r&&r.has(e)},get:function(e,t,n){var r=a(t,n,!1);return void 0===r?void 0:r.get(e)},set:function(e,t,n,r){a(n,r,!0).set(e,t)},keys:function(e,t){var n=a(e,t,!1),r=[];return n&&n.forEach((function(e,t){r.push(t)})),r},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){i(i.S,"Reflect",e)}}},S4vA:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},S6HK:function(e,t,n){"use strict";var r=n("FgkJ"),i=n("ekG2"),o=n("Temt"),s=[].slice,a={},u=function(e,t,n){if(!(t in a)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";a[t]=Function("F,a","return new F("+r.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=s.call(arguments,1),a=function r(){var i=n.concat(s.call(arguments));return this instanceof r?u(t,i.length,i):o(t,i,e)};return i(t.prototype)&&(a.prototype=t.prototype),a}},SEkw:function(e,t,n){e.exports={default:n("N4c9"),__esModule:!0}},SGKw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenStorage=void 0;var r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"storeToken",value:function(t,n){e.canStore&&e.sessionStorage.setItem(e.getKeyName(n),t)}},{key:"getStoredToken",value:function(t){return e.canStore?e.sessionStorage.getItem(e.getKeyName(t)):null}},{key:"initialize",value:function(){e.canStore&&(e.sessionStorage.getItem(e.initializedFlag)&&this.clear(),e.sessionStorage.setItem(e.initializedFlag,"true"),e.window.addEventListener("unload",(function(){e.sessionStorage.removeItem(e.initializedFlag)})))}},{key:"clear",value:function(){if(e.canStore){for(var t=[],n=0;n<e.sessionStorage.length;n++){var r=e.sessionStorage.key(n);0===r.indexOf(e.tokenStoragePrefix)&&t.push(r)}t.forEach((function(t){return e.sessionStorage.removeItem(t)})),e.sessionStorage.removeItem(e.initializedFlag)}}},{key:"getKeyName",value:function(t){return"".concat(e.tokenStoragePrefix).concat(t)}},{key:"sessionStorage",get:function(){try{return global.sessionStorage}catch(e){return null}}},{key:"window",get:function(){try{return global.window}catch(e){return null}}},{key:"canStore",get:function(){return e.sessionStorage&&e.window}}]),e}();t.TokenStorage=r,r.initializedFlag="twilio_twilsock_token_storage",r.tokenStoragePrefix="twilio_continuation_token_",r.initialize()},SkeG:function(e,t,n){"use strict";var r=n("GhSp"),i=n("ENu8");e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},SwMz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncMapItem=t.SyncMap=t.SyncListItem=t.SyncList=t.SyncDocument=t.SyncClient=void 0;var r=n("zs2D");Object.defineProperty(t,"SyncClient",{enumerable:!0,get:function(){return r.SyncClient}});var i=n("oUms");Object.defineProperty(t,"SyncDocument",{enumerable:!0,get:function(){return i.SyncDocument}});var o=n("H86R");Object.defineProperty(t,"SyncList",{enumerable:!0,get:function(){return o.SyncList}});var s=n("1dR4");Object.defineProperty(t,"SyncListItem",{enumerable:!0,get:function(){return s.ListItem}});var a=n("KgOX");Object.defineProperty(t,"SyncMap",{enumerable:!0,get:function(){return a.SyncMap}});var u=n("mK5Q");Object.defineProperty(t,"SyncMapItem",{enumerable:!0,get:function(){return u.MapItem}}),t.default=r.SyncClient,e.exports=r.SyncClient,e.exports.SyncClient=r.SyncClient},Sxqd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0,t.Configuration=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.confirmedCapabilities=new Set,this.activeGrant=n,this._token=t,this.url=(r.twilsock||r.Twilsock||{}).uri||"wss://tsock.".concat(r.region||"us1",".twilio.com/v3/wsconnect"),this._continuationToken=r.continuationToken?r.continuationToken:null,this.logLevel=r.logLevel?r.logLevel:"error",this.retryPolicy=r.retryPolicy?r.retryPolicy:{min:1e3,max:12e4,randomness:.2},this.clientMetadata=r.clientMetadata?r.clientMetadata:{},this.clientMetadata.ver="0.5.14",this.initRegistrations=r.initRegistrations?r.initRegistrations:null,this.tweaks=r.tweaks?r.tweaks:null}return _createClass(e,[{key:"updateToken",value:function(e){this._token=e}},{key:"updateContinuationToken",value:function(e){this._continuationToken=e}},{key:"token",get:function(){return this._token}},{key:"continuationToken",get:function(){return this._continuationToken}}]),e}()},SzqN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientInfo=void 0;var r=n("+qwt"),i=function e(t){_classCallCheck(this,e),this.sdk="js",this.sdkVer=t,this.os=r.os.family,this.osVer=r.os.version,this.pl=r.name,this.plVer=r.version};t.ClientInfo=i,t.default=i},TSC6:function(e,t,n){var r=n("GRew"),i=n("ENu8"),o=n("bKEA"),s=n("M5dz"),a=n("nA4W"),u=n("+vXQ"),l=Object.getOwnPropertyDescriptor;t.f=n("C61u")?l:function(e,t){if(e=o(e),t=s(t,!0),u)try{return l(e,t)}catch(n){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},TYje:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},TZCi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwilsockReplyError=void 0;var r=n("arZA");t.TwilsockReplyError=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).reply=n,r}return _inherits(t,e),t}(r.TwilsockError)},Temt:function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},TnF5:function(e,t,n){n("4Zg2")("observable")},Trx6:function(e,t,n){var r=n("TYje");e.exports=Array.isArray||function(e){return"Array"==r(e)}},UR8F:function(e,t,n){n("C5kU"),n("ZY/g"),e.exports=n("/NTb").f("iterator")},USwo:function(e,t,n){var r=n("7whZ"),i=n("VSTI"),o=n("nAx8"),s=n("BRsN"),a=n("nA4W"),u=function e(t,n,u){var l,c,d,f=t&e.F,h=t&e.G,p=t&e.S,g=t&e.P,v=t&e.B,m=t&e.W,y=h?i:i[n]||(i[n]={}),b=y.prototype,k=h?r:p?r[n]:(r[n]||{}).prototype;for(l in h&&(u=n),u)(c=!f&&k&&void 0!==k[l])&&a(y,l)||(d=c?k[l]:u[l],y[l]=h&&"function"!=typeof k[l]?u[l]:v&&c?o(d,r):m&&k[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):g&&"function"==typeof d?o(Function.call,d):d,g&&((y.virtual||(y.virtual={}))[l]=d,t&e.R&&b&&!b[l]&&s(b,l,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},UWlV:function(e,t,n){n("XVPX"),e.exports=n("VSTI").Reflect.construct},Ut7X:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n("PmLG");t.Message=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).method="message",i.active_grant=e,i.payload_type=n,i.http_request=r,i}return _inherits(t,e),t}(r.AbstractMessage)},V6L8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwilsockImpl=t.TwilsockChannel=t.Response=void 0;var r=n("+qE3"),i=n("xDTo"),o=n("MZ0W"),s=n("bldR"),a=n("ioUz"),u=n("TZCi"),l=n("cRVY");t.Response=function(){return function e(){_classCallCheck(this,e)}}();var c=function(e){function t(e,n,r){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).terminalStates=["disconnected","rejected"],s.lastEmittedState=void 0,s.tokenExpiredSasCode=20104,s.terminationReason="Connection is not initialized",s.websocket=e,s.websocket.on("connected",(function(){return s.fsm.socketConnected()})),s.websocket.on("disconnected",(function(e){return s.fsm.socketClosed()})),s.websocket.on("message",(function(e){return s.onIncomingMessage(e)})),s.websocket.on("socketError",(function(e){return s.emit("connectionError",{terminal:!1,message:e.message,httpStatusCode:null,errorCode:null})})),s.transport=n,s.config=r,s.retrier=new l.BackoffRetrier(r.retryPolicy),s.retrier.on("attempt",(function(){return s.retry()})),s.retrier.on("failed",(function(e){o.log.warn("Retrying failed: ".concat(e.message)),s.disconnect()})),"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",(function(){o.log.debug("Browser reported connectivity state: online"),s.fsm.systemOnline()})),window.addEventListener("offline",(function(){o.log.debug("Browser reported connectivity state: offline"),s.websocket.close(),s.fsm.socketClosed()}))),s.fsm=new i({init:"disconnected",transitions:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"},{name:"userSend",from:["connected"],to:"connected"},{name:"systemOnline",from:["retrying"],to:"connecting"}],methods:{onConnecting:function(){s.setupSocket(),s.emit("connecting")},onEnterInitialising:function(){s.sendInit()},onLeaveInitialising:function(){s.cancelInit()},onEnterUpdating:function(){s.sendUpdate()},onLeaveUpdating:function(){s.cancelUpdate()},onEnterRetrying:function(){s.initRetry(),s.emit("connecting")},onEnterConnected:function(){s.resetBackoff(),s.onConnected()},onUserUpdateToken:function(){s.resetBackoff()},onTokenRejected:function(){s.resetBackoff(),s.closeSocket(!0),s.finalizeSocket()},onUserDisconnect:function(){s.closeSocket(!0)},onEnterDisconnecting:function(){s.startDisconnectTimer()},onLeaveDisconnecting:function(){s.cancelDisconnectTimer()},onEnterWaitSocketClosed:function(){s.startDisconnectTimer()},onLeaveWaitSocketClosed:function(){s.cancelDisconnectTimer()},onEnterWaitOffloadSocketClosed:function(){s.startDisconnectTimer()},onLeaveWaitOffloadSocketClosed:function(){s.cancelDisconnectTimer()},onDisconnected:function(){s.resetBackoff(),s.finalizeSocket()},onReceiveClose:function(e,t){s.onCloseReceived(t)},onReceiveOffload:function(e,t){o.log.debug("onreceiveoffload: ",t),s.modifyBackoff(t.body),s.onCloseReceived(t.status)},onUnsupported:function(){s.closeSocket(!0),s.finalizeSocket()},onError:function(e,t){s.closeSocket(t),s.finalizeSocket()},onEnterState:function(e){"none"!==e.from&&s.changeState(e)},onInvalidTransition:function(e,t,n){o.log.warn("FSM: unexpected transition",t,n)}}}),s}var n,r;return _inherits(t,e),_createClass(t,[{key:"changeState",value:function(e){o.log.debug("FSM: ".concat(e.transition,": ").concat(e.from," --\x3e ").concat(e.to)),this.lastEmittedState!==this.state&&(this.lastEmittedState=this.state,this.emit("stateChanged",this.state))}},{key:"resetBackoff",value:function(){o.log.trace("resetBackoff"),this.retrier.stop()}},{key:"modifyBackoff",value:function(e){o.log.trace("modifyBackoff",e);var t=e?e.backoff_policy:null;t&&"number"==typeof t.reconnect_min_ms&&this.retrier.modifyBackoff(t.reconnect_min_ms)}},{key:"startDisconnectTimer",value:function(){var e=this;o.log.trace("startDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null),this.disconnectingTimer=setTimeout((function(){o.log.debug("disconnecting is timed out"),e.closeSocket(!0)}),3e3)}},{key:"cancelDisconnectTimer",value:function(){o.log.trace("cancelDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null)}},{key:"initRetry",value:function(){o.log.debug("initRetry"),this.retrier.inProgress?this.retrier.attemptFailed():this.retrier.start()}},{key:"retry",value:function(){"connecting"!=this.fsm.state?(o.log.trace("retry"),this.websocket.close(),this.fsm.userRetry()):o.log.trace("can\t retry as already connecting")}},{key:"onConnected",value:function(){this.emit("connected")}},{key:"finalizeSocket",value:function(){o.log.trace("finalizeSocket"),this.websocket.close(),this.emit("disconnected"),this.disconnectedPromiseResolve&&(this.disconnectedPromiseResolve(),this.disconnectedPromiseResolve=null)}},{key:"setupSocket",value:function(){o.log.trace("setupSocket:",this.config.token),this.emit("beforeConnect"),this.websocket.connect()}},{key:"onIncomingMessage",value:function(e){var t=a.Parser.parse(e),n=t.method,r=t.header,i=t.payload;if("reply"!==n&&this.confirmReceiving(r),"notification"===n)this.emit("message",r.message_type,i);else if("reply"===r.method)this.transport.processReply({id:r.id,status:r.status,header:r,body:i});else if("client_update"===r.method)"token_about_to_expire"===r.client_update_type&&this.emit("tokenAboutToExpire");else if("close"===r.method)if(308===r.status.code)o.log.debug("Connection has been offloaded"),this.fsm.receiveOffload({status:r.status.status,body:i});else if(406===r.status.code){var s="Server closed connection because can't parse protocol: ".concat(JSON.stringify(r.status));this.emitReplyConnectionError(s,r,!0),o.log.error(s),this.fsm.receiveFatalClose()}else 417===r.status.code?(o.log.error("Server closed connection because can't parse client reply: ".concat(JSON.stringify(r.status))),this.fsm.receiveFatalClose(r.status.status)):410===r.status.code?(o.log.warn("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status),this.emit("tokenExpired")):401===r.status.code?(o.log.error("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status)):(o.log.warn("unexpected message: ",r.status),this.fsm.receiveOffload({status:r.status.status,body:null}))}},{key:"sendInit",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.log.trace("sendInit"),e.prev=1,this.emit("beforeSendInit"),e.next=5,this.transport.sendInit();case 5:t=e.sent,this.config.updateContinuationToken(t.continuationToken),this.config.confirmedCapabilities=t.confirmedCapabilities,this.fsm.initSuccess(t),this.emit("initialized",t),this.emit("tokenUpdated"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),e.t0 instanceof u.TwilsockReplyError?(n=!1,o.log.warn("Init rejected by server: ".concat(JSON.stringify(e.t0.reply.status))),this.emit("sendInitFailed"),401===e.t0.reply.status.code||403===e.t0.reply.status.code?(n=!0,this.fsm.tokenRejected(e.t0.reply.status),e.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===e.t0.reply.status.code?(this.modifyBackoff(e.t0.reply.body),this.fsm.initError(!0)):this.fsm.initError(500!==e.t0.reply.status.code),this.emitReplyConnectionError(e.t0.message,e.t0.reply,n)):(this.terminationReason=e.t0.message,this.emit("connectionError",{terminal:!0,message:e.t0.message,httpStatusCode:null,errorCode:null}),this.fsm.initError(!0)),this.emit("tokenUpdated",e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return r.apply(this,arguments)})},{key:"sendUpdate",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.log.trace("sendUpdate"),t=new s.Update(this.config.token),e.prev=2,e.next=5,this.transport.sendWithReply(t);case 5:n=e.sent,this.fsm.updateSuccess(n.body),this.emit("tokenUpdated"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0 instanceof u.TwilsockReplyError?(r=!1,o.log.warn("Token update rejected by server: ".concat(JSON.stringify(e.t0.reply.status))),401===e.t0.reply.status.code||403===e.t0.reply.status.code?(r=!0,this.fsm.tokenRejected(e.t0.reply.status),e.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===e.t0.reply.status.code?(this.modifyBackoff(e.t0.reply.body),this.fsm.updateError(e.t0.reply.status)):this.fsm.updateError(e.t0.reply.status),this.emitReplyConnectionError(e.t0.message,e.t0.reply,r)):(this.emit("error",!1,e.t0.message,null,null),this.fsm.updateError(e.t0)),this.emit("tokenUpdated",e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(){return n.apply(this,arguments)})},{key:"emitReplyConnectionError",value:function(e,t,n){var r=t.status&&t.status.description?t.status.description:e,i=t.status.code,o=t.status&&t.status.errorCode?t.status.errorCode:null;n&&(this.terminationReason=r),this.emit("connectionError",{terminal:n,message:r,httpStatusCode:i,errorCode:o})}},{key:"cancelInit",value:function(){o.log.trace("cancelInit")}},{key:"cancelUpdate",value:function(){o.log.trace("cancelUpdate")}},{key:"confirmReceiving",value:function(e){o.log.trace("confirmReceiving");try{this.transport.send(new s.Reply(e.id))}catch(t){o.log.debug("failed to confirm packet receiving",t)}}},{key:"closeSocket",value:function(e){var t=this;o.log.trace("closeSocket (graceful: ".concat(e,")")),e&&this.transport.isConnected&&this.transport.sendClose(),this.websocket.close(),setTimeout((function(){return t.fsm.socketClosed()}),0)}},{key:"connect",value:function(){o.log.trace("connect"),this.fsm.userConnect()}},{key:"disconnect",value:function(){var e=this;return o.log.trace("disconnect"),this.fsm.is("disconnected")?Promise.resolve():new Promise((function(t){e.disconnectedPromiseResolve=t,e.fsm.userDisconnect()}))}},{key:"updateToken",value:function(e){var t=this;return o.log.trace("updateToken:",e),new Promise((function(e,n){t.once("tokenUpdated",(function(t){t?n(t):e()})),t.fsm.userUpdateToken()}))}},{key:"onCloseReceived",value:function(e){this.websocket.close()}},{key:"isConnected",get:function(){return"connected"===this.state&&this.websocket.isConnected}},{key:"state",get:function(){switch(this.fsm.state){case"connecting":case"initialising":case"retrying":case"error":return"connecting";case"updating":case"connected":return"connected";case"rejected":return"rejected";case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return"disconnecting";case"disconnected":default:return"disconnected"}}},{key:"isTerminalState",get:function(){return-1!==this.terminalStates.indexOf(this.fsm.state)}},{key:"getTerminationReason",get:function(){return this.terminationReason}}]),t}(r.EventEmitter);t.TwilsockChannel=c,t.TwilsockImpl=c},V7oC:function(e,t,n){"use strict";t.__esModule=!0;var r,i=(r=n("SEkw"))&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},V86R:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("auUO"),i=global.XMLHttpRequest||n(7).XMLHttpRequest,o=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(t,n){return e.request("GET",t,n)}},{key:"post",value:function(t,n,r){return e.request("POST",t,n,r)}}],[{key:"request",value:function(e,t,n,o){return new Promise((function(s,a){var u=new i;for(var l in u.open(e,t,!0),u.onreadystatechange=function(){if(4===u.readyState){var e,t=(e=u.getAllResponseHeaders())?e.split("\r\n").map((function(e){return e.split(": ")})).filter((function(e){return 2===e.length&&e[1].length>0})).reduce((function(e,t){return e[t[0]]=t[1],e}),{}):{},n=function(e){var t=e.getResponseHeader("Content-Type");if(!t||0!==t.indexOf("application/json")||0===e.responseText.length)return e.responseText;try{return JSON.parse(e.responseText)}catch(n){return e.responseText}}(u);if(200<=u.status&&u.status<300)s({status:u.status,headers:t,body:n});else{var i,o=u.statusText&&u.statusText.code?u.statusText.code:"NONE";i="string"==typeof n?n&&1===n.split("\n",2).length?n:"":JSON.stringify(n),a(new r.TransportError("".concat(u.status,": [").concat(o,"] ").concat(i),u.status,n,o,t))}}},n)u.setRequestHeader(l,n[l]),"Content-Type"===l&&"application/json"===n[l]&&(o=JSON.stringify(o));u.send(o)}))}}]),e}();t.Transport=o},VSTI:function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},VaU9:function(e,t,n){"use strict";var r=a(n("4d7F")),i=a(n("ODRq")),o=a(n("V7oC")),s=a(n("iCc5"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConsumptionHorizon=void 0;var u=n("FxMp"),l=function(){function e(t){(0,s.default)(this,e),this.services=t,this.consumptionHorizonRequests=new i.default,this.consumptionHorizonUpdateTimer=null}return(0,o.default)(e,[{key:"getReportInterval",value:function(){return this.services.session.getConsumptionReportInterval().then((function(e){return 1e3*e}))}},{key:"delayedSendConsumptionHorizon",value:function(e){var t=this;null===this.consumptionHorizonUpdateTimer&&(this.sendConsumptionReport(!0),this.consumptionHorizonUpdateTimer=setTimeout((function(){t.sendConsumptionReport(!1)}),e))}},{key:"sendConsumptionReport",value:function(e){var t=this,n=[],r=new i.default;this.consumptionHorizonRequests.forEach((function(e,t){n.push(e.entry),r.set(t,e.promises)})),n.length>0&&this.services.session.addCommand("consumptionReportV2",{report:n}).then((function(e){return t.processConsumptionReportResponse(e,r)})).catch((function(e){return t.processConsumptionReportError(e,r)})),e||(this.consumptionHorizonUpdateTimer=null),this.consumptionHorizonRequests.clear()}},{key:"processConsumptionReportResponse",value:function(e,t){e&&e.report&&Array.isArray(e.report)&&e.report.length>0&&e.report.forEach((function(e){var n=e;if(t.has(n.channelSid)){var r=null;void 0!==n.unreadMessagesCount&&null!=n.unreadMessagesCount&&(r=n.unreadMessagesCount),t.get(n.channelSid).forEach((function(e){return e.resolve(r)})),t.delete(n.channelSid)}})),this.processConsumptionReportError(new u.SessionError("Error while setting LastConsumedMessageIndex",null),t)}},{key:"processConsumptionReportError",value:function(e,t){t.forEach((function(t){return t.forEach((function(t){return t.reject(e)}))}))}},{key:"updateLastConsumedMessageIndexForChannel",value:function(e,t){var n=this;return new r.default((function(r,i){n.addPendingConsumptionHorizonRequest(e,{channelSid:e,messageIdx:t},{resolve:r,reject:i}),n.getReportInterval().then((function(e){return n.delayedSendConsumptionHorizon(e)}))}))}},{key:"advanceLastConsumedMessageIndexForChannel",value:function(e,t,n){var i=this,o=this.consumptionHorizonRequests.get(e);return new r.default((function(r,s){i.addPendingConsumptionHorizonRequest(e,o&&o.entry?o.entry.messageIdx>=t?o.entry:{channelSid:e,messageIdx:t}:null!==n&&t<n?{channelSid:e,messageIdx:n}:{channelSid:e,messageIdx:t},{resolve:r,reject:s}),i.getReportInterval().then((function(e){return i.delayedSendConsumptionHorizon(e)}))}))}},{key:"addPendingConsumptionHorizonRequest",value:function(e,t,n){if(this.consumptionHorizonRequests.has(e)){var r=this.consumptionHorizonRequests.get(e);r.entry=t,r.promises.push(n)}else this.consumptionHorizonRequests.set(e,{entry:t,promises:[n]})}}]),e}();t.ConsumptionHorizon=l},WKX2:function(e,t,n){"use strict";var r=b(n("FyfS")),i=b(n("sk9p")),o=b(n("ODRq")),s=b(n("14Xm")),a=b(n("D3Ub")),u=b(n("4d7F")),l=b(n("P2sY")),c=b(n("Yz+Y")),d=b(n("V7oC")),f=b(n("FYw3")),h=b(n("mRg0")),p=b(n("iCc5")),g=b(n("u8T8")),v=b(n("SEkw")),m=b(n("EJiy")),y=b(n("JO7F"));function b(e){return e&&e.__esModule?e:{default:e}}var k=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=(0,y.default)(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&(0,v.default)(t,n,s),s},_=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,m.default)(Reflect))&&"function"==typeof g.default)return(0,g.default)(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.PushNotification=t.Client=t.User=void 0;var C=n("+qE3"),w=n("yC9A"),x=n("EvBC"),O=n("uaGA");Object.defineProperty(t,"User",{enumerable:!0,get:function(){return O.User}});var S=n("6quN"),P=n("iWbE"),M=n("dDpT"),T=n("0YXi"),R=n("kUwj"),E=n("/LtL"),I=n("SwMz"),j=n("nA69"),N=n("hNz0"),A=n("ygN2"),U=n("cEKI"),D=n("je5X"),L=n("VaU9"),F=n("Cjvl"),z=n("CruZ");Object.defineProperty(t,"PushNotification",{enumerable:!0,get:function(){return z.PushNotification}});var q=n("iqZd"),B=n("C9Jq"),G=w.Logger.scope("Client"),W=n("0s00").version,V=function e(){(0,p.default)(this,e)},X=function(e){function t(e,n){(0,p.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,c.default)(t)).call(this));if(r.connectionState="connecting",r.sessionPromise=null,r.channelsPromise=null,r.version=W,r.parsePushNotification=t.parsePushNotification,r.options=n||{},!r.options.disableDeepClone){var i=(0,l.default)((0,l.default)({},r.options),{transport:void 0,twilsockClient:void 0});(i=q.deepClone(i)).transport=r.options.transport,i.twilsockClient=r.options.twilsockClient,r.options=i}r.options.logLevel=r.options.logLevel||"silent",G.setLevel(r.options.logLevel);var o=r.options.productId="ip_messaging";if(r.options.clientMetadata=r.options.clientMetadata||{},r.options.clientMetadata.hasOwnProperty("type")||(r.options.clientMetadata.type="chat"),r.options.clientMetadata.hasOwnProperty("sdk")||(r.options.clientMetadata.sdk="JS",r.options.clientMetadata.sdkv=W),r.options.Sync=r.options.Sync||{},void 0===r.options.Sync.enableSessionStorage&&(r.options.Sync.enableSessionStorage=!0),r.options.region&&(r.options.Sync.region=r.options.region),!e)throw new Error("A valid Twilio token should be provided");return r.services=new V,r.config=new x.Configuration(r.options),r.options.twilsockClient=r.options.twilsockClient||new R.Twilsock(e,o,r.options),r.options.transport=r.options.transport||r.options.twilsockClient,r.options.notificationsClient=r.options.notificationsClient||new E.Notifications(e,r.options),r.options.syncClient=r.options.syncClient||new I.SyncClient(e,r.options),r.services.syncClient=r.options.syncClient,r.services.transport=r.options.transport,r.services.twilsockClient=r.options.twilsockClient,r.services.notificationClient=r.options.notificationsClient,r.services.session=new N.Session(r.services,r.config),r.sessionPromise=r.services.session.initialize(),r.services.network=new P.Network(r.config,r.services),r.services.users=new U.Users({session:r.services.session,network:r.services.network,syncClient:r.services.syncClient}),r.services.users.on("userSubscribed",r.emit.bind(r,"userSubscribed")),r.services.users.on("userUpdated",(function(e){return r.emit("userUpdated",e)})),r.services.users.on("userUnsubscribed",r.emit.bind(r,"userUnsubscribed")),r.services.twilsockClient.on("tokenAboutToExpire",(function(e){return r.emit("tokenAboutToExpire",e)})),r.services.twilsockClient.on("tokenExpired",(function(){return r.emit("tokenExpired")})),r.services.twilsockClient.on("connectionError",(function(e){return r.emit("connectionError",e)})),r.services.consumptionHorizon=new L.ConsumptionHorizon(r.services),r.services.typingIndicator=new D.TypingIndicator(r.config,{transport:r.services.twilsockClient,notificationClient:r.services.notificationClient},r.getChannelBySid.bind(r)),r.services.syncList=new T.SyncList(r.services),r.channels=new A.Channels(r.services),r.channelsPromise=r.sessionPromise.then((function(){return r.channels.on("channelAdded",r.emit.bind(r,"channelAdded")),r.channels.on("channelRemoved",r.emit.bind(r,"channelRemoved")),r.channels.on("channelInvited",r.emit.bind(r,"channelInvited")),r.channels.on("channelJoined",r.emit.bind(r,"channelJoined")),r.channels.on("channelLeft",r.emit.bind(r,"channelLeft")),r.channels.on("channelUpdated",(function(e){return r.emit("channelUpdated",e)})),r.channels.on("memberJoined",r.emit.bind(r,"memberJoined")),r.channels.on("memberLeft",r.emit.bind(r,"memberLeft")),r.channels.on("memberUpdated",(function(e){return r.emit("memberUpdated",e)})),r.channels.on("messageAdded",r.emit.bind(r,"messageAdded")),r.channels.on("messageUpdated",(function(e){return r.emit("messageUpdated",e)})),r.channels.on("messageRemoved",r.emit.bind(r,"messageRemoved")),r.channels.on("typingStarted",r.emit.bind(r,"typingStarted")),r.channels.on("typingEnded",r.emit.bind(r,"typingEnded")),r.channels.fetchChannels()})).then((function(){return r.channels})),r.services.notificationClient.on("connectionStateChanged",(function(e){var t=null;switch(e){case"connected":t="connected";break;case"denied":t="denied";break;case"disconnecting":t="disconnecting";break;case"disconnected":t="disconnected";break;default:t="connecting"}t!==r.connectionState&&(r.connectionState=t,r.emit("connectionStateChanged",r.connectionState))})),r.fpaToken=e,r}var n,r,i,o,g,v,m,y,b,k,_;return(0,h.default)(t,e),(0,d.default)(t,[{key:"subscribeToPushNotifications",value:function(e){var t=this,n=[];return[M.NotificationTypes.NEW_MESSAGE,M.NotificationTypes.ADDED_TO_CHANNEL,M.NotificationTypes.INVITED_TO_CHANNEL,M.NotificationTypes.REMOVED_FROM_CHANNEL,M.NotificationTypes.TYPING_INDICATOR,M.NotificationTypes.CONSUMPTION_UPDATE].forEach((function(r){n.push(t.services.notificationClient.subscribe(r,e))})),u.default.all(n)}},{key:"unsubscribeFromPushNotifications",value:function(e){var t=this,n=[];return[M.NotificationTypes.NEW_MESSAGE,M.NotificationTypes.ADDED_TO_CHANNEL,M.NotificationTypes.INVITED_TO_CHANNEL,M.NotificationTypes.REMOVED_FROM_CHANNEL,M.NotificationTypes.TYPING_INDICATOR,M.NotificationTypes.CONSUMPTION_UPDATE].forEach((function(r){n.push(t.services.notificationClient.unsubscribe(r,e))})),u.default.all(n)}},{key:"initialize",value:(_=(0,a.default)(s.default.mark((function e(){var n,r,i=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionPromise;case 2:return t.supportedPushChannels.forEach((function(e){return i.subscribeToPushNotifications(e)})),e.next=5,this.services.session.getSessionLinks();case 5:return this.services.publicChannels=new S.PublicChannels(this,this.services,(n=e.sent).publicChannelsUrl),this.services.userChannels=new F.UserChannels(this,this.services,n.myChannelsUrl),(r=(0,l.default)(this.options)).transport=null,this.services.mcsClient=new j.McsClient(this.fpaToken,n.mediaServiceUrl,r),e.next=13,this.services.typingIndicator.initialize();case 13:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"shutdown",value:(k=(0,a.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.twilsockClient.disconnect();case 2:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"updateToken",value:(b=(0,a.default)(s.default.mark((function e(t){var n=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G.info("updateToken"),this.fpaToken!==t){e.next=3;break}return e.abrupt("return",this);case 3:return e.next=5,this.services.twilsockClient.updateToken(t).then((function(){return n.fpaToken=t})).then((function(){return n.services.mcsClient.updateToken(t)})).then((function(){return n.sessionPromise}));case 5:return e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"getChannelBySid",value:(y=(0,a.default)(s.default.mark((function e(t){var n=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.channels.syncListRead.promise.then((function(){return n.channels.getChannel(t).then((function(e){return e||n.services.publicChannels.getChannelBySid(t).then((function(e){return n.channels.pushChannel(e)}))}))})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"getChannelByUniqueName",value:(m=(0,a.default)(s.default.mark((function e(t){var n=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.channels.syncListRead.promise.then((function(){return n.services.publicChannels.getChannelByUniqueName(t).then((function(e){return n.channels.pushChannel(e)}))})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getSubscribedChannels",value:function(e){return this.channelsPromise.then((function(t){return t.getChannels(e)}))}},{key:"getLocalChannels",value:function(e){return this.channelsPromise.then((function(n){var r=[];n.channels.forEach((function(e){r.push(e)}));var i=(null==e?void 0:e.order)||"ascending";return e&&e.criteria&&("lastMessage"===e.criteria?r.sort((function(e,n){return t.compareChannelsByLastMessage(e,n,i)})):"uniqueName"===e.criteria?r.sort((function(e,n){return t.compareChannelsByStringProperty(e.uniqueName,n.uniqueName,i)})):"friendlyName"===e.criteria&&r.sort((function(e,n){return t.compareChannelsByStringProperty(e.friendlyName,n.friendlyName,i)}))),r}))}},{key:"getPublicChannelDescriptors",value:function(){return this.services.publicChannels.getChannels()}},{key:"getUserChannelDescriptors",value:function(){return this.services.userChannels.getChannels()}},{key:"createChannel",value:function(e){return e=e||{},this.channelsPromise.then((function(t){return t.addChannel(e)}))}},{key:"setPushRegistrationId",value:(v=(0,a.default)(s.default.mark((function e(t,n){var r=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.subscribeToPushNotifications(t).then((function(){return r.services.notificationClient.setPushRegistrationId(n,t)}));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"unsetPushRegistrationId",value:(g=(0,a.default)(s.default.mark((function e(n){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.supportedPushChannels.indexOf(n)){e.next=2;break}throw new Error("Invalid or unsupported channelType: "+n);case 2:return e.next=4,this.unsubscribeFromPushNotifications(n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"handlePushNotification",value:(o=(0,a.default)(s.default.mark((function e(n){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G.debug("handlePushNotification, notificationPayload=",n),this.emit("pushNotification",t.parsePushNotification(n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"getUser",value:function(e){return this.services.users.getUser(e)}},{key:"getUserDescriptor",value:(i=(0,a.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.services.users.getUserDescriptor(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getSubscribedUsers",value:(r=(0,a.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.services.users.getSubscribedUsers());case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"user",get:function(){return this.services.users.myself}},{key:"reachabilityEnabled",get:function(){return this.services.session.reachabilityEnabled}},{key:"token",get:function(){return this.fpaToken}}],[{key:"create",value:(n=(0,a.default)(s.default.mark((function e(n,r){var i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new t(n,r),e.next=3,i.initialize();case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"compareChannelsByLastMessage",value:function(e,t,n){if(e.lastMessage&&t.lastMessage){if(e.lastMessage.dateCreated&&t.lastMessage.dateCreated)return e.lastMessage.dateCreated.getTime()<t.lastMessage.dateCreated.getTime()?"ascending"===n?-1:1:"ascending"===n?1:-1;if(e.lastMessage.dateCreated)return-1;if(t.lastMessage.dateCreated)return 1}return e.lastMessage?-1:t.lastMessage?1:0}},{key:"compareChannelsByStringProperty",value:function(e,t,n){return e&&t?"ascending"===n?e.localeCompare(t):-1*e.localeCompare(t):e?-1:t?1:0}},{key:"parsePushNotificationChatData",value:function(e){var n={};for(var r in t.supportedPushDataFields)null!=e[r]&&("message_index"===r?null!==q.parseToNumber(e[r])&&(n[t.supportedPushDataFields[r]]=Number(e[r])):n[t.supportedPushDataFields[r]]=e[r]);return n}},{key:"parsePushNotification",value:function(e){if(G.debug("parsePushNotification, notificationPayload=",e),void 0!==e.aps){if(!e.twi_message_type)throw new Error("Provided push notification payload does not contain Programmable Chat push notification type");var n=t.parsePushNotificationChatData(e),r=e.aps,i=null,o=null;return"string"==typeof r.alert?i=r.alert||null:(i=r.alert.body||null,o=r.alert.title||null),new z.PushNotification({title:o,body:i,sound:r.sound||null,badge:r.badge||null,action:r.category||null,type:e.twi_message_type,data:n})}if(void 0!==e.data){var s=e.data;if(!s.twi_message_type)throw new Error("Provided push notification payload does not contain Programmable Chat push notification type");var a=t.parsePushNotificationChatData(e.data);return new z.PushNotification({title:s.twi_title||null,body:s.twi_body||null,sound:s.twi_sound||null,badge:null,action:s.twi_action||null,type:s.twi_message_type,data:a})}throw new Error("Provided push notification payload is not Programmable Chat notification")}}]),t}(C.EventEmitter);X.version=W,X.supportedPushChannels=["fcm","apn","gcm"],X.supportedPushDataFields={channel_sid:"channelSid",message_sid:"messageSid",message_index:"messageIndex"},k([B.asyncTypeCheck(B.nonEmptyString),_("design:type",Function),_("design:paramtypes",[String]),_("design:returntype",u.default)],X.prototype,"updateToken",null),k([B.asyncTypeCheck(B.nonEmptyString),_("design:type",Function),_("design:paramtypes",[String]),_("design:returntype",u.default)],X.prototype,"getChannelBySid",null),k([B.asyncTypeCheck(B.nonEmptyString),_("design:type",Function),_("design:paramtypes",[String]),_("design:returntype",u.default)],X.prototype,"getChannelByUniqueName",null),k([B.asyncTypeCheck(["undefined",B.custom((function(e){if("object"!==(void 0===e?"undefined":(0,m.default)(e))||null===e||Array.isArray(e))return[!1,"valid sorting options (should be a pure object)"];var t=new o.default([["criteria",["lastMessage","friendlyName","uniqueName"]],["order",["ascending","descending"]]]),n=!0,s=!1,a=void 0;try{for(var u,l=(0,r.default)(t.entries());!(n=(u=l.next()).done);n=!0){var c=(0,i.default)(u.value,2),d=c[0],f=c[1];if(void 0!==e[d]&&!f.includes(e[d]))return[!1,"valid sorting options (sortingOptions."+d+' should be one of: "'+f.join('", "')+'")',"malformed sorting options (sortingOptions."+d+" is "+B.stringifyReceivedType(e[d])+")"]}}catch(h){s=!0,a=h}finally{try{!n&&l.return&&l.return()}finally{if(s)throw a}}return[!0]}))]),_("design:type",Function),_("design:paramtypes",[Object]),_("design:returntype",u.default)],X.prototype,"getLocalChannels",null),k([B.asyncTypeCheck(["undefined",B.custom((function(e){if("object"!==(void 0===e?"undefined":(0,m.default)(e))||null===e||Array.isArray(e))return[!1,"valid channel options (should be a pure object)"];var t=new o.default([["friendlyName","string"],["isPrivate","boolean"],["uniqueName","string"]]),n=!0,s=!1,a=void 0;try{for(var u,l=(0,r.default)(t.entries());!(n=(u=l.next()).done);n=!0){var c=(0,i.default)(u.value,2),d=c[0],f=c[1];if(void 0!==e[d]&&(0,m.default)(e[d])!==f)return[!1,"valid channel options (options."+d+" should be of type "+f+")","malformed channel options (options."+d+" is "+B.stringifyReceivedType(e[d])+")"]}}catch(h){s=!0,a=h}finally{try{!n&&l.return&&l.return()}finally{if(s)throw a}}return[!0]}))]),_("design:type",Function),_("design:paramtypes",[Object]),_("design:returntype",u.default)],X.prototype,"createChannel",null),k([B.asyncTypeCheck(B.literal("gcm","fcm","apn"),"string"),_("design:type",Function),_("design:paramtypes",[String,String]),_("design:returntype",u.default)],X.prototype,"setPushRegistrationId",null),k([B.asyncTypeCheck(B.literal("gcm","fcm","apn")),_("design:type",Function),_("design:paramtypes",[String]),_("design:returntype",u.default)],X.prototype,"unsetPushRegistrationId",null),k([B.asyncTypeCheck(B.pureObject),_("design:type",Function),_("design:paramtypes",[Object]),_("design:returntype",u.default)],X.prototype,"handlePushNotification",null),k([B.asyncTypeCheck(B.nonEmptyString),_("design:type",Function),_("design:paramtypes",[String]),_("design:returntype",u.default)],X.prototype,"getUser",null),k([B.asyncTypeCheck(B.nonEmptyString),_("design:type",Function),_("design:paramtypes",[String]),_("design:returntype",u.default)],X.prototype,"getUserDescriptor",null),k([B.asyncTypeCheck("string",["undefined",B.pureObject]),_("design:type",Function),_("design:paramtypes",[String,Object]),_("design:returntype",u.default)],X,"create",null),k([B.typeCheck(B.pureObject),_("design:type",Function),_("design:paramtypes",[Object]),_("design:returntype",z.PushNotification)],X,"parsePushNotification",null),t.Client=X,t.default=X},WjQu:function(e,t,n){"use strict";var r=a(n("14Xm")),i=a(n("D3Ub")),o=a(n("iCc5")),s=a(n("V7oC"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Media=void 0;var u=function(){function e(t,n){(0,o.default)(this,e),this.mcsMedia=null,this.services=n,this.state={sid:t.sid,filename:t.filename,contentType:t.contentType,size:t.size}}var t;return(0,s.default)(e,[{key:"getContentTemporaryUrl",value:(t=(0,i.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mcsMedia){e.next=8;break}if(!this.services.mcsClient){e.next=7;break}return e.next=4,this.services.mcsClient.get(this.state.sid);case 4:this.mcsMedia=e.sent,e.next=8;break;case 7:throw new Error("Media Content Service is unavailable");case 8:return e.abrupt("return",this.mcsMedia.getContentUrl());case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"sid",get:function(){return this.state.sid}},{key:"filename",get:function(){return this.state.filename}},{key:"contentType",get:function(){return this.state.contentType}},{key:"size",get:function(){return this.state.size}}]),e}();t.Media=u},WpRT:function(e,t,n){var r=n("s2er")("keys"),i=n("ixoo");e.exports=function(e){return r[e]||(r[e]=i(e))}},Wxaq:function(e,t,n){"use strict";var r=a(n("14Xm")),i=a(n("D3Ub")),o=a(n("iCc5")),s=a(n("V7oC"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserDescriptors=void 0;var u=n("iqZd"),l=n("IMt4"),c=n("4dLj"),d=function(){function e(t,n){(0,o.default)(this,e),this.services=t,this.url=n}var t,n;return(0,s.default)(e,[{key:"getUserDescriptor",value:(n=(0,i.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new u.UriBuilder(this.url).path(t).build(),e.next=3,this.services.network.get(n);case 3:return e.abrupt("return",new c.UserDescriptor(this.services,e.sent.body));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getChannelUserDescriptors",value:(t=(0,i.default)(r.default.mark((function e(t){var n,i,o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new u.UriBuilder(this.url).arg("ChannelSid",t).arg("PageToken",s.pageToken).build(),e.next=3,this.services.network.get(n);case 3:return e.abrupt("return",new l.RestPaginator((i=e.sent).body.users.map((function(e){return new c.UserDescriptor(o.services,e)})),(function(e){return o.getChannelUserDescriptors(t,{pageToken:e})}),i.body.meta.prev_token,i.body.meta.next_token));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();t.UserDescriptors=d},XH0y:function(e,t,n){var r,i;!function(o,s){"use strict";void 0===(i="function"==typeof(r=function(){var e=function(){},t="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(r){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(n){return"debug"===n&&(n="log"),"undefined"!=typeof console&&("trace"===n&&t?i:void 0!==console[n]?r(console,n):void 0!==console.log?r(console,"log"):e)}function s(t,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<t?e:this.methodFactory(o,t,r)}this.log=this.debug}function a(e,t,n){return function(){"undefined"!=typeof console&&(s.call(this,t,n),this[e].apply(this,arguments))}}function u(e,t,n){return o(e)||a.apply(this,arguments)}function l(e,t,r){var i,o=this,a="loglevel";function l(){var e;if("undefined"!=typeof window){try{e=window.localStorage[a]}catch(r){}if(void 0===e)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(a)+"=");-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(r){}return void 0===o.levels[e]&&(e=void 0),e}}e&&(a+=":"+e),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=r||u,o.getLevel=function(){return i},o.setLevel=function(t,r){if("string"==typeof t&&void 0!==o.levels[t.toUpperCase()]&&(t=o.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(i=t,!1!==r&&function(e){var t=(n[e]||"silent").toUpperCase();if("undefined"!=typeof window){try{return void(window.localStorage[a]=t)}catch(r){}try{window.document.cookie=encodeURIComponent(a)+"="+t+";"}catch(r){}}}(t),s.call(o,t,e),"undefined"==typeof console&&t<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){l()||o.setLevel(e,!1)},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var c=l();null==c&&(c=null==t?"WARN":t),o.setLevel(c,!1)}var c=new l,d={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new l(e,c.getLevel(),c.methodFactory)),t};var f="undefined"!=typeof window?window.log:void 0;return c.noConflict=function(){return"undefined"!=typeof window&&window.log===c&&(window.log=f),c},c.getLoggers=function(){return d},c})?r.call(t,n,t,e):r)||(e.exports=i)}()},XL7Z:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("quSY"),i=n("TwVa"),o=n("lJxs"),s=n("wd/R"),a=function(){function e(t,n,o,s){_classCallCheck(this,e),this.restaurantService=t,this.reservationsService=n,this.newRequestAlertService=o,this.router=s,this.reservations=[],this.selectedReservation=i.f.empty(),this.reservation=i.f.empty(),this.currentRestaurantSubscription=r.a.EMPTY,this.getReservationsSubscription=r.a.EMPTY,this.getReservationDetailsSubscription=r.a.EMPTY,this.newReservationSubscription=r.a.EMPTY,this.newCheckoutReservationSubscription=r.a.EMPTY,this.newInServiceReservationSubscription=r.a.EMPTY,this.newCancelledReservationSubscription=r.a.EMPTY}return _createClass(e,[{key:"ngOnInit",value:function(){this.getRestaurantInfo(),this.listenForReservationsUpdates(),this.listenForReservationsCancellations(),this.clearStatusDot()}},{key:"ngOnDestroy",value:function(){this.currentRestaurantSubscription.unsubscribe(),this.getReservationsSubscription.unsubscribe(),this.getReservationDetailsSubscription.unsubscribe(),this.newReservationSubscription.unsubscribe(),this.newCheckoutReservationSubscription.unsubscribe(),this.newCancelledReservationSubscription.unsubscribe(),this.newInServiceReservationSubscription.unsubscribe()}},{key:"clearStatusDot",value:function(){this.isThisTheNewReservationsCRUD&&this.newRequestAlertService.hasNewRequest.next(!1),this.isThisTheInServiceReservationsCRUD&&this.newRequestAlertService.hasNewInServiceReservation.next(!1)}},{key:"getRestaurantInfo",value:function(){var e=this;this.currentRestaurantSubscription=this.restaurantService.currentRestaurant.subscribe((function(t){e.restaurant=t,"active"===e.reservationsTypes.status?e.getReservations("today"):e.getReservations()}))}},{key:"getReservations",value:function(e,t){var n=this,r=this.reservationsTypes;this.hasPeriodOfTimeLogicToBeActive&&("today"===e?(r.from=Math.floor(s().startOf("day").valueOf()/1e3),r.to=Math.floor(s().endOf("day").valueOf()/1e3)):"next"===e&&(r.from=Math.floor(s().endOf("day").valueOf()/1e3),r.to=void 0)),this.hasCalendarToBeVisible&&(t?(r.from=Math.floor(t.startOf("day").valueOf()/1e3),r.to=Math.floor(t.endOf("day").valueOf()/1e3)):(r.from=Math.floor(s().startOf("day").valueOf()/1e3),r.to=Math.floor(s().endOf("day").valueOf()/1e3))),this.reservationsService.getRestaurantReservations(this.restaurant.id,r).pipe(Object(o.a)((function(e){return e.reservations.map((function(e){return new i.f(e)})).filter((function(e){return!(("pending"===e.status||"checkout"===e.status)&&n.isTimeExpired(e.expires_at))}))}))).subscribe((function(e){n.reservations=e,n.selectedReservation=n.reservations[0],n.selectedReservation&&n.getSelectedReservation()}))}},{key:"isTimeExpired",value:function(e){return s().valueOf()>e}},{key:"listenForReservationsUpdates",value:function(){this.isThisTheNewReservationsCRUD&&this.initListenersForNewReservationsSection(),this.isThisTheInServiceReservationsCRUD&&this.initListenersForInServiceReservationsSection()}},{key:"initListenersForNewReservationsSection",value:function(){var e=this;this.newReservationSubscription=this.newRequestAlertService.newPendingReservation.subscribe((function(t){t&&(e.reservations.push(t),1===e.reservations.length&&(e.selectedReservation=e.reservations[0],e.getSelectedReservation(),e.newRequestAlertService.newPendingReservation.next(null)))})),this.newCheckoutReservationSubscription=this.newRequestAlertService.newCheckoutReservation.subscribe((function(t){t&&(e.reservations.push(t),1===e.reservations.length&&(e.selectedReservation=e.reservations[0],e.getSelectedReservation(),e.newRequestAlertService.newCheckoutReservation.next(null)))}))}},{key:"initListenersForInServiceReservationsSection",value:function(){var e=this;this.newInServiceReservationSubscription=this.newRequestAlertService.newInServiceReservation.subscribe((function(t){t&&(e.getReservations(),e.newRequestAlertService.newInServiceReservation.next(null))}))}},{key:"listenForReservationsCancellations",value:function(){var e=this;this.newCancelledReservationSubscription=this.newRequestAlertService.newCancelledReservation.subscribe((function(t){t&&e.removeReservationFromList(t)}))}},{key:"getSelectedReservation",value:function(){var e=this;this.getReservationDetailsSubscription=this.reservationsService.getReservationDetails(this.selectedReservation.id).pipe(Object(o.a)((function(e){return new i.f(e)}))).subscribe((function(t){e.reservation=t}))}},{key:"onReservationClick",value:function(e){this.reservation=i.f.empty(),this.selectedReservation=this.reservations.find((function(t){return t.id===e})),this.selectedReservation.is_new=!1,this.getSelectedReservation()}},{key:"reservationsPeriodChangedHandler",value:function(e){this.getReservations(e)}},{key:"removeReservationFromList",value:function(e){if(e){var t=this.reservations.findIndex((function(t){return t.id===e}));this.reservations.splice(t,1),this.selectedReservation&&this.selectedReservation.id===e&&(this.selectedReservation=this.reservations.length>0?this.reservations[0]:void 0,this.selectedReservation&&this.getSelectedReservation())}}},{key:"isThisTheNewReservationsCRUD",get:function(){return this.router.url.endsWith("new-requests")}},{key:"isThisTheInServiceReservationsCRUD",get:function(){return this.router.url.endsWith("in-service")}}]),e}()},XLeT:function(e,t,n){"use strict";var r=n("USwo"),i=n("8sL3"),o=n("wqPz");r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},XVPX:function(e,t,n){var r=n("USwo"),i=n("b08l"),o=n("FgkJ"),s=n("d+lc"),a=n("ekG2"),u=n("S4vA"),l=n("S6HK"),c=(n("7whZ").Reflect||{}).construct,d=u((function(){function e(){}return!(c((function(){}),[],e)instanceof e)})),f=!u((function(){c((function(){}))}));r(r.S+r.F*(d||f),"Reflect",{construct:function(e,t){o(e),s(t);var n=arguments.length<3?e:o(arguments[2]);if(f&&!d)return c(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(l.apply(e,r))}var u=n.prototype,h=i(a(u)?u:Object.prototype),p=Function.apply.call(e,h,t);return a(p)?p:h}})},YHaq:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n("8Y7J"),i=(n("PDjf"),n("9gLZ"),n("UhP/"),n("YEUz"),n("omvX"),r.xb({encapsulation:2,styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],data:{}}));function o(e){return r.ac(2,[r.Nb(null,0),r.Nb(null,1)],null,null)}},Ysb6:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(){_classCallCheck(this,e)}},"Yz+Y":function(e,t,n){e.exports={default:n("Lr1a"),__esModule:!0}},ZDin:function(e,t,n){var r=n("A9a0"),i=n("l0Kd").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},ZWGZ:function(e,t,n){"use strict";var r=n("rdj4"),i=n("JAUQ");e.exports=n("M+fh")("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},"ZY/g":function(e,t,n){n("aFj7");for(var r=n("7whZ"),i=n("BRsN"),o=n("ig3W"),s=n("zBWt")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var l=a[u],c=r[l],d=c&&c.prototype;d&&!d[s]&&i(d,s,l),o[l]=o.Array}},ZblS:function(e,t,n){n("kcqV");var r=n("VSTI").Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},ZdHh:function(e){e.exports=JSON.parse('{"_args":[["twilio-mcs-client@0.3.3","D:\\\\Software\\\\Blue\\\\a-plato-puesto-admin"]],"_from":"twilio-mcs-client@0.3.3","_id":"twilio-mcs-client@0.3.3","_inBundle":false,"_integrity":"sha512-lNnVITgLg14HBG2oshnwjAeyBxhuqJeAIQE/KUDCGLHwtA6moE49SE1RRtUr5hhziyDSCTjm5X8YeP0m/lL7QA==","_location":"/twilio-mcs-client","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"twilio-mcs-client@0.3.3","name":"twilio-mcs-client","escapedName":"twilio-mcs-client","rawSpec":"0.3.3","saveSpec":null,"fetchSpec":"0.3.3"},"_requiredBy":["/twilio-chat"],"_resolved":"https://registry.npmjs.org/twilio-mcs-client/-/twilio-mcs-client-0.3.3.tgz","_spec":"0.3.3","_where":"D:\\\\Software\\\\Blue\\\\a-plato-puesto-admin","author":{"name":"Twilio"},"browser":{"xmlhttprequest":false},"browserify":{"transform":["babelify"]},"dependencies":{"loglevel":"^1.6.4","operation-retrier":"^3.0.1","xmlhttprequest":"^1.8.0"},"description":"Twilio Media Content Service client library","devDependencies":{"@types/chai":"^4.2.2","@types/chai-as-promised":"^7.1.2","@types/chai-datetime":"0.0.33","@types/chai-string":"^1.4.2","@types/core-js":"^2.5.2","@types/mocha":"^5.2.7","@types/node":"^12.7.4","@types/sinon":"^7.0.13","@types/sinon-chai":"^3.2.3","async":"^3.1.0","async-test-tools":"^1.0.7","babel-core":"^6.26.0","babel-plugin-transform-builtin-extend":"^1.1.2","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.1","babel-runtime":"^6.26.0","babelify":"^8.0.0","browserify":"^16.0.0","chai":"^4.2.0","chai-as-promised":"^7.1.1","chai-datetime":"^1.5.0","chai-string":"^1.5.0","cheerio":"^1.0.0-rc.2","cross-env":"^5.2.1","del":"^5.1.0","dotenv":"^8.1.0","express":"^4.17.1","gulp":"^4.0.2","gulp-babel":"^7.0.1","gulp-derequire":"^2.1.0","gulp-if":"^3.0.0","gulp-insert":"^0.5.0","gulp-mocha":"^7.0.1","gulp-rename":"^1.4.0","gulp-sourcemaps":"^2.6.5","gulp-tap":"^2.0.0","gulp-tslint":"^8.1.4","gulp-typescript":"^5.0.1","gulp-uglify-es":"^1.0.0","ink-docstrap":"^1.3.2","isomorphic-form-data":"^2.0.0","jsdoc":"~3.5.5","jsdoc-strip-async-await":"^0.1.0","mocha":"^6.2.0","ngrok":"^3.2.5","nyc":"^14.1.1","sinon":"^7.4.2","sinon-chai":"^3.3.0","source-map-explorer":"^2.0.1","ts-node":"^8.3.0","tslint":"^5.19.0","twilio":"^3.34.0","typescript":"^3.6.2","uglify-save-license":"^0.4.1","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"},"engines":{"node":">=6"},"license":"MIT","main":"lib/index.js","name":"twilio-mcs-client","scripts":{},"types":"./lib/client.d.ts","version":"0.3.3"}')},ZgEp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffRetrier=void 0;var r=n("+qE3"),i=n("vSOj");t.BackoffRetrier=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).options=e?Object.assign({},e):{},n}return _inherits(t,e),_createClass(t,[{key:"start",value:function(){if(this.inProgress)throw new Error("Already waiting for next attempt, call finishAttempt(success : boolean) to finish it");this.createRetrier()}},{key:"stop",value:function(){this.cleanRetrier(),this.newBackoff=null,this.usedBackoff=null}},{key:"modifyBackoff",value:function(e){this.newBackoff=e}},{key:"attemptFailed",value:function(){if(!this.inProgress)throw new Error("No attempt is in progress");this.newBackoff&&(!this.usedBackoff||this.usedBackoff<this.newBackoff)?this.createRetrier():this.retrier.failed(new Error)}},{key:"cancel",value:function(){this.retrier&&this.retrier.cancel()}},{key:"cleanRetrier",value:function(){this.retrier&&(this.retrier.removeAllListeners(),this.retrier.cancel(),this.retrier=null)}},{key:"getRetryPolicy",value:function(){var e=Object.assign({},this.options);return this.newBackoff&&(e.min=this.newBackoff,e.max=this.options.max&&this.options.max>this.newBackoff?this.options.max:this.newBackoff),e.maxAttemptsCount=this.options.maxAttemptsCount?this.options.maxAttemptsCount+1:void 0,e}},{key:"createRetrier",value:function(){var e=this;this.cleanRetrier();var t=this.getRetryPolicy();this.retrier=new i.Retrier(t),this.retrier.once("attempt",(function(){e.retrier.on("attempt",(function(){return e.emit("attempt")})),e.retrier.failed(new Error("Skipping first attempt"))})),this.retrier.on("failed",(function(t){return e.emit("failed",t)})),this.usedBackoff=this.newBackoff,this.newBackoff=null,this.retrier.start().catch((function(e){}))}},{key:"inProgress",get:function(){return!!this.retrier}}]),t}(r.EventEmitter)},aFj7:function(e,t,n){"use strict";var r=n("L5pH"),i=n("6jRP"),o=n("ig3W"),s=n("bKEA");e.exports=n("OTpG")(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},aLZZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PacketInterface=t.PacketResponse=void 0;var r=n("MZ0W"),i=n("EcEN"),o=n("arZA"),s=n("TZCi"),a=n("ioUz"),u=n("bldR"),l=n("I7B1");t.PacketResponse=function(){return function e(){_classCallCheck(this,e)}}(),t.PacketInterface=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.config=n,this.activeRequests=new Map,this.channel=t,this.channel.on("reply",(function(e){return r.processReply(e)})),this.channel.on("disconnected",(function(){r.activeRequests.forEach((function(e){clearTimeout(e.timeout),e.reject(new o.TwilsockError("disconnected"))})),r.activeRequests.clear()}))}var t;return _createClass(e,[{key:"processReply",value:function(e){var t,n=this.activeRequests.get(e.id);n&&(clearTimeout(n.timeout),this.activeRequests.delete(e.id),(t=e.status.code)>=200&&t<300?n.resolve(e):(n.reject(new s.TwilsockReplyError("Transport failure: "+e.status.status,e)),r.log.trace("message rejected")))}},{key:"storeRequest",value:function(e,t,n){var i={resolve:t,reject:n,timeout:setTimeout((function(){r.log.trace("request",e,"is timed out"),n(new o.TwilsockError("Twilsock: request timeout: "+e))}),3e4)};this.activeRequests.set(e,i)}},{key:"shutdown",value:function(){this.activeRequests.forEach((function(e){clearTimeout(e.timeout),e.reject(new o.TwilsockError("Twilsock: request cancelled by user"))})),this.activeRequests.clear()}},{key:"sendInit",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.log.trace("sendInit"),t=l.Metadata.getMetadata(this.config),n=new u.Init(this.config.token,this.config.continuationToken,t,this.config.initRegistrations,this.config.tweaks),e.next=5,this.sendWithReply(n);case 5:return i=e.sent,e.abrupt("return",new u.InitReply(i.id,i.header.continuation_token,i.header.continuation_token_status,i.header.offline_storage,i.header.init_registrations,i.header.debug_info,new Set(i.header.capabilities)));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"sendClose",value:function(){var e=new u.Close;this.send(e)}},{key:"sendWithReply",value:function(e,t){var n=this;return new Promise((function(r,i){var o=n.send(e,t);n.storeRequest(o,r,i)}))}},{key:"send",value:function(e,t){e.id=e.id||"TM".concat(i.v4());var n=a.Parser.createPacket(e,function(e){switch(typeof e){case"undefined":return"";case"object":return JSON.stringify(e);default:return e}}(t));try{return this.channel.send(n),e.id}catch(o){throw r.log.debug("failed to send ",e,o),r.log.trace(o.stack),o}}},{key:"isConnected",get:function(){return this.channel.isConnected}}]),e}()},aT0f:function(e,t,n){"use strict";var r=n("7whZ"),i=n("nA4W"),o=n("C61u"),s=n("USwo"),a=n("ugGH"),u=n("40oJ").KEY,l=n("S4vA"),c=n("s2er"),d=n("kvAF"),f=n("ixoo"),h=n("zBWt"),p=n("/NTb"),g=n("4Zg2"),v=n("CuL1"),m=n("Trx6"),y=n("d+lc"),b=n("ekG2"),k=n("CYMq"),_=n("bKEA"),C=n("M5dz"),w=n("ENu8"),x=n("b08l"),O=n("GDZC"),S=n("TSC6"),P=n("/tXR"),M=n("GhSp"),T=n("mHY4"),R=S.f,E=M.f,I=O.f,j=r.Symbol,N=r.JSON,A=N&&N.stringify,U=h("_hidden"),D=h("toPrimitive"),L={}.propertyIsEnumerable,F=c("symbol-registry"),z=c("symbols"),q=c("op-symbols"),B=Object.prototype,G="function"==typeof j&&!!P.f,W=r.QObject,V=!W||!W.prototype||!W.prototype.findChild,X=o&&l((function(){return 7!=x(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=R(B,t);r&&delete B[t],E(e,t,n),r&&e!==B&&E(B,t,r)}:E,J=function(e){var t=z[e]=x(j.prototype);return t._k=e,t},H=G&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},K=function e(t,n,r){return t===B&&e(q,n,r),y(t),n=C(n,!0),y(r),i(z,n)?(r.enumerable?(i(t,U)&&t[U][n]&&(t[U][n]=!1),r=x(r,{enumerable:w(0,!1)})):(i(t,U)||E(t,U,w(1,{})),t[U][n]=!0),X(t,n,r)):E(t,n,r)},Y=function(e,t){y(e);for(var n,r=v(t=_(t)),i=0,o=r.length;o>i;)K(e,n=r[i++],t[n]);return e},Q=function(e){var t=L.call(this,e=C(e,!0));return!(this===B&&i(z,e)&&!i(q,e))&&(!(t||!i(this,e)||!i(z,e)||i(this,U)&&this[U][e])||t)},Z=function(e,t){if(e=_(e),t=C(t,!0),e!==B||!i(z,t)||i(q,t)){var n=R(e,t);return!n||!i(z,t)||i(e,U)&&e[U][t]||(n.enumerable=!0),n}},$=function(e){for(var t,n=I(_(e)),r=[],o=0;n.length>o;)i(z,t=n[o++])||t==U||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===B,r=I(n?q:_(e)),o=[],s=0;r.length>s;)!i(z,t=r[s++])||n&&!i(B,t)||o.push(z[t]);return o};G||(a((j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function t(n){this===B&&t.call(q,n),i(this,U)&&i(this[U],e)&&(this[U][e]=!1),X(this,e,w(1,n))};return o&&V&&X(B,e,{configurable:!0,set:t}),J(e)}).prototype,"toString",(function(){return this._k})),S.f=Z,M.f=K,n("ZDin").f=O.f=$,n("GRew").f=Q,P.f=ee,o&&!n("5ETA")&&a(B,"propertyIsEnumerable",Q,!0),p.f=function(e){return J(h(e))}),s(s.G+s.W+s.F*!G,{Symbol:j});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)h(te[ne++]);for(var re=T(h.store),ie=0;re.length>ie;)g(re[ie++]);s(s.S+s.F*!G,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=j(e)},keyFor:function(e){if(!H(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),s(s.S+s.F*!G,"Object",{create:function(e,t){return void 0===t?x(e):Y(x(e),t)},defineProperty:K,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:$,getOwnPropertySymbols:ee});var oe=l((function(){P.f(1)}));s(s.S+s.F*oe,"Object",{getOwnPropertySymbols:function(e){return P.f(k(e))}}),N&&s(s.S+s.F*(!G||l((function(){var e=j();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!H(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!H(t))return t}),r[1]=t,A.apply(N,r)}}),j.prototype[D]||n("BRsN")(j.prototype,D,j.prototype.valueOf),d(j,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},aqg2:function(e,t,n){var r=n("TYje"),i=n("zBWt")("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},arZA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwilsockError=void 0;var r=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,_wrapNativeSuper(Error)),t}();t.TwilsockError=r},auUO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(e,n,r,i,o){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).code=n,s.body=r,s.status=i,s.headers=o,s}return _inherits(t,_wrapNativeSuper(Error)),t}();t.TransportError=r},axwj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n("NDb0");t.Message=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).method="message",i.active_grant=e,i.payload_type=n,i.http_request=r,i}return _inherits(t,e),t}(r.AbstractMessage)},b08l:function(e,t,n){var r=n("d+lc"),i=n("heda"),o=n("l0Kd"),s=n("WpRT")("IE_PROTO"),a=function(){},u=function(){var e,t=n("BfU5")("iframe"),r=o.length;for(t.style.display="none",n("kUGv").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=r(e),n=new a,a.prototype=null,n[s]=e):n=u(),void 0===t?n:i(n,t)}},b0Ca:function(e,t,n){"use strict";function r(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function i(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(t,"__esModule",{value:!0}),t.Pointer=void 0;var o=function(){function e(e){void 0===e&&(e=[""]),this.tokens=e}return e.fromJSON=function(t){var n=t.split("/").map(r);if(""!==n[0])throw new Error("Invalid JSON Pointer: "+t);return new e(n)},e.prototype.toString=function(){return this.tokens.map(i).join("/")},e.prototype.evaluate=function(e){for(var t=null,n="",r=e,i=1,o=this.tokens.length;i<o;i++)r=((t=r)||{})[n=this.tokens[i]];return{parent:t,key:n,value:r}},e.prototype.get=function(e){return this.evaluate(e).value},e.prototype.set=function(e,t){for(var n=e,r=1,i=this.tokens.length-1,o=this.tokens[r];r<i;r++)n=(n||{})[o];n&&(n[this.tokens[this.tokens.length-1]]=t)},e.prototype.push=function(e){this.tokens.push(e)},e.prototype.add=function(t){return new e(this.tokens.concat(String(t)))},e}();t.Pointer=o},bKEA:function(e,t,n){var r=n("n7vu"),i=n("yQFZ");e.exports=function(e){return r(i(e))}},bS86:function(e,t,n){var r=n("ig3W"),i=n("zBWt")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},bldR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Telemetry=t.Close=t.Reply=t.Message=t.Update=t.InitReply=t.Init=void 0;var r=n("6w5q");Object.defineProperty(t,"Init",{enumerable:!0,get:function(){return r.Init}});var i=n("P15O");Object.defineProperty(t,"InitReply",{enumerable:!0,get:function(){return i.InitReply}});var o=n("DQkm");Object.defineProperty(t,"Update",{enumerable:!0,get:function(){return o.Update}});var s=n("Ut7X");Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return s.Message}});var a=n("miUa");Object.defineProperty(t,"Reply",{enumerable:!0,get:function(){return a.Reply}});var u=n("IYKI");Object.defineProperty(t,"Close",{enumerable:!0,get:function(){return u.Close}});var l=n("grBd");Object.defineProperty(t,"Telemetry",{enumerable:!0,get:function(){return l.Telemetry}})},c4i1:function(e,t,n){"use strict";var r=n("8Y7J"),i=n("Q2Ze"),o=n("s7LF"),s=n("XE/z"),a=n("Tj54"),u=n("H3DK"),l=n("UhP/"),c=n("9gLZ"),d=n("SCoL"),f=n("omvX"),h=n("e6WT"),p=n("8sFK"),g=n("SVse"),v=n("N7/N"),m=n("iELJ"),y=n("fx7b"),b=n("zHaW");n.d(t,"a",(function(){return S}));var k=r.xb({encapsulation:0,styles:[["div[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative}div[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;cursor:pointer}div[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#3c3c3c;font-size:14px;font-weight:600}div[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .motive[_ngcontent-%COMP%]{margin-top:30px;font-size:16px;color:#7a7a7a;font-weight:300}div[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end;-webkit-box-align:center;align-items:center;margin-top:40px}div[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer}div[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{margin-left:24px}"]],data:{}});function _(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),r.yb(1,16384,[[6,4]],0,i.b,[],null,null),(e()(),r.Xb(-1,null,[" Esta informaci\xf3n es necesaria "]))],null,(function(e,t){e(t,0,0,r.Ob(t,1).id)}))}function C(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),r.yb(1,16384,[[6,4]],0,i.b,[],null,null),(e()(),r.Xb(-1,null,[" El m\xe1ximo de caracteres es de 400 caracteres "]))],null,(function(e,t){e(t,0,0,r.Ob(t,1).id)}))}function w(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,45,"form",[["class","container"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==r.Ob(e,2).onSubmit(n)&&i),"reset"===t&&(i=!1!==r.Ob(e,2).onReset()&&i),i}),null,null)),r.yb(1,16384,null,0,o.B,[],null,null),r.yb(2,540672,null,0,o.l,[[8,null],[8,null]],{form:[0,"form"]},null),r.Sb(2048,null,o.c,null,[o.l]),r.yb(4,16384,null,0,o.t,[[4,o.c]],null,null),(e()(),r.zb(5,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Cerrar modal"],["class","clr-yellow close mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.closeDialog(!1)&&r),r}),s.b,s.a)),r.yb(6,9158656,null,0,a.b,[r.l,a.d,[8,"false"],[2,a.a],[2,r.n]],null,null),(e()(),r.Xb(-1,0,["close"])),(e()(),r.zb(8,0,null,null,1,"p",[["class","title"]],null,null,null,null,null)),(e()(),r.Xb(-1,null,["RECHAZAR RESERVACI\xd3N"])),(e()(),r.zb(10,0,null,null,1,"p",[["class","motive"]],null,null,null,null,null)),(e()(),r.Xb(-1,null,[" Indica el motivo por el que no puedes aceptar la solicitud "])),(e()(),r.zb(12,0,null,null,27,"mat-form-field",[["class","example-full-width mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,u.b,u.a)),r.yb(13,7520256,null,9,i.c,[r.l,r.h,[2,l.f],[2,c.b],[2,i.a],d.a,r.A,[2,f.a]],null,null),r.Tb(603979776,1,{_controlNonStatic:0}),r.Tb(335544320,2,{_controlStatic:0}),r.Tb(603979776,3,{_labelChildNonStatic:0}),r.Tb(335544320,4,{_labelChildStatic:0}),r.Tb(603979776,5,{_placeholderChild:0}),r.Tb(603979776,6,{_errorChildren:1}),r.Tb(603979776,7,{_hintChildren:1}),r.Tb(603979776,8,{_prefixChildren:1}),r.Tb(603979776,9,{_suffixChildren:1}),(e()(),r.zb(23,0,null,3,2,"mat-label",[],null,null,null,null,null)),r.yb(24,16384,[[3,4],[4,4]],0,i.f,[],null,null),(e()(),r.Xb(-1,null,["Motivo"])),(e()(),r.zb(26,0,null,1,9,"textarea",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","motive"],["matInput",""],["maxlength","400"]],[[1,"maxlength",0],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==r.Ob(e,29)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==r.Ob(e,29).onTouched()&&i),"compositionstart"===t&&(i=!1!==r.Ob(e,29)._compositionStart()&&i),"compositionend"===t&&(i=!1!==r.Ob(e,29)._compositionEnd(n.target.value)&&i),"blur"===t&&(i=!1!==r.Ob(e,33)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==r.Ob(e,33)._focusChanged(!0)&&i),"input"===t&&(i=!1!==r.Ob(e,33)._onInput()&&i),i}),null,null)),r.yb(27,540672,null,0,o.o,[],{maxlength:[0,"maxlength"]},null),r.Sb(1024,null,o.p,(function(e){return[e]}),[o.o]),r.yb(29,16384,null,0,o.d,[r.F,r.l,[2,o.a]],null,null),r.Sb(1024,null,o.q,(function(e){return[e]}),[o.d]),r.yb(31,671744,null,0,o.j,[[3,o.c],[6,o.p],[8,null],[6,o.q],[2,o.A]],{name:[0,"name"]},null),r.Sb(2048,null,o.r,null,[o.j]),r.yb(33,999424,null,0,h.b,[r.l,d.a,[6,o.r],[2,o.u],[2,o.l],l.b,[8,null],p.a,r.A],null,null),r.yb(34,16384,null,0,o.s,[[4,o.r]],null,null),r.Sb(2048,[[1,4],[2,4]],i.d,null,[h.b]),(e()(),r.jb(16777216,null,5,1,null,_)),r.yb(37,16384,null,0,g.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.jb(16777216,null,5,1,null,C)),r.yb(39,16384,null,0,g.m,[r.R,r.N],{ngIf:[0,"ngIf"]},null),(e()(),r.zb(40,0,null,null,5,"div",[["class","controls"]],null,null,null,null,null)),(e()(),r.zb(41,0,null,null,1,"p",[],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.closeDialog(!1)&&r),r}),null,null)),(e()(),r.Xb(-1,null,["Cancelar"])),(e()(),r.zb(43,0,null,null,2,"button",[["class","btns"],["type","button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.setVisibleSection("refuseConfirmation")&&r),r}),null,null)),(e()(),r.zb(44,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Aceptar"]))],(function(e,t){var n=t.component;e(t,2,0,n.form),e(t,6,0),e(t,27,0,"400"),e(t,31,0,"motive"),e(t,33,0),e(t,37,0,n.form.get("motive").hasError("required")),e(t,39,0,n.form.get("motive").hasError("maxlenght"))}),(function(e,t){e(t,0,0,r.Ob(t,4).ngClassUntouched,r.Ob(t,4).ngClassTouched,r.Ob(t,4).ngClassPristine,r.Ob(t,4).ngClassDirty,r.Ob(t,4).ngClassValid,r.Ob(t,4).ngClassInvalid,r.Ob(t,4).ngClassPending),e(t,5,0,r.Ob(t,6).inline,"primary"!==r.Ob(t,6).color&&"accent"!==r.Ob(t,6).color&&"warn"!==r.Ob(t,6).color),e(t,12,1,["standard"==r.Ob(t,13).appearance,"fill"==r.Ob(t,13).appearance,"outline"==r.Ob(t,13).appearance,"legacy"==r.Ob(t,13).appearance,r.Ob(t,13)._control.errorState,r.Ob(t,13)._canLabelFloat,r.Ob(t,13)._shouldLabelFloat(),r.Ob(t,13)._hasFloatingLabel(),r.Ob(t,13)._hideControlPlaceholder(),r.Ob(t,13)._control.disabled,r.Ob(t,13)._control.autofilled,r.Ob(t,13)._control.focused,"accent"==r.Ob(t,13).color,"warn"==r.Ob(t,13).color,r.Ob(t,13)._shouldForward("untouched"),r.Ob(t,13)._shouldForward("touched"),r.Ob(t,13)._shouldForward("pristine"),r.Ob(t,13)._shouldForward("dirty"),r.Ob(t,13)._shouldForward("valid"),r.Ob(t,13)._shouldForward("invalid"),r.Ob(t,13)._shouldForward("pending"),!r.Ob(t,13)._animationsEnabled]),e(t,26,1,[r.Ob(t,27).maxlength?r.Ob(t,27).maxlength:null,r.Ob(t,33)._isServer,r.Ob(t,33).id,r.Ob(t,33).placeholder,r.Ob(t,33).disabled,r.Ob(t,33).required,r.Ob(t,33).readonly&&!r.Ob(t,33)._isNativeSelect||null,r.Ob(t,33)._ariaDescribedby||null,r.Ob(t,33).errorState,r.Ob(t,33).required.toString(),r.Ob(t,34).ngClassUntouched,r.Ob(t,34).ngClassTouched,r.Ob(t,34).ngClassPristine,r.Ob(t,34).ngClassDirty,r.Ob(t,34).ngClassValid,r.Ob(t,34).ngClassInvalid,r.Ob(t,34).ngClassPending])}))}function x(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,15,"div",[["class","container"]],null,null,null,null,null)),(e()(),r.zb(1,0,null,null,2,"mat-icon",[["aria-hidden","false"],["aria-label","Cerrar modal"],["class","clr-yellow close mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,s.b,s.a)),r.yb(2,9158656,null,0,a.b,[r.l,a.d,[8,"false"],[2,a.a],[2,r.n]],null,null),(e()(),r.Xb(-1,0,["close"])),(e()(),r.zb(4,0,null,null,1,"p",[["class","title"]],null,null,null,null,null)),(e()(),r.Xb(-1,null,["RECHAZAR RESERVACI\xd3N"])),(e()(),r.zb(6,0,null,null,3,"p",[["class","motive"]],null,null,null,null,null)),(e()(),r.Xb(-1,null,[" Si cancelas una reservaci\xf3n, afectar\xe1 tu calificaci\xf3n general "])),(e()(),r.zb(8,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,[" \xbfEst\xe1s seguro? "])),(e()(),r.zb(10,0,null,null,5,"div",[["class","controls"]],null,null,null,null,null)),(e()(),r.zb(11,0,null,null,1,"p",[],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.closeDialog(!1)&&r),r}),null,null)),(e()(),r.Xb(-1,null,["Cancelar"])),(e()(),r.zb(13,0,null,null,2,"button",[["class","btns"],["type","button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.requestCancellation()&&r),r}),null,null)),(e()(),r.zb(14,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r.Xb(-1,null,["Aceptar"]))],(function(e,t){e(t,2,0)}),(function(e,t){e(t,1,0,r.Ob(t,2).inline,"primary"!==r.Ob(t,2).color&&"accent"!==r.Ob(t,2).color&&"warn"!==r.Ob(t,2).color)}))}function O(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,5,"div",[],null,null,null,null,null)),r.yb(1,16384,null,0,g.q,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),r.jb(16777216,null,null,1,null,w)),r.yb(3,278528,null,0,g.r,[r.R,r.N,g.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),r.jb(16777216,null,null,1,null,x)),r.yb(5,278528,null,0,g.r,[r.R,r.N,g.q],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(e,t){e(t,1,0,t.component.visibleContent),e(t,3,0,"motiveForm"),e(t,5,0,"refuseConfirmation")}),null)}var S=r.vb("app-refuse-reservation-motive",v.a,(function(e){return r.ac(0,[(e()(),r.zb(0,0,null,null,1,"app-refuse-reservation-motive",[],null,null,null,O,k)),r.yb(1,180224,null,0,v.a,[m.a,m.j,o.g,y.a,b.b],null,null)],null,null)}),{},{},[])},cEKI:function(e,t,n){"use strict";var r=d(n("14Xm")),i=d(n("D3Ub")),o=d(n("ODRq")),s=d(n("Yz+Y")),a=d(n("iCc5")),u=d(n("V7oC")),l=d(n("FYw3")),c=d(n("mRg0"));function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Users=void 0;var f=n("+qE3"),h=n("uaGA"),p=n("Wxaq"),g=function(e){function t(e){(0,a.default)(this,t);var n=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this));return n.services=e,n.fifoStack=[],n.fifoStackMaxLength=100,n.myself=new h.User(null,null,n.services),n.myself.on("updated",(function(e){return n.emit("userUpdated",e)})),n.myself.on("userSubscribed",(function(){return n.emit("userSubscribed",n.myself)})),n.myself.on("userUnsubscribed",(function(){n.emit("userUnsubscribed",n.myself),n.myself._ensureFetched()})),n.services=e,n.subscribedUsers=new o.default,n.userDescriptorsPromise=n.services.session.getSessionLinks().then((function(e){return n.userDescriptors=new p.UserDescriptors({users:n,network:n.services.network},e.usersUrl),n.userDescriptors})),n.services.session.getMaxUserInfosToSubscribe().then((function(e){n.fifoStackMaxLength=e})),n.services.session.getUsersData().then((function(e){return n.myself.identity=e.identity,n.myself.entityName=e.user,n.myself._ensureFetched()})),n}var n,d,f,g;return(0,c.default)(t,e),(0,u.default)(t,[{key:"handleUnsubscribeUser",value:function(e){this.subscribedUsers.has(e.identity)&&this.subscribedUsers.delete(e.identity);var t=-1;this.fifoStack.find((function(n,r){return n==e.identity&&(t=r,!0)}))&&this.fifoStack.splice(t,1),this.emit("userUnsubscribed",e)}},{key:"handleSubscribeUser",value:function(e){this.subscribedUsers.has(e.identity)||(this.fifoStack.length>=this.fifoStackMaxLength&&this.subscribedUsers.get(this.fifoStack.shift()).unsubscribe(),this.fifoStack.push(e.identity),this.subscribedUsers.set(e.identity,e),this.emit("userSubscribed",e))}},{key:"getUser",value:(g=(0,i.default)(r.default.mark((function e(t){var n,i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getUsersData();case 2:return e.next=4,this.myself._ensureFetched();case 4:if(t!=this.myself.identity){e.next=6;break}return e.abrupt("return",this.myself);case 6:if(n=this.subscribedUsers.get(t)){e.next=19;break}if(o){e.next=13;break}return e.next=11,this.getUserDescriptor(t);case 11:o=e.sent._getDescriptor().sync_unique_name;case 13:return(n=new h.User(t,o,this.services)).on("updated",(function(e){return i.emit("userUpdated",e)})),n.on("userSubscribed",(function(){return i.handleSubscribeUser(n)})),n.on("userUnsubscribed",(function(){return i.handleUnsubscribeUser(n)})),e.next=19,n._ensureFetched();case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"getUserDescriptor",value:(f=(0,i.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userDescriptorsPromise;case 2:return e.abrupt("return",this.userDescriptors.getUserDescriptor(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"getChannelUserDescriptors",value:(d=(0,i.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userDescriptorsPromise;case 2:return e.abrupt("return",this.userDescriptors.getChannelUserDescriptors(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"getSubscribedUsers",value:(n=(0,i.default)(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.getUsersData();case 2:return e.next=4,this.myself._ensureFetched();case 4:return t=[this.myself],this.subscribedUsers.forEach((function(e){return t.push(e)})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}]),t}(f.EventEmitter);t.Users=g},cRVY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffRetrier=void 0;var r=n("+qE3"),i=n("vSOj");t.BackoffRetrier=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).options=e?Object.assign({},e):{},n}return _inherits(t,e),_createClass(t,[{key:"start",value:function(){if(this.inProgress)throw new Error("Already waiting for next attempt, call finishAttempt(success : boolean) to finish it");this.createRetrier()}},{key:"stop",value:function(){this.cleanRetrier(),this.newBackoff=null,this.usedBackoff=null}},{key:"modifyBackoff",value:function(e){this.newBackoff=e}},{key:"attemptFailed",value:function(){if(!this.inProgress)throw new Error("No attempt is in progress");this.newBackoff&&(!this.usedBackoff||this.usedBackoff<this.newBackoff)?this.createRetrier():this.retrier.failed(new Error)}},{key:"cancel",value:function(){this.retrier&&this.retrier.cancel()}},{key:"cleanRetrier",value:function(){this.retrier&&(this.retrier.removeAllListeners(),this.retrier.cancel(),this.retrier=null)}},{key:"getRetryPolicy",value:function(){var e=Object.assign({},this.options);return this.newBackoff&&(e.min=this.newBackoff,e.max=this.options.max&&this.options.max>this.newBackoff?this.options.max:this.newBackoff),e.maxAttemptsCount=this.options.maxAttemptsCount?this.options.maxAttemptsCount+1:void 0,e}},{key:"createRetrier",value:function(){var e=this;this.cleanRetrier();var t=this.getRetryPolicy();this.retrier=new i.Retrier(t),this.retrier.once("attempt",(function(){e.retrier.on("attempt",(function(){return e.emit("attempt")})),e.retrier.failed(new Error("Skipping first attempt"))})),this.retrier.on("failed",(function(t){return e.emit("failed",t)})),this.usedBackoff=this.newBackoff,this.newBackoff=null,this.retrier.start().catch((function(e){}))}},{key:"inProgress",get:function(){return!!this.retrier}}]),t}(r.EventEmitter)},cSMa:function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n("u4eC"),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(s){r.regeneratorRuntime=void 0}},czaS:function(e,t,n){var r=n("USwo"),i=n("VSTI"),o=n("S4vA");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",s)}},"d+lc":function(e,t,n){var r=n("ekG2");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},dDpT:function(e,t,n){"use strict";var r,i=(r=n("iCc5"))&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationTypes=void 0;var o=function e(){(0,i.default)(this,e)};t.NotificationTypes=o,o.TYPING_INDICATOR="twilio.ipmsg.typing_indicator",o.NEW_MESSAGE="twilio.channel.new_message",o.ADDED_TO_CHANNEL="twilio.channel.added_to_channel",o.INVITED_TO_CHANNEL="twilio.channel.invited_to_channel",o.REMOVED_FROM_CHANNEL="twilio.channel.removed_from_channel",o.CONSUMPTION_UPDATE="twilio.channel.consumption_update"},"du/1":function(e,t,n){var r=n("USwo");r(r.S,"Object",{create:n("b08l")})},e56k:function(e,t,n){n("ZY/g"),n("C5kU"),e.exports=n("iqsF")},ekG2:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},f9CJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("XH0y");function i(e,t){return["".concat((new Date).toISOString()," MCS Client ").concat(e,":")].concat(Array.from(t))}var o=function(){function e(t){_classCallCheck(this,e),this.prefix="",this.prefix=null!=t&&t.length>0?t+" ":""}return _createClass(e,[{key:"setLevel",value:function(e){r.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.trace.apply(null,i(this.prefix+"T",t))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.debug.apply(null,i(this.prefix+"D",t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.info.apply(null,i(this.prefix+"I",t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.warn.apply(null,i(this.prefix+"W",t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.error.apply(null,i(this.prefix+"E",t))}}],[{key:"scope",value:function(t){return new e(t)}},{key:"setLevel",value:function(e){r.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.trace.apply(null,i("T",t))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.debug.apply(null,i("D",t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.info.apply(null,i("I",t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.warn.apply(null,i("W",t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.error.apply(null,i("E",t))}}]),e}();t.Logger=o},fJKg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransportUnavailableError=t.TwilsockError=t.Twilsock=t.TwilsockClient=void 0;var r=n("6efB");Object.defineProperty(t,"TwilsockClient",{enumerable:!0,get:function(){return r.TwilsockClient}}),Object.defineProperty(t,"Twilsock",{enumerable:!0,get:function(){return r.TwilsockClient}});var i=n("7FP+");Object.defineProperty(t,"TwilsockError",{enumerable:!0,get:function(){return i.TwilsockError}});var o=n("o+/m");Object.defineProperty(t,"TransportUnavailableError",{enumerable:!0,get:function(){return o.TransportUnavailableError}})},fUKC:function(e,t,n){n("ZY/g"),n("C5kU"),e.exports=n("sbOA")},fx7b:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("AytR"),i=n("IheW"),o=n("8Y7J"),s=function(){var e=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"getRestaurantReservations",value:function(e,t){var n=r.a.RESTAURANT_RESERVATIONS.replace("{restaurantId}",e.toString()),o=new i.h;return Object.keys(t).forEach((function(e){var n=t[e];n&&(o=o.set(e,n))})),this.http.get(n,{params:o})}},{key:"getReservationDetails",value:function(e){var t=r.a.RESERVATION_DETAIL.replace("{reservationId}",e.toString());return this.http.get(t)}},{key:"confirmReservation",value:function(e){var t=r.a.CONFIRM_RESERVATION.replace("{reservationId}",e.toString());return this.http.post(t,{})}},{key:"confirmOrder",value:function(e){var t=r.a.CONFIRM_ORDER.replace("{reservationId}",e.toString());return this.http.post(t,{})}},{key:"cancelReservation",value:function(e,t){var n={headers:new i.g,body:{reason:t}},o=r.a.CANCEL_RESERVATION.replace("{reservationId}",e.toString());return this.http.delete(o,n)}}]),e}();return e.\u0275prov=o.bc({factory:function(){return new e(o.cc(i.c))},token:e,providedIn:"root"}),e}()},"gDS+":function(e,t,n){e.exports={default:n("t/pG"),__esModule:!0}},gRli:function(e,t,n){n("aT0f"),n("3+Ww"),n("MBy0"),n("TnF5"),e.exports=n("VSTI").Symbol},grBd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryEvent=t.Telemetry=void 0;var r=n("PmLG");t.TelemetryEvent=function(){return function e(t,n,r,i,o,s){_classCallCheck(this,e),this.start=t,this.end=n,this.title=r,this.details=i,this.id=o,this.type=s}}(),t.Telemetry=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).method="telemetry.v1",n.events=e,n}return _inherits(t,e),t}(r.AbstractMessage)},gy0F:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenStorage=void 0;var r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"storeToken",value:function(t,n){e.canStore&&e.sessionStorage.setItem(e.getKeyName(n),t)}},{key:"getStoredToken",value:function(t){return e.canStore?e.sessionStorage.getItem(e.getKeyName(t)):null}},{key:"initialize",value:function(){e.canStore&&(e.sessionStorage.getItem(e.initializedFlag)&&this.clear(),e.sessionStorage.setItem(e.initializedFlag,"true"),e.window.addEventListener("unload",(function(){e.sessionStorage.removeItem(e.initializedFlag)})))}},{key:"clear",value:function(){if(e.canStore){for(var t=[],n=0;n<e.sessionStorage.length;n++){var r=e.sessionStorage.key(n);0===r.indexOf(e.tokenStoragePrefix)&&t.push(r)}t.forEach((function(t){return e.sessionStorage.removeItem(t)})),e.sessionStorage.removeItem(e.initializedFlag)}}},{key:"getKeyName",value:function(t){return"".concat(e.tokenStoragePrefix).concat(t)}},{key:"sessionStorage",get:function(){try{return global.sessionStorage}catch(e){return null}}},{key:"window",get:function(){try{return global.window}catch(e){return null}}},{key:"canStore",get:function(){return e.sessionStorage&&e.window}}]),e}();t.TokenStorage=r,r.initializedFlag="twilio_twilsock_token_storage",r.tokenStoragePrefix="twilio_continuation_token_",r.initialize()},h3Hq:function(e,t,n){var r=n("zBWt")("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(s){}return n}},hLxu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0,t.Deferred=function(){function e(){var t=this;_classCallCheck(this,e),this._promise=new Promise((function(e,n){t._resolve=e,t._reject=n}))}return _createClass(e,[{key:"update",value:function(e){this._resolve(e)}},{key:"set",value:function(e){this.current=e,this._resolve(e)}},{key:"fail",value:function(e){this._reject(e)}},{key:"promise",get:function(){return this._promise}}]),e}()},hNz0:function(e,t,n){"use strict";var r=l(n("14Xm")),i=l(n("D3Ub")),o=l(n("4d7F")),s=l(n("ODRq")),a=l(n("V7oC")),u=l(n("iCc5"));function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;var c=n("EcEN"),d=n("+qwt"),f=n("72j5"),h=n("yC9A"),p=n("FxMp"),g=n("qc9/"),v=n("5m62"),m=n("0s00").version,y=h.Logger.scope("Session"),b=function e(){(0,u.default)(this,e)},k=function(){function e(t,n){(0,u.default)(this,e);var r="undefined"!=typeof navigator?d.parse(navigator.userAgent):d;this.services=t,this.config=n,this.sessionInfo=new g.Deferred,this.currentContext={},this.pendingCommands=new s.default,this.sessionStreamPromise=null,this.endpointPlatform=["JS",m,r.os,r.name,r.version].join("|")}var t,n,l,h,k,_;return(0,a.default)(e,[{key:"handleContextUpdate",value:function(e){var t;y.info("Session context updated"),y.debug("new session context:",e),this.currentContext=e,t=e,["identity","userInfo","links","myChannels","channels"].some((function(e){return!t.hasOwnProperty(e)}))||(y.info("new session context accepted"),this.sessionInfo.set(e))}},{key:"initialize",value:function(){var e=this;return this.sessionStreamPromise=this.services.syncClient.list({purpose:"com.twilio.rtd.ipmsg",context:{type:"IpMsgSession",apiVersion:"3",endpointPlatform:this.endpointPlatform}}).then((function(t){return y.info("Session created",t.sid),t.on("itemAdded",(function(t){return e.processCommandResponse(t.item)})),t.on("itemUpdated",(function(t){return e.processCommandResponse(t.item)})),t.on("contextUpdated",(function(t){return e.handleContextUpdate(t.context)})),t})).catch((function(e){throw y.error("Failed to create session",e),e})),this.sessionStreamPromise}},{key:"addCommand",value:function(e,t){return this.processCommand(e,t)}},{key:"processCommand",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=new b;return i.request=t,i.request.action=e,i.commandId=c.v4(),y.info("Adding command: ",e,i.commandId),y.debug("command arguments:",t,r),new o.default((function(o,s){n.sessionStreamPromise.then((function(e){return n.pendingCommands.set(i.commandId,{resolve:o,reject:s,commandId:i.commandId,request:i.request}),e.push(i)})).then((function(){return y.debug("Command accepted by server",i.commandId)})).catch((function(a){n.pendingCommands.delete(i.commandId),y.error("Failed to add a command to the session",a),a.code!=f.ResponseCodes.ACCESS_FORBIDDEN_FOR_IDENTITY&&a.code!==f.ResponseCodes.LIST_NOT_FOUND||!r?s(new Error("Can't add command: "+a.message)):(y.info("recreating session..."),n.initialize(),o(n.processCommand(e,t,!1)))}))}))}},{key:"processCommandResponse",value:function(e){if(e.value.hasOwnProperty("response")&&e.value.hasOwnProperty("commandId")&&this.pendingCommands.has(e.value.commandId)){var t=e.value,n=e.value.commandId;if(t.response.status===f.ResponseCodes.HTTP_200_OK){y.debug("Command succeeded: ",t);var r=this.pendingCommands.get(n).resolve;this.pendingCommands.delete(n),r(t.response)}else{y.error("Command failed: ",t);var i=this.pendingCommands.get(n).reject;this.pendingCommands.delete(n),i(new p.SessionError(t.response.statusText,t.response.status))}}}},{key:"getSessionContext",value:function(){return this.sessionStreamPromise.then((function(e){return e.getContext()}))}},{key:"getSessionLinks",value:(_=(0,i.default)(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfo.promise;case 2:return e.abrupt("return",{publicChannelsUrl:this.config.baseUrl+(t=e.sent).links.publicChannelsUrl,myChannelsUrl:this.config.baseUrl+t.links.myChannelsUrl,typingUrl:this.config.baseUrl+t.links.typingUrl,syncListUrl:this.config.baseUrl+t.links.syncListUrl,usersUrl:this.config.baseUrl+t.links.usersUrl,mediaServiceUrl:t.links.mediaServiceUrl});case 4:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"getChannelsId",value:(k=(0,i.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfo.promise;case 2:return e.abrupt("return",e.sent.channels);case 4:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"getMyChannelsId",value:(h=(0,i.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfo.promise;case 2:return e.abrupt("return",e.sent.myChannels);case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"getMaxUserInfosToSubscribe",value:(l=(0,i.default)(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionInfo.promise;case 2:return t=e.sent,e.abrupt("return",this.config.userInfosToSubscribeOverride||t.userInfosToSubscribe||this.config.userInfosToSubscribeDefault);case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getUsersData",value:function(){return this.sessionInfo.promise.then((function(e){return{user:e.userInfo,identity:e.identity}}))}},{key:"getConsumptionReportInterval",value:(n=(0,i.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSessionContext();case 2:return t=e.sent,n=this.config.consumptionReportIntervalOverride||t.consumptionReportInterval||this.config.consumptionReportIntervalDefault,e.prev=4,e.abrupt("return",v.toSeconds(v.parse(n)));case 8:return e.prev=8,e.t0=e.catch(4),y.error("Failed to parse consumption report interval",n,"using default value",this.config.consumptionReportIntervalDefault),e.abrupt("return",v.toSeconds(v.parse(this.config.consumptionReportIntervalDefault)));case 12:case"end":return e.stop()}}),e,this,[[4,8]])}))),function(){return n.apply(this,arguments)})},{key:"getHttpCacheInterval",value:(t=(0,i.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSessionContext();case 2:return t=e.sent,n=this.config.httpCacheIntervalOverride||t.httpCacheInterval||this.config.httpCacheIntervalDefault,e.prev=4,e.abrupt("return",v.toSeconds(v.parse(n)));case 8:return e.prev=8,e.t0=e.catch(4),y.error("Failed to parse cache interval",n,"using default value",this.config.httpCacheIntervalDefault),e.abrupt("return",v.toSeconds(v.parse(this.config.httpCacheIntervalDefault)));case 12:case"end":return e.stop()}}),e,this,[[4,8]])}))),function(){return t.apply(this,arguments)})},{key:"identity",get:function(){return this.sessionInfo.current.identity}},{key:"reachabilityEnabled",get:function(){return this.currentContext.reachabilityEnabled}}]),e}();t.Session=k},hRWM:function(e){e.exports=JSON.parse('{"_args":[["twilio-sync@0.13.0","D:\\\\Software\\\\Blue\\\\a-plato-puesto-admin"]],"_from":"twilio-sync@0.13.0","_id":"twilio-sync@0.13.0","_inBundle":false,"_integrity":"sha512-3SfV2zQh6B2g+Tl7McYvcLH4/2IEZShXN7Lm/7GDkNnBSCtmX8cJLd5uOE1Vrj2pCXVXD9Ty2dxJlE4cDwBwlg==","_location":"/twilio-sync","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"twilio-sync@0.13.0","name":"twilio-sync","escapedName":"twilio-sync","rawSpec":"0.13.0","saveSpec":null,"fetchSpec":"0.13.0"},"_requiredBy":["/twilio-chat"],"_resolved":"https://registry.npmjs.org/twilio-sync/-/twilio-sync-0.13.0.tgz","_spec":"0.13.0","_where":"D:\\\\Software\\\\Blue\\\\a-plato-puesto-admin","author":{"name":"Twilio"},"browserify":{"transform":["babelify"]},"dependencies":{"loglevel":"^1.6.3","operation-retrier":"^3.0.0","platform":"^1.3.6","twilio-notifications":"^0.5.11","twilsock":"^0.6.1","uuid":"^3.3.2"},"description":"Twilio Sync client library","devDependencies":{"@types/chai":"^4.1.7","@types/chai-as-promised":"7.1.0","@types/chai-string":"^1.4.1","@types/mocha":"^5.2.7","@types/node":"^12.0.4","@types/sinon":"^7.0.12","@types/sinon-chai":"^3.2.2","async-test-tools":"^1.0.7","babel-core":"^6.26.0","babel-plugin-transform-builtin-extend":"^1.1.2","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.1","babel-runtime":"^6.26.0","babelify":"^8.0.0","browserify":"^16.2.3","chai":"^4.2.0","chai-as-promised":"^7.1.1","chai-string":"^1.5.0","cheerio":"^1.0.0-rc.2","cross-env":"^5.2.0","del":"^4.1.1","fancy-log":"^1.3.3","fs":"0.0.2","gulp":"^4.0.2","gulp-babel":"^7.0.1","gulp-derequire":"^2.1.0","gulp-if":"^2.0.2","gulp-insert":"^0.5.0","gulp-rename":"^1.4.0","gulp-sourcemaps":"^2.6.5","gulp-tap":"^1.0.1","gulp-tslint":"^8.1.4","gulp-typescript":"^5.0.1","gulp-uglify-es":"^1.0.4","ink-docstrap":"^1.3.2","jsdoc":"~3.5.5","jsonwebtoken":"^8.5.1","karma":"^4.1.0","karma-browserify":"^6.0.0","karma-browserstack-launcher":"^1.5.1","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","mocha":"^6.1.4","nyc":"^14.1.1","path":"^0.12.7","sinon":"^7.3.2","sinon-chai":"^3.3.0","source-map-explorer":"^1.8.0","ts-node":"^8.2.0","tslint":"^5.17.0","twilio":"^3.31.1","typescript":"^3.5.1","uglify-es":"^3.3.10","uglify-save-license":"^0.4.1","underscore":"^1.9.1","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0","watchify":"^3.11.1"},"engines":{"node":">=8"},"license":"MIT","main":"lib/index.js","name":"twilio-sync","types":"./lib/index.d.ts","version":"0.13.0"}')},heda:function(e,t,n){var r=n("GhSp"),i=n("d+lc"),o=n("mHY4");e.exports=n("C61u")?Object.defineProperties:function(e,t){i(e);for(var n,s=o(t),a=s.length,u=0;a>u;)r.f(e,n=s[u++],t[n]);return e}},iCc5:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},iL38:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0,t.Configuration=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.confirmedCapabilities=new Set,this.activeGrant=n,this._token=t,this.url=(r.twilsock||r.Twilsock||{}).uri||"wss://tsock.".concat(r.region||"us1",".twilio.com/v3/wsconnect"),this._continuationToken=r.continuationToken?r.continuationToken:null,this.logLevel=r.logLevel?r.logLevel:"error",this.retryPolicy=r.retryPolicy?r.retryPolicy:{min:1e3,max:12e4,randomness:.2},this.clientMetadata=r.clientMetadata?r.clientMetadata:{},this.clientMetadata.ver="0.6.1",this.initRegistrations=r.initRegistrations?r.initRegistrations:null,this.tweaks=r.tweaks?r.tweaks:null}return _createClass(e,[{key:"updateToken",value:function(e){this._token=e}},{key:"updateContinuationToken",value:function(e){this._continuationToken=e}},{key:"token",get:function(){return this._token}},{key:"continuationToken",get:function(){return this._continuationToken}}]),e}()},iWbE:function(e,t,n){"use strict";var r=f(n("14Xm")),i=f(n("D3Ub")),o=f(n("4d7F")),s=f(n("FyfS")),a=f(n("sk9p")),u=f(n("P2sY")),l=f(n("ODRq")),c=f(n("iCc5")),d=f(n("V7oC"));function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Network=void 0;var h=n("vSOj"),p=function(){function e(t,n){var r=this;(0,c.default)(this,e),this.config=t,this.services=n,this.cache=new l.default,this.cacheLifetime=0,this.services.session.getHttpCacheInterval().then((function(e){r.cacheLifetime=1e3*e,r.cleanupCache()}))}var t;return(0,d.default)(e,[{key:"backoffConfig",value:function(){return(0,u.default)(this.config.backoffConfigDefault,this.config.backoffConfigOverride)}},{key:"retryWhenThrottled",value:function(){return void 0!==this.config.retryWhenThrottledOverride?this.config.retryWhenThrottledOverride:void 0!==this.config.retryWhenThrottledDefault&&this.config.retryWhenThrottledDefault}},{key:"isExpired",value:function(e){return!this.cacheLifetime||Date.now()-e>this.cacheLifetime}},{key:"cleanupCache",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=(0,s.default)(this.cache);!(e=(r=i.next()).done);e=!0){var o=(0,a.default)(r.value,2),u=o[0];this.isExpired(o[1].timestamp)&&this.cache.delete(u)}}catch(l){t=!0,n=l}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}0===this.cache.size&&clearInterval(this.timer)}},{key:"pokeTimer",value:function(){var e=this;this.timer=this.timer||setInterval((function(){return e.cleanupCache()}),2*this.cacheLifetime)}},{key:"executeWithRetry",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new o.default((function(r,i){var o=[502,503,504];n&&o.push(429);var s=new h.Retrier(t.backoffConfig());s.on("attempt",(function(){e().then((function(e){return s.succeeded(e)})).catch((function(e){o.indexOf(e.status)>-1?s.failed(e):"Twilsock disconnected"===e.message?s.failed(e):(s.removeAllListeners(),s.cancel(),i(e))}))})),s.on("succeeded",(function(e){r(e)})),s.on("cancelled",(function(e){return i(e)})),s.on("failed",(function(e){return i(e)})),s.start()}))}},{key:"get",value:(t=(0,i.default)(r.default.mark((function e(t){var n,i,o,s=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.cache.get(t))||this.isExpired(n.timestamp)){e.next=3;break}return e.abrupt("return",n.response);case 3:return i={},e.next=6,this.executeWithRetry((function(){return s.services.transport.get(t,i,s.config.productId)}),this.retryWhenThrottled());case 6:return this.cache.set(t,{response:o=e.sent,timestamp:Date.now()}),this.pokeTimer(),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();t.Network=p},"iZ5/":function(e,t,n){var r=n("BRsN");e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},ig3W:function(e,t){e.exports={}},ioUz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var r=n("MZ0W");function i(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})).length}function o(e){var t=Array.prototype.map.call(e,(function(e){return String.fromCharCode(e)})).join("").replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}));return decodeURIComponent(t)}function s(e){return JSON.parse(o(e))}t.Parser=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"parse",value:function(e){var t=new Uint8Array(e),n=function(e){for(var t="",n=0;n<e.length;++n){var r=String.fromCharCode(e[n]);if(t+=r,"\r"===r){n+=2;break}}var i=t.split(" ");return{size:n,protocol:i[0],version:i[1],headerSize:Number(i[2])}}(t);if("TWILSOCK"===n.protocol&&"V3.0"===n.version){var i=null;try{i=s(t.subarray(n.size,n.size+n.headerSize))}catch(c){return void r.log.error("failed to parse message header",c,e)}r.log.debug("message received: ",i.method),r.log.trace("message received: ",i);var a=null;if(i.payload_size>0){var u=2+n.size+n.headerSize,l=i.payload_size;if(i.hasOwnProperty("payload_type")&&0!==i.payload_type.indexOf("application/json"))0===i.payload_type.indexOf("text/plain")&&(a=o(t.subarray(u,u+l)));else try{a=s(t.subarray(u,u+l))}catch(c){return void r.log.error("failed to parse message body",c,e)}}return{method:i.method,header:i,payload:a}}r.log.error("unsupported protocol: ".concat(n.protocol," ver ").concat(n.version))}},{key:"createPacket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.payload_size=i(t);var n,o,s,a=JSON.stringify(e)+"\r\n",u="TWILSOCK V3.0 "+(i(a)-2)+"\r\n";return r.log.debug("send request:",u+a+t),(n=u+a+t,o=encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})),s=new Uint8Array(o.length),Array.prototype.forEach.call(o,(function(e,t){s[t]=e.charCodeAt(0)})),s).buffer}}]),e}()},iocF:function(e,t,n){var r=n("USwo");r(r.P+r.R,"Set",{toJSON:n("KtlF")("Set")})},iqZd:function(e,t,n){"use strict";var r=s(n("iCc5")),i=s(n("V7oC")),o=s(n("gDS+"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.parseAttributes=t.parseTime=t.parseToNumber=t.UriBuilder=t.deepClone=t.isDeepEqual=void 0;var a=n("L5Xn");t.isDeepEqual=function(e,t){return 0===a.createPatch(e,t).length},t.deepClone=function(e){return JSON.parse((0,o.default)(e))},t.parseToNumber=function(e){return void 0===e||isNaN(Number(e))?null:Number(e)},t.parseTime=function(e){try{return new Date(e)}catch(t){return null}},t.parseAttributes=function(e,t,n){var r={};if(e)try{r=JSON.parse(e)}catch(i){n.warn(t,i)}return r};var u=function(){function e(t){(0,r.default)(this,e),this.base=t.replace(/\/$/,""),this.args=[],this.paths=[]}return(0,i.default)(e,[{key:"arg",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return void 0!==t&&this.args.push(encodeURIComponent(e)+"="+encodeURIComponent(t)),this}))},{key:"path",value:function(e){return this.paths.push(encodeURIComponent(e)),this}},{key:"build",value:function(){var e=this.base;return this.paths.length&&(e+="/"+this.paths.join("/")),this.args.length&&(e+="?"+this.args.join("&")),e}}]),e}();t.UriBuilder=u},iqsF:function(e,t,n){var r=n("aqg2"),i=n("zBWt")("iterator"),o=n("ig3W");e.exports=n("VSTI").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},ixoo:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},j3KZ:function(e,t,n){"use strict";function r(e){return null!=e}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(e){var n;if(_classCallCheck(this,t),n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)),r((e=e||{}).initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(r(e.maxDelay)&&e.maxDelay<=1)throw new Error("The maximal timeout must be greater than 1.");if(r(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");if(r(e.factor)&&e.factor<=1)throw new Error("Exponential factor should be greater than 1.");if(n.initialDelay=e.initialDelay||100,n.maxDelay=e.maxDelay||1e4,n.maxDelay<=n.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");return n.randomisationFactor=e.randomisationFactor||0,n.factor=e.factor||2,n.maxNumberOfRetry=-1,n.reset(),_possibleConstructorReturn(n)}return _inherits(t,e),_createClass(t,[{key:"backoff",value:function(e){null==this.timeoutID&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",e),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,e)))}},{key:"reset",value:function(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,clearTimeout(this.timeoutID),this.timeoutID=null}},{key:"failAfter",value:function(e){if(e<=0)throw new Error("Expected a maximum number of retry greater than 0 but got ".concat(e));this.maxNumberOfRetry=e}},{key:"next",value:function(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;var e=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*e))}},{key:"onBackoff",value:function(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}],[{key:"exponential",value:function(e){return new t(e)}}]),t}(n("+qE3").EventEmitter);t.Backoff=i,t.default=i},jWXv:function(e,t,n){e.exports={default:n("r6fa"),__esModule:!0}},je5X:function(e,t,n){"use strict";var r=a(n("4d7F")),i=a(n("ODRq")),o=a(n("iCc5")),s=a(n("V7oC"));function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TypingIndicator=void 0;var u=n("yC9A"),l=n("dDpT"),c=u.Logger.scope("TypingIndicator"),d=function(){function e(t,n,r){(0,o.default)(this,e),this.config=t,this.services=n,this.getChannel=r,this.serviceTypingTimeout=null,this.sentUpdates=new i.default}return(0,s.default)(e,[{key:"initialize",value:function(){var e=this;this.services.notificationClient.subscribe(l.NotificationTypes.TYPING_INDICATOR,"twilsock"),this.services.notificationClient.on("message",(function(t,n){t===l.NotificationTypes.TYPING_INDICATOR&&e.handleRemoteTyping(n)}))}},{key:"handleRemoteTyping",value:function(e){var t=this;c.trace("Got new typing indicator ",e),this.getChannel(e.channel_sid).then((function(n){n&&n.members.forEach((function(n){n.identity===e.identity&&n._startTyping(t.config.typingIndicatorTimeoutOverride+1e3||1e3*e.typing_timeout)}))})).catch((function(e){throw c.error(e),e}))}},{key:"send",value:function(e){var t=this.sentUpdates.get(e);return t&&t>Date.now()-this.typingTimeout?r.default.resolve():(this.sentUpdates.set(e,Date.now()),this._send(e))}},{key:"_send",value:function(e){var t=this;return c.trace("Sending typing indicator"),this.services.transport.post(this.config.typingIndicatorUri,{"Content-Type":"application/x-www-form-urlencoded"},"ChannelSid="+e,this.config.productId).then((function(e){e.body.hasOwnProperty("typing_timeout")&&(t.serviceTypingTimeout=1e3*e.body.typing_timeout)})).catch((function(e){throw c.error("Failed to send typing indicator:",e),e}))}},{key:"typingTimeout",get:function(){return this.config.typingIndicatorTimeoutOverride||this.serviceTypingTimeout||this.config.typingIndicatorTimeoutDefault}}]),e}();t.TypingIndicator=d},jlxs:function(e,t,n){var r=n("7whZ").navigator;e.exports=r&&r.userAgent||""},jssz:function(e,t,n){var r=n("7whZ"),i=n("vOBO").set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==n("TYje")(s);e.exports=function(){var e,t,n,l=function(){var r,i;for(u&&(r=s.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(l)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var c=a.resolve(void 0);n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var d=!0,f=document.createTextNode("");new o(l).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},"k/8l":function(e,t,n){e.exports={default:n("e56k"),__esModule:!0}},"k1+U":function(e,t,n){"use strict";var r=o(n("iCc5")),i=o(n("V7oC"));function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelDescriptor=void 0;var s=n("yC9A"),a=n("iqZd"),u=s.Logger.scope("ChannelDescriptor"),l=function(){function e(t,n){(0,r.default)(this,e),this.client=t,this.descriptor=n,n.sid?(this.sid=n.sid,this.channel=n.sid+".channel"):(this.sid=n.channel_sid,this.channel=n.channel_sid+".channel"),this.uniqueName=n.unique_name,this.friendlyName=n.friendly_name,this.attributes=a.parseAttributes(n.attributes,"Failed to parse channel attributes",u),this.createdBy=n.created_by,this.dateCreated=a.parseTime(n.date_created),this.dateUpdated=a.parseTime(n.date_updated),this.messagesCount=n.messages_count,this.membersCount=n.members_count,this.type=n.type,this.isPrivate="private"==n.type,this.lastConsumedMessageIndex=n.last_consumed_message_index,n.notification_level&&(this.notificationLevel=n.notification_level),this.status=n.status?n.status:"unknown"}return(0,i.default)(e,[{key:"getChannel",value:function(){return this.client.getChannelBySid(this.sid)}}]),e}();t.ChannelDescriptor=l},kMt3:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("Kj3r"),i=n("/uUt"),o=n("eIep"),s=n("s7LF"),a=n("quSY"),u=function(){function e(t,n,r,i,o,u){_classCallCheck(this,e),this.data=t,this.dialogRef=n,this.reservationsService=r,this.restaurantService=i,this.fb=o,this.snackBar=u,this.currentRestaurantSubscription=a.a.EMPTY,this.amountValidators=[s.x.required,s.x.min(1)],this.commentsValidators=[s.x.maxLength(500)],this.form=this.fb.group({search:new s.h(""),amount:new s.h(1,this.amountValidators),comments:new s.h("",this.commentsValidators)}),this.submitted=!1,this.dishes=[],this.selectedDishId=null,this.groupModifiers=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.getRestaurantInfo(),this.initSearchListener()}},{key:"getRestaurantInfo",value:function(){var e=this;this.currentRestaurantSubscription=this.restaurantService.currentRestaurant.subscribe((function(t){t&&(e.currentRestaurantSubscription.unsubscribe(),e.restaurantSelected=t)}))}},{key:"initSearchListener",value:function(){var e=this;this.form.get("search").valueChanges.pipe(Object(r.a)(200),Object(i.a)(),Object(o.a)((function(t){return e.reservationsService.searchDishes(e.restaurantSelected.id,t)}))).subscribe((function(t){e.selectedDishId=void 0,e.groupModifiers=[],e.submitted=!1,e.dishes=t.results.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})),e.toFormGroup()}))}},{key:"toFormGroup",value:function(){var e={search:new s.h(this.form.get("search").value),amount:new s.h(this.form.get("amount").value,this.amountValidators),comments:new s.h(this.form.get("comments").value,this.commentsValidators)},t=!0,n=!1,r=void 0;try{for(var i,o=this.groupModifiers[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.multiple_option){var u=!0,l=!1,c=void 0;try{for(var d,f=a.modifiers[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){e["check-"+d.value.id]=new s.h(!1)}}catch(h){l=!0,c=h}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}}else e["radio-"+a.id]=new s.h(null)}}catch(h){n=!0,r=h}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}this.form=new s.k(e),this.initSearchListener()}},{key:"getDishDetails",value:function(e){var t=this;this.selectedDishId=e,this.groupModifiers=[],this.reservationsService.getDishDetails(e).subscribe((function(e){t.groupModifiers=e.dish.group_modifiers,t.toFormGroup()}))}},{key:"submit",value:function(){var e=this;if(this.submitted=!0,this.form.valid&&this.areDishesCorrect){var t=this.getProductToAdd();this.reservationsService.addProductToOrder(this.data.orderId,t).subscribe((function(){e.closeDialog(!0)}))}else this.snackBar.open("Favor de revisar la selecci\xf3n de elementos","Entendido",{duration:15e3})}},{key:"getProductToAdd",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.groupModifiers[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(s.multiple_option){var a=[],u=!0,l=!1,c=void 0;try{for(var d,f=s.modifiers[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value;this.form.get("check-"+h.id).value&&a.push({id:h.id})}}catch(g){l=!0,c=g}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}a.length>0&&e.push({id:s.id,modifiers:a})}else{var p=this.form.get("radio-"+s.id);null!==p.value&&e.push({id:s.id,modifiers:[{id:p.value}]})}}}catch(g){n=!0,r=g}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return{id:this.selectedDishId,amount:this.form.get("amount").value,modifier_group:e,comments:this.form.get("comments").value?this.form.get("comments").value:void 0}}},{key:"isGroupCorrect",value:function(e){if(e.multiple_option){var t=[],n=!0,r=!1,i=void 0;try{for(var o,s=e.modifiers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,u=this.form.get("check-"+a.id);t.push(u)}}catch(f){r=!0,i=f}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}for(var l=0,c=0,d=t;c<d.length;c++){d[c].value&&(l+=1)}if(0===l&&e.optional_ask)return!0;if(e.min_options_per_user<=l&&e.max_options_per_user>=l)return!0}else if(this.form.get("radio-"+e.id).value||e.optional_ask)return!0;return!1}},{key:"changeAmountByOne",value:function(e){var t=this.form.get("amount");"add"===e?t.setValue(t.value+1):"subtract"===e&&t.value>1&&t.setValue(t.value-1)}},{key:"closeDialog",value:function(e){this.dialogRef.close(e)}},{key:"areDishesCorrect",get:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.groupModifiers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;if(!this.isGroupCorrect(o))return!1}}catch(s){t=!0,n=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return!0}}]),e}()},kUGv:function(e,t,n){var r=n("7whZ").document;e.exports=r&&r.documentElement},kUwj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransportUnavailableError=t.TwilsockError=t.Twilsock=t.TwilsockClient=void 0;var r=n("+fG6");Object.defineProperty(t,"TwilsockClient",{enumerable:!0,get:function(){return r.TwilsockClient}}),Object.defineProperty(t,"Twilsock",{enumerable:!0,get:function(){return r.TwilsockClient}});var i=n("arZA");Object.defineProperty(t,"TwilsockError",{enumerable:!0,get:function(){return i.TwilsockError}});var o=n("ovLx");Object.defineProperty(t,"TransportUnavailableError",{enumerable:!0,get:function(){return o.TransportUnavailableError}})},kcqV:function(e,t,n){var r=n("bKEA"),i=n("TSC6").f;n("czaS")("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},kfVJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).minDelay=e.min,n.maxDelay=e.max,n.initialDelay=e.initial||0,n.maxAttemptsCount=e.maxAttemptsCount||0,n.maxAttemptsTime=e.maxAttemptsTime||0,n.randomness=e.randomness||0,n.inProgress=!1,n.attemptNum=0,n.prevDelay=0,n.currDelay=0,n}return _inherits(t,e),_createClass(t,[{key:"attempt",value:function(){clearTimeout(this.timeout),this.attemptNum++,this.timeout=null,this.emit("attempt",this)}},{key:"nextDelay",value:function(e){if("number"==typeof e)return this.prevDelay=0,this.currDelay=e,e;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;var t=this.currDelay+this.prevDelay;return this.maxDelay&&t>this.maxDelay&&(this.currDelay=this.maxDelay,t=this.maxDelay),this.currDelay=t,t}},{key:"randomize",value:function(e){var t=e*this.randomness,n=Math.round(Math.random()*t*2-t);return Math.max(0,e+n)}},{key:"scheduleAttempt",value:function(e){var t=this;if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),this.emit("failed",new Error("Maximum attempt count limit reached")),void this.reject(new Error("Maximum attempt count reached"));var n=this.nextDelay(e);if(n=this.randomize(n),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+n)return this.cleanup(),this.emit("failed",new Error("Maximum attempt time limit reached")),void this.reject(new Error("Maximum attempt time limit reached"));this.timeout=setTimeout((function(){return t.attempt()}),n)}},{key:"cleanup",value:function(){clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}},{key:"start",value:function(){var e=this;if(this.inProgress)throw new Error("Retrier is already in progress");return this.inProgress=!0,new Promise((function(t,n){e.resolve=t,e.reject=n,e.startTimestamp=Date.now(),e.scheduleAttempt(e.initialDelay)}))}},{key:"cancel",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"),this.reject(new Error("Cancelled")))}},{key:"succeeded",value:function(e){this.emit("succeeded",e),this.resolve(e)}},{key:"failed",value:function(e,t){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(t)}},{key:"run",value:function(e){var t=this;return this.on("attempt",(function(){e().then((function(e){return t.succeeded(e)})).catch((function(e){return t.failed(e)}))})),this.start()}}]),t}(n("+qE3").EventEmitter);t.Retrier=r,t.default=r},kvAF:function(e,t,n){var r=n("GhSp").f,i=n("nA4W"),o=n("zBWt")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},kyWA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncStreamImpl=t.SyncStream=void 0;var r=n("BUbV"),i=n("IMmU"),o=n("PEWQ"),s=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).descriptor=n,i}var n,r,o;return _inherits(t,e),_createClass(t,[{key:"publishMessage",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:t},e.next=3,this.services.network.post(this.links.messages,n);case 3:return r=e.sent,e.abrupt("return",this._handleMessagePublished(r.body.sid,t,!1));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"setTtl",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.validateMandatoryTtl(t),e.prev=1,n={ttl:t},e.next=5,this.services.network.post(this.uri,n);case 5:r=e.sent,this.descriptor.date_expires=r.body.date_expires,e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),404===e.t0.status&&this.onRemoved(!1),e.t0;case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return r.apply(this,arguments)})},{key:"removeStream",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_update",value:function(e){switch(e.type){case"stream_message_published":this._handleMessagePublished(e.message_sid,e.message_data,!0);break;case"stream_removed":this.onRemoved(!1)}}},{key:"_handleMessagePublished",value:function(e,t,n){var r={sid:e,value:t};return this.broadcastEventToListeners("messagePublished",{message:r,isLocal:!n}),r}},{key:"onRemoved",value:function(e){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:e})}},{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"stream"}},{key:"lastEventId",get:function(){return null}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}}],[{key:"type",get:function(){return"stream"}}]),t}(r.SyncEntity);t.SyncStreamImpl=s;var a=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).syncStreamImpl=e,n.syncStreamImpl.attach(_assertThisInitialized(n)),n}var n,r,i;return _inherits(t,e),_createClass(t,[{key:"publishMessage",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncStreamImpl.publishMessage(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"setTtl",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncStreamImpl.setTtl(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"removeStream",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncStreamImpl.removeStream()));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"close",value:function(){_get(_getPrototypeOf(t.prototype),"close",this).call(this),this.syncStreamImpl.detach(this.listenerUuid)}},{key:"uri",get:function(){return this.syncStreamImpl.uri}},{key:"links",get:function(){return this.syncStreamImpl.links}},{key:"dateExpires",get:function(){return this.syncStreamImpl.dateExpires}},{key:"type",get:function(){return s.type}},{key:"lastEventId",get:function(){return null}},{key:"sid",get:function(){return this.syncStreamImpl.sid}},{key:"uniqueName",get:function(){return this.syncStreamImpl.uniqueName}}],[{key:"type",get:function(){return s.type}}]),t}(o.default);t.SyncStream=a,t.default=a},"l+6R":function(e,t,n){n("1i29")("Map")},l0Kd:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},m1cH:function(e,t,n){"use strict";t.__esModule=!0;var r,i=(r=n("rfXi"))&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},mB9D:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var r=n("+qE3"),i=n("fJKg"),o=n("D0ik"),s=n("pjvd"),a=n("Q3x1");t.Client=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,t),n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)),!e||0===e.length)throw new Error("Token is required for Notifications client");r.logLevel=r.logLevel||"error",a.log.setLevel(r.logLevel);var u=r.productId||"notifications";return r.twilsockClient=r.twilsockClient||new i.TwilsockClient(e,u,r),r.transport=r.transport||r.twilsockClient,n.services={twilsock:r.twilsockClient,transport:r.transport,config:new o.Configuration(null,r)},n.registrar=new s.Registrar(u,n.services.transport,n.services.twilsock,n.services.config),n.reliableTransportState={overall:!1,transport:!1,registration:!1,lastEmitted:null},n._onTransportStateChange(n.services.twilsock.isConnected),n.registrar.on("transportReady",(function(e){n._onRegistrationStateChange(e?"registered":"")})),n.registrar.on("stateChanged",(function(e){n._onRegistrationStateChange(e)})),n.registrar.on("needReliableTransport",n._onNeedReliableTransport.bind(_assertThisInitialized(n))),n.services.twilsock.on("message",(function(e,t){return n._routeMessage(e,t)})),n.services.twilsock.on("connected",(function(e){n._onTransportStateChange(!0),n.registrar.setNotificationId("twilsock",e)})),n.services.twilsock.on("disconnected",(function(){n._onTransportStateChange(!1)})),n.services.config.updateToken(e),n.registrar.updateToken(e),_possibleConstructorReturn(n)}var n;return _inherits(t,e),_createClass(t,[{key:"_routeMessage",value:function(e,t){a.log.trace("Message arrived: ",e,t),this.emit("message",e,t)}},{key:"_onNeedReliableTransport",value:function(e){e?this.services.twilsock.connect():this.services.twilsock.disconnect()}},{key:"_onRegistrationStateChange",value:function(e){this.reliableTransportState.registration="registered"===e,this._updateTransportState()}},{key:"_onTransportStateChange",value:function(e){this.reliableTransportState.transport=e,this._updateTransportState()}},{key:"_updateTransportState",value:function(){var e=this.reliableTransportState.transport&&this.reliableTransportState.registration;this.reliableTransportState.overall!==e&&(this.reliableTransportState.overall=e,a.log.info("Transport ready:",e),this.emit("transportReady",e)),this.reliableTransportState.lastEmitted!==this.connectionState&&(this.reliableTransportState.lastEmitted=this.connectionState,this.emit("connectionStateChanged",this.connectionState))}},{key:"subscribe",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"twilsock";return a.log.trace("Add subscriptions for message type: ",e,t),this.registrar.subscribe(e,t)}},{key:"unsubscribe",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"twilsock";return a.log.trace("Remove subscriptions for message type: ",e,t),this.registrar.unsubscribe(e,t)}},{key:"handlePushNotification",value:function(e){return{messageType:e.twi_message_type,payload:e.payload}}},{key:"setPushRegistrationId",value:function(e,t){a.log.trace("Set push registration id",e,t),this.registrar.setNotificationId(t,e)}},{key:"updateToken",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.log.info("authTokenUpdated"),e.t0=this.services.config.token!==t,!e.t0){e.next=7;break}return e.next=5,this.services.twilsock.updateToken(t);case 5:this.services.config.updateToken(t),this.registrar.updateToken(t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"connectionState",get:function(){return"disconnected"===this.services.twilsock.state?"disconnected":"disconnecting"===this.services.twilsock.state?"disconnecting":"connected"===this.services.twilsock.state&&this.reliableTransportState.registration?"connected":"rejected"===this.services.twilsock.state?"denied":"connecting"}}]),t}(r.EventEmitter)},mHY4:function(e,t,n){var r=n("A9a0"),i=n("l0Kd");e.exports=Object.keys||function(e){return r(e,i)}},mK5Q:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapItem=void 0,t.MapItem=function(){function e(t){_classCallCheck(this,e),this.descriptor=t}return _createClass(e,[{key:"update",value:function(e,t,n,r){return this.descriptor.last_event_id=e,this.descriptor.revision=t,this.descriptor.data=n,this.descriptor.date_updated=r,this}},{key:"updateDateExpires",value:function(e){this.descriptor.date_expires=e}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"key",get:function(){return this.descriptor.key}},{key:"value",get:function(){return this.descriptor.data}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}}]),e}()},mRg0:function(e,t,n){"use strict";t.__esModule=!0;var r=s(n("s3Ml")),i=s(n("AyUB")),o=s(n("EJiy"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},miUa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Reply=void 0;var r=n("PmLG");t.Reply=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).method="reply",n.payload_type="application/json",n.status={code:200,status:"OK"},n}return _inherits(t,e),t}(r.AbstractMessage)},myGB:function(e,t,n){n("C5kU"),n("CE4/"),e.exports=n("VSTI").Array.from},n7vu:function(e,t,n){var r=n("TYje");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},nA4W:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},nA69:function(e,t,n){"use strict";var r=n("43rs");e.exports=r},nAx8:function(e,t,n){var r=n("FgkJ");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},nRFE:function(e,t,n){var r=n("/F7N"),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},nhJU:function(e,t,n){n("PJ8w")("Map")},nwU8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Reply=void 0;var r=n("NDb0");t.Reply=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).method="reply",n.payload_type="application/json",n.status={code:200,status:"OK"},n}return _inherits(t,e),t}(r.AbstractMessage)},"o+/m":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransportUnavailableError=void 0;var r=n("7FP+");t.TransportUnavailableError=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),t}(r.TwilsockError)},oUms:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncDocumentImpl=t.SyncDocument=void 0;var r=n("PyJ+"),i=n("IMmU"),o=n("PalJ"),s=n("BUbV"),a=n("oaU9"),u=n("PEWQ"),l=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).isDeleted=!1,i.updateMergingQueue=new a.MergingQueue((function(e,t){return"number"==typeof t.ttl?{ttl:t.ttl}:e})),i.descriptor=n,i.descriptor.data=i.descriptor.data||{},i.descriptor.date_updated=new Date(i.descriptor.date_updated),i}var n,s,u,l,c,d,f,h,p;return _inherits(t,e),_createClass(t,[{key:"_update",value:function(e){switch(e.date_created=new Date(e.date_created),e.type){case"document_updated":e.id>this.lastEventId?(this.descriptor.last_event_id=e.id,this.descriptor.revision=e.document_revision,this.descriptor.date_updated=e.date_created,this.descriptor.data=e.document_data,this.broadcastEventToListeners("updated",{value:e.document_data,isLocal:!1}),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:e.id,revision:e.document_revision,date_updated:e.date_created,data:e.document_data})):o.default.trace("Document update skipped, current:",this.lastEventId,", remote:",e.id);break;case"document_removed":this.onRemoved(!1)}}},{key:"set",value:(p=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n||{},e.abrupt("return",(i.validateOptionalTtl(r.ttl),this.updateMergingQueue.squashAndAdd(r,(function(e){return o._setUnconditionally(t,e.ttl)}))));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"mutate",value:(h=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n||{},e.abrupt("return",(i.validateOptionalTtl(r.ttl),this.updateMergingQueue.add(r,(function(e){return o._setWithIfMatch(t,e.ttl)}))));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"update",value:(f=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mutate((function(e){return Object.assign(e,t)}),n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"setTtl",value:(d=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.validateMandatoryTtl(t),e.next=3,this._postUpdateToServer({ttl:t});case 3:n=e.sent,this.descriptor.date_expires=n.date_expires;case 5:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"_setUnconditionally",value:(c=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._postUpdateToServer({data:t,revision:void 0,ttl:n});case 2:return r=e.sent,e.abrupt("return",(this._handleSuccessfulUpdateResult(r),this.value));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"_setWithIfMatch",value:(l=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t(i.deepClone(this.value))){e.next=3;break}return e.abrupt("return",this.value);case 3:return o=this.revision,e.prev=4,e.next=7,this._postUpdateToServer({data:r,revision:o,ttl:n});case 7:return s=e.sent,e.abrupt("return",(this._handleSuccessfulUpdateResult(s),this.value));case 11:if(e.prev=11,e.t0=e.catch(4),412!==e.t0.status){e.next=17;break}return e.next=16,this._softSync();case 16:return e.abrupt("return",this._setWithIfMatch(t));case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(e,t){return l.apply(this,arguments)})},{key:"_handleSuccessfulUpdateResult",value:function(e){e.last_event_id>this.descriptor.last_event_id&&(this.descriptor.revision=e.revision,this.descriptor.data=e.data,this.descriptor.last_event_id=e.last_event_id,this.descriptor.date_expires=e.date_expires,this.descriptor.date_updated=new Date(e.date_updated),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:e.last_event_id,revision:e.revision,date_updated:e.date_updated,data:e.data}),this.broadcastEventToListeners("updated",{value:this.value,isLocal:!0}))}},{key:"_postUpdateToServer",value:(u=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDeleted){e.next=2;break}return e.abrupt("return",Promise.reject(new r.SyncError("The Document has been removed",404,54100)));case 2:return n={data:t.data},void 0!==t.ttl&&(n.ttl=t.ttl),i=t.revision,e.prev=5,e.next=8,this.services.network.post(this.uri,n,i);case 8:return o=e.sent,e.abrupt("return",{revision:o.body.revision,data:t.data,last_event_id:o.body.last_event_id,date_updated:o.body.date_updated,date_expires:o.body.date_expires});case 12:throw e.prev=12,e.t0=e.catch(5),404===e.t0.status&&this.onRemoved(!1),e.t0;case 15:case"end":return e.stop()}}),e,this,[[5,12]])}))),function(e){return u.apply(this,arguments)})},{key:"_softSync",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.services.network.get(this.uri).then((function(e){return t._update({type:"document_updated",id:e.body.last_event_id,document_revision:e.body.revision,document_data:e.body.data,date_created:e.body.date_updated}),t})).catch((function(e){404===e.status?t.onRemoved(!1):o.default.error("Can't get updates for ".concat(t.sid,":"),e)})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"onRemoved",value:function(e){this.isDeleted||(this.isDeleted=!0,this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:e}))}},{key:"removeDocument",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDeleted){e.next=2;break}return e.abrupt("return",Promise.reject(new r.SyncError("The Document has been removed",404,54100)));case 2:return e.next=4,this.services.network.delete(this.uri);case 4:this.onRemoved(!0);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"document"}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"value",get:function(){return this.descriptor.data}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}}],[{key:"type",get:function(){return"document"}}]),t}(s.SyncEntity);t.SyncDocumentImpl=l;var c=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).syncDocumentImpl=e,n.syncDocumentImpl.attach(_assertThisInitialized(n)),n}var n,r,i,o,s;return _inherits(t,e),_createClass(t,[{key:"set",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncDocumentImpl.set(t,n)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"mutate",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncDocumentImpl.mutate(t,n)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"update",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncDocumentImpl.update(t,n)));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"setTtl",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncDocumentImpl.setTtl(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"removeDocument",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.ensureNotClosed(),this.syncDocumentImpl.removeDocument()));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"close",value:function(){_get(_getPrototypeOf(t.prototype),"close",this).call(this),this.syncDocumentImpl.detach(this.listenerUuid)}},{key:"uri",get:function(){return this.syncDocumentImpl.uri}},{key:"revision",get:function(){return this.syncDocumentImpl.revision}},{key:"lastEventId",get:function(){return this.syncDocumentImpl.lastEventId}},{key:"dateExpires",get:function(){return this.syncDocumentImpl.dateExpires}},{key:"type",get:function(){return l.type}},{key:"sid",get:function(){return this.syncDocumentImpl.sid}},{key:"value",get:function(){return this.syncDocumentImpl.value}},{key:"dateUpdated",get:function(){return this.syncDocumentImpl.dateUpdated}},{key:"uniqueName",get:function(){return this.syncDocumentImpl.uniqueName}}],[{key:"type",get:function(){return l.type}}]),t}(u.default);t.SyncDocument=c,t.default=c},oaU9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamespacedMergingQueue=t.MergingQueue=void 0;var r=function(){function e(t){_classCallCheck(this,e),this.queuedRequests=[],this.isRequestInFlight=!1,this.inputMergingFunction=t}return _createClass(e,[{key:"add",value:function(e,t){var n=this,r=new Promise((function(r,i){return n.queuedRequests.push({input:e,requestFunction:t,resolve:r,reject:i})}));return this.wakeupQueue(),r}},{key:"squashAndAdd",value:function(e,t){var n,r=this.queuedRequests;this.queuedRequests=[],r.length>0?(n=r.map((function(e){return e.input})).reduce(this.inputMergingFunction),n=this.inputMergingFunction(n,e)):n=e;var i=this.add(n,t);return r.forEach((function(e){return i.then(e.resolve,e.reject)})),i}},{key:"isEmpty",value:function(){return 0===this.queuedRequests.length&&!this.isRequestInFlight}},{key:"wakeupQueue",value:function(){var e=this;if(0!==this.queuedRequests.length&&!this.isRequestInFlight){var t=this.queuedRequests.shift();this.isRequestInFlight=!0,t.requestFunction(t.input).then(t.resolve,t.reject).then((function(t){e.isRequestInFlight=!1,e.wakeupQueue()}))}}}]),e}();t.MergingQueue=r,t.NamespacedMergingQueue=function(){function e(t){_classCallCheck(this,e),this.queueByNamespaceKey=new Map,this.inputReducer=t}var t,n,i;return _createClass(e,[{key:"add",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.invokeQueueMethod(t,(function(e){return e.add(n,r)})));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"squashAndAdd",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.invokeQueueMethod(t,(function(e){return e.squashAndAdd(n,r)})));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"invokeQueueMethod",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.queueByNamespaceKey.has(t)||this.queueByNamespaceKey.set(t,new r(this.inputReducer)),i=n(this.queueByNamespaceKey.get(t)),e.abrupt("return",(this.queueByNamespaceKey.get(t).isEmpty()&&this.queueByNamespaceKey.delete(t),i));case 3:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}()},ovLx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransportUnavailableError=void 0;var r=n("arZA");t.TransportUnavailableError=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),t}(r.TwilsockError)},pjvd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Registrar=void 0;var r=n("+qE3"),i=n("vFc6"),o=n("AqBG");t.Registrar=function(e){function t(e,n,r,s){var a;_classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).config=s,a.connectors=new Map;var u=a.detectPlatform();return a.connectors.set("gcm",new i.RegistrarConnector("gcm",{protocolVersion:3,productId:e,platform:u},n,s)),a.connectors.set("fcm",new i.RegistrarConnector("fcm",{protocolVersion:3,productId:e,platform:u},n,s)),a.connectors.set("apn",new i.RegistrarConnector("apn",{protocolVersion:4,productId:e,platform:u},n,s)),a.connectors.set("twilsock",new o.TwilsockConnector({productId:e,platform:u},r,s)),a.connectors.get("twilsock").on("transportReady",(function(e){return a.emit("transportReady",e)})),a}return _inherits(t,e),_createClass(t,[{key:"setNotificationId",value:function(e,t){this.connector(e).setNotificationId(t)}},{key:"subscribe",value:function(e,t){return this.connector(t).subscribe(e)}},{key:"unsubscribe",value:function(e,t){return this.connector(t).unsubscribe(e)}},{key:"updateToken",value:function(e){this.connectors.forEach((function(t){return t.updateToken(e)}))}},{key:"connector",value:function(e){var t=this.connectors.get(e);if(!t)throw new Error("Unknown channel type: ".concat(e));return t}},{key:"detectPlatform",value:function(){var e="";return"undefined"!=typeof navigator?(e="unknown",void 0!==navigator.product&&(e=navigator.product),void 0!==navigator.userAgent&&(e=navigator.userAgent)):e="web",e.substring(0,128)}}]),t}(r.EventEmitter)},qFAj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Upstream=void 0;var r=n("MZ0W"),i=n("arZA"),o=n("vDCP"),s=n("bldR"),a=n("ovLx");function u(e,t){var n=function(e){var t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(t){var n={protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7],params:null};if(n.search.length>0){var r=n.search.substring(1);n.params=r.split("&").map((function(e){return e.split("=")})).reduce((function(e,t){return e.hasOwnProperty(t[0])?Array.isArray(e[t[0]])?e[t[0]].push(t[1]):e[t[0]]=[e[t[0]],t[1]]:e[t[0]]=t[1],e}),{})}return n}throw new i.TwilsockError("Incorrect URI: "+e)}(t),r={method:e,host:n.host,path:n.pathname};return n.params&&(r.params=n.params),r}t.Upstream=function(){function e(t,n,r){_classCallCheck(this,e),this.config=r,this.transport=t,this.pendingMessages=[],this.twilsock=n}var t;return _createClass(e,[{key:"saveMessage",value:function(e){var t=this;return new Promise((function(n,o){var s={message:e,resolve:n,reject:o,alreadyRejected:!1,timeout:setTimeout((function(){r.log.debug("request is timed out"),o(new i.TwilsockError("Twilsock: request timeout")),s.alreadyRejected=!0}),2e4)};t.pendingMessages.push(s)}))}},{key:"sendPendingMessages",value:function(){for(var e=this,t=function(){var t=e.pendingMessages[0];if(!t.alreadyRejected)try{e.actualSend(t.message).then((function(e){return t.resolve(e)})).catch((function(e){return t.reject(e)})),clearTimeout(t.timeout)}catch(n){return r.log.debug("Failed to send pending message",n),"break"}e.pendingMessages.splice(0,1)};this.pendingMessages.length;){if("break"===t())break}}},{key:"rejectPendingMessages",value:function(){var e=this;this.pendingMessages.forEach((function(t){t.reject(new a.TransportUnavailableError("Unable to connect: "+e.twilsock.getTerminationReason)),clearTimeout(t.timeout)})),this.pendingMessages.splice(0,this.pendingMessages.length)}},{key:"actualSend",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,a,u,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.to,r=t.headers,i=t.body,a=new s.Message(t.grant?t.grant:this.config.activeGrant,r["Content-Type"]||"application/json",{host:n.host,path:n.path,method:n.method,params:n.params,headers:r}),e.next=6,this.transport.sendWithReply(a,i);case 6:if(u=e.sent,!((c=u)&&c.header&&c.header.http_status)||(l=u.header.http_status.code)>=200&&l<300){e.next=9;break}throw new o.TwilsockUpstreamError(u.header.http_status.code,u.header.http_status.status,u.body);case 9:return e.abrupt("return",{status:u.header.http_status,headers:u.header.http_headers,body:u.body});case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(this.twilsock.isTerminalState)return Promise.reject(new a.TransportUnavailableError("Unable to connect: "+this.twilsock.getTerminationReason));var o=function(e,t,n,r,i){return{to:u(e,t),headers:n,body:r,grant:i}}(e,t,n,r,i);return this.twilsock.isConnected?this.actualSend(o):this.saveMessage(o)}}]),e}()},"qc9/":function(e,t,n){"use strict";var r=s(n("4d7F")),i=s(n("iCc5")),o=s(n("V7oC"));function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0;var a=function(){function e(){var t=this;(0,i.default)(this,e),this._promise=new r.default((function(e,n){t._resolve=e,t._reject=n}))}return(0,o.default)(e,[{key:"update",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){this._resolve(e)}))},{key:"set",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){this.current=e,this._resolve(e)}))},{key:"fail",value:function(e){this._reject(e)}},{key:"promise",get:function(){return this._promise}}]),e}();t.Deferred=a},ql3t:function(e,t,n){e.exports={default:n("C/FO"),__esModule:!0}},qwtH:function(e,t,n){"use strict";var r=n("iZ5/"),i=n("40oJ").getWeak,o=n("d+lc"),s=n("ekG2"),a=n("ukM9"),u=n("wlNh"),l=n("rNHk"),c=n("nA4W"),d=n("JAUQ"),f=l(5),h=l(6),p=0,g=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},m=function(e,t){return f(e.a,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=m(this,e);if(t)return t[1]},has:function(e){return!!m(this,e)},set:function(e,t){var n=m(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var l=e((function(e,r){a(e,l,t,"_i"),e._t=t,e._i=p++,e._l=void 0,null!=r&&u(r,n,e[o],e)}));return r(l.prototype,{delete:function(e){if(!s(e))return!1;var n=i(e);return!0===n?g(d(this,t)).delete(e):n&&c(n,this._i)&&delete n[this._i]},has:function(e){if(!s(e))return!1;var n=i(e);return!0===n?g(d(this,t)).has(e):n&&c(n,this._i)}}),l},def:function(e,t,n){var r=i(o(t),!0);return!0===r?g(e).set(t,n):r[e._i]=n,e},ufstore:g}},qzTf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=function(){function e(t,n,r){_classCallCheck(this,e);var i=r.MCS||r||{};this.region=i.region||r.region,this.baseUrl=(void 0===this.region?"https://mcs.us1.twilio.com":"https://mcs.".concat(this.region,".twilio.com"))+n,this.token=t,this.retryWhenThrottledOverride=i.retryWhenThrottledOverride,this.backoffConfigOverride=i.backoffConfigOverride}return _createClass(e,[{key:"updateToken",value:function(e){this.token=e}}],[{key:"backoffConfigDefault",get:function(){return{min:1e3,max:4e3,maxAttemptsCount:3}}},{key:"retryWhenThrottledDefault",get:function(){return!0}}]),e}()},"r+Qc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subscriptions=void 0;var r=n("vSOj"),i=n("PyJ+"),o=n("PalJ"),s=n("kUwj"),a=function(){function e(t){_classCallCheck(this,e),this.localObject=t,this.pendingCorrelationId=null,this.pendingAction=null,this.established=!1,this.retryCount=0}return _createClass(e,[{key:"update",value:function(e,t){this.localObject._update(e,t)}},{key:"updatePending",value:function(e,t){this.pendingAction=e,this.pendingCorrelationId=t}},{key:"reset",value:function(){this.updatePending(null,null),this.retryCount=0,this.established=!1,this.setSubscriptionState("none")}},{key:"markAsFailed",value:function(e){this.rejectedWithError=e.error,this.updatePending(null,null),this.localObject.reportFailure(new i.SyncError("Failed to subscribe on service events: ".concat(e.error.message),e.error.status,e.error.code))}},{key:"complete",value:function(e){this.updatePending(null,null),this.established=!0,this.localObject._advanceLastEventId(e)}},{key:"setSubscriptionState",value:function(e){this.localObject._setSubscriptionState(e)}},{key:"sid",get:function(){return this.localObject.sid}},{key:"type",get:function(){return this.localObject.type}},{key:"lastEventId",get:function(){return this.localObject.lastEventId}},{key:"indexName",get:function(){return this.localObject.indexName}},{key:"queryString",get:function(){return this.localObject.queryString}},{key:"isEstablished",get:function(){return this.established}}]),e}();t.Subscriptions=function(){function e(t){var n=this;_classCallCheck(this,e),this.isConnected=!1,this.maxBatchSize=100,this.subscriptionTtlTimer=null,this.pendingPokeReason=null,this.services=t,this.subscriptions=new Map,this.persisted=new Map,this.latestPokeResponseArrivalTimestampByCorrelationId=new Map,this.backoff=r.Backoff.exponential(Object.assign({randomisationFactor:.2,initialDelay:100,maxDelay:12e4},this.services.config.backoffConfig)),this.backoff.on("ready",(function(){var e=n.getSubscriptionUpdateBatch(),t=e.action,r=e.subscriptions;t?n.applyNewSubscriptionUpdateBatch(t,r):(n.backoff.reset(),o.default.debug("All subscriptions resolved."))}))}var t;return _createClass(e,[{key:"getSubscriptionUpdateBatch",value:function(){function e(e,t,n,r){var i=[],o=!0,s=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=_slicedToArray(u.value,2),d=c[0],f=c[1];if(!t.get(d)&&n!==f.pendingAction&&!f.rejectedWithError&&(i.push(f),r&&i.length>=r))break}}catch(h){s=!0,a=h}finally{try{o||null==l.return||l.return()}finally{if(s)throw a}}return i}var t=e(this.subscriptions,this.persisted,"establish",this.maxBatchSize);if(t.length>0)return{action:"establish",subscriptions:t};var n=e(this.persisted,this.subscriptions,"cancel",this.maxBatchSize);return n.length>0?{action:"cancel",subscriptions:n}:{action:null,subscriptions:null}}},{key:"persist",value:function(){this.backoff.backoff()}},{key:"applyNewSubscriptionUpdateBatch",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,i,a,u,l,c,d,f,h,p,g,v,m,y,b,k,_,C,w=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isConnected){e.next=2;break}return e.abrupt("return",(o.default.debug("Twilsock connection (required for subscription) not ready; waiting\u2026"),void this.backoff.reset()));case 2:for(n=this.processLocalActions(t,n),r=(new Date).getTime(),i=!0,a=!1,u=void 0,e.prev=7,l=n[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)d=c.value,this.recordActionAttemptOn(d,t,r);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),a=!0,u=e.t0;case 15:e.prev=15,e.prev=16,i||null==l.return||l.return();case 18:if(e.prev=18,!a){e.next=21;break}throw u;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return f=this.pendingPokeReason,this.pendingPokeReason=null,e.prev=25,e.next=28,this.request(t,r,f,n);case 28:h=e.sent,p=h.body.max_batch_size,!isNaN(parseInt(p))&&isFinite(p)&&p>0&&(this.maxBatchSize=p),this.subscriptionTtlTimer||(g=h.body.ttl_in_s,!isNaN(parseFloat(g))&&isFinite(g)&&g>0&&(this.subscriptionTtlTimer=setTimeout((function(){return w.onSubscriptionTtlElapsed()}),1e3*g))),"establish"===t&&(v=h.body.estimated_delivery_in_ms,!isNaN(parseFloat(v))&&isFinite(v)&&v>0?setTimeout((function(){return w.verifyPokeDelivery(r,v,n)}),v):o.default.error("Invalid timeout: ".concat(v)),n.filter((function(e){return e.pendingCorrelationId===r})).forEach((function(e){return e.setSubscriptionState("response_in_flight")}))),this.backoff.reset(),e.next=57;break;case 35:for(e.prev=35,e.t1=e.catch(25),m=!0,y=!1,b=void 0,e.prev=40,k=n[Symbol.iterator]();!(m=(_=k.next()).done);m=!0)C=_.value,this.recordActionFailureOn(C,t);e.next=48;break;case 44:e.prev=44,e.t2=e.catch(40),y=!0,b=e.t2;case 48:e.prev=48,e.prev=49,m||null==k.return||k.return();case 51:if(e.prev=51,!y){e.next=54;break}throw b;case 54:return e.finish(51);case 55:return e.finish(48);case 56:e.t1 instanceof s.TransportUnavailableError?(o.default.debug("Twilsock connection (required for subscription) not ready (c:".concat(r,"); waiting\u2026")),this.backoff.reset()):(o.default.debug("Failed an attempt to ".concat(t," subscriptions (c:").concat(r,"); retrying"),e.t1),this.persist());case 57:case"end":return e.stop()}}),e,this,[[7,11,15,23],[16,,18,22],[25,35],[40,44,48,56],[49,,51,55]])}))),function(e,n){return t.apply(this,arguments)})},{key:"verifyPokeDelivery",value:function(e,t,n){var r=this,i=this.latestPokeResponseArrivalTimestampByCorrelationId.get(e),o=i?(new Date).getTime()-i:t;o>=t?(n.filter((function(t){return t.pendingCorrelationId===e})).forEach((function(e){e.updatePending(null,null),e.retryCount++,r.persisted.delete(e.sid)})),this.persist(),this.latestPokeResponseArrivalTimestampByCorrelationId.delete(e)):setTimeout((function(){return r.verifyPokeDelivery(e,t,n)}),t-o)}},{key:"processLocalActions",value:function(e,t){return"cancel"===e?t.filter((function(e){return!e.rejectedWithError})):t}},{key:"recordActionAttemptOn",value:function(e,t,n){if(e.setSubscriptionState("request_in_flight"),"establish"===t)this.persisted.set(e.sid,e),e.updatePending(t,n);else{var r=this.persisted.get(e.sid);r&&r.updatePending(t,n)}}},{key:"recordActionFailureOn",value:function(e,t){e.setSubscriptionState("none"),e.updatePending(null,null),"establish"===t&&this.persisted.delete(e.sid)}},{key:"request",value:function(e,t,n,r){var i=r.map((function(t){return{object_sid:t.sid,object_type:t.type,last_event_id:"establish"===e?t.lastEventId:void 0,index_name:"establish"===e?t.indexName:void 0,query_string:"establish"===e?t.queryString:void 0}})),s=r.filter((function(e){return e.retryCount>0})).length;o.default.debug("Attempting '".concat(e,"' request (c:").concat(t,"):"),i);var a={event_protocol_version:3,action:e,correlation_id:t,retried_requests:s,ttl_in_s:-1,requests:i};return"ttl"===n&&(a.reason=n),this.services.network.post(this.services.config.subscriptionsUri,a)}},{key:"add",value:function(e,t){o.default.debug("Establishing intent to subscribe to ".concat(e));var n=this.subscriptions.get(e);n&&t&&n.lastEventId===t.lastEventId||(this.persisted.delete(e),this.subscriptions.set(e,new a(t)),this.persist())}},{key:"remove",value:function(e){o.default.debug("Establishing intent to unsubscribe from ".concat(e)),this.subscriptions.delete(e)&&this.persist()}},{key:"acceptMessage",value:function(e,t){var n;switch(o.default.trace("Subscriptions received",e),e.correlation_id&&this.latestPokeResponseArrivalTimestampByCorrelationId.set(e.correlation_id,(new Date).getTime()),e.event_type){case"subscription_established":this.applySubscriptionEstablishedMessage(e.event,e.correlation_id);break;case"subscription_canceled":this.applySubscriptionCancelledMessage(e.event,e.correlation_id);break;case"subscription_failed":this.applySubscriptionFailedMessage(e.event,e.correlation_id);break;case(n=e.event_type.match(/^(?:map|list|document|stream|live_query)_/)||{}).input:var r;switch(n[0]){case"map_":r=e.event.map_sid;break;case"list_":r=e.event.list_sid;break;case"document_":r=e.event.document_sid;break;case"stream_":r=e.event.stream_sid;break;case"live_query_":r=e.event.query_id,t=!1,!0===e.strictly_ordered&&(t=!0);break;default:r=void 0}this.applyEventToSubscribedEntity(r,e,t);break;default:o.default.debug("Dropping unknown message type ".concat(e.event_type))}}},{key:"applySubscriptionEstablishedMessage",value:function(e,t){var n=e.object_sid,r=this.persisted.get(e.object_sid);r&&r.pendingCorrelationId===t?"interrupted"===e.replay_status?(o.default.debug("Event Replay for subscription to ".concat(n," (c:").concat(t,") interrupted; continuing eagerly.")),r.updatePending(null,null),this.persisted.delete(r.sid),this.backoff.reset()):"completed"===e.replay_status&&(o.default.debug("Event Replay for subscription to ".concat(n," (c:").concat(t,") completed. Subscription is ready.")),r.complete(e.last_event_id),this.persisted.set(e.object_sid,r),r.setSubscriptionState("established"),this.backoff.reset()):o.default.debug("Late message for ".concat(e.object_sid," (c:").concat(t,") dropped.")),this.persist()}},{key:"applySubscriptionCancelledMessage",value:function(e,t){var n=this.persisted.get(e.object_sid);n&&n.pendingCorrelationId===t?(n.updatePending(null,null),n.setSubscriptionState("none"),this.persisted.delete(e.object_sid)):o.default.debug("Late message for ".concat(e.object_sid," (c:").concat(t,") dropped.")),this.persist()}},{key:"applySubscriptionFailedMessage",value:function(e,t){var n=e.object_sid,r=this.subscriptions.get(n),i=this.persisted.get(n);r&&i?i.pendingCorrelationId===t&&(o.default.error("Failed to subscribe on ".concat(i.sid),e.error),i.markAsFailed(e),i.setSubscriptionState("none")):!r&&i&&(this.persisted.delete(n),i.setSubscriptionState("none")),this.persist()}},{key:"applyEventToSubscribedEntity",value:function(e,t,n){if(e){var r;n=n||(r=this.persisted.get(e))&&r.isEstablished;var i=this.subscriptions.get(e);i?(t.event.type=t.event_type,i.update(t.event,n)):o.default.debug("Message dropped for SID '".concat(e,"', for which there is no subscription."))}}},{key:"onConnectionStateChanged",value:function(e){this.isConnected=e,e&&this.poke("reconnect")}},{key:"onSubscriptionTtlElapsed",value:function(){this.isConnected&&this.poke("ttl")}},{key:"poke",value:function(e){o.default.debug("Triggering event replay for all subscriptions, reason=".concat(e)),this.pendingPokeReason=e,this.subscriptionTtlTimer&&(clearTimeout(this.subscriptionTtlTimer),this.subscriptionTtlTimer=null);var t=[],n=!0,r=!1,i=void 0;try{for(var s,a=this.persisted.values()[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value;u.reset(),u.rejectedWithError&&t.push(u)}}catch(f){r=!0,i=f}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}this.persisted.clear();for(var l=0,c=t;l<c.length;l++){var d=c[l];this.persisted.set(d.sid,d)}this.persist()}},{key:"shutdown",value:function(){this.backoff.reset(),this.subscriptions.clear()}}]),e}()},r6fa:function(e,t,n){n("3+Ww"),n("C5kU"),n("ZY/g"),n("PfQu"),n("iocF"),n("Huux"),n("Li4W"),e.exports=n("VSTI").Set},rNHk:function(e,t,n){var r=n("nAx8"),i=n("n7vu"),o=n("CYMq"),s=n("0WpP"),a=n("+WSI");e.exports=function(e,t){var n=1==e,u=2==e,l=3==e,c=4==e,d=6==e,f=5==e||d,h=t||a;return function(t,a,p){for(var g,v,m=o(t),y=i(m),b=r(a,p,3),k=s(y.length),_=0,C=n?h(t,k):u?h(t,0):void 0;k>_;_++)if((f||_ in y)&&(v=b(g=y[_],_,m),e))if(n)C[_]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return _;case 2:C.push(g)}else if(c)return!1;return d?-1:l||c?c:C}}},rdj4:function(e,t,n){"use strict";var r=n("GhSp").f,i=n("b08l"),o=n("iZ5/"),s=n("nAx8"),a=n("ukM9"),u=n("wlNh"),l=n("OTpG"),c=n("6jRP"),d=n("va3J"),f=n("C61u"),h=n("40oJ").fastKey,p=n("JAUQ"),g=f?"_s":"size",v=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var c=e((function(e,r){a(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,null!=r&&u(r,n,e[l],e)}));return o(c.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=p(this,t),r=v(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[g]--}return!!r},forEach:function(e){p(this,t);for(var n,r=s(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(p(this,t),e)}}),f&&r(c.prototype,"size",{get:function(){return p(this,t)[g]}}),c},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[g]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){l(e,t,(function(e,n){this._t=p(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,c(1))}),n?"entries":"values",!n,!0),d(t)}}},rfXi:function(e,t,n){e.exports={default:n("myGB"),__esModule:!0}},rifi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwilsockUpstreamError=void 0;var r=n("7FP+");t.TwilsockUpstreamError=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))).status=e,i.description=n,i.body=r,i}return _inherits(t,e),t}(r.TwilsockError)},s2er:function(e,t,n){var r=n("VSTI"),i=n("7whZ"),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("5ETA")?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},s3Ml:function(e,t,n){e.exports={default:n("QRdY"),__esModule:!0}},sbOA:function(e,t,n){var r=n("d+lc"),i=n("I90/");e.exports=n("VSTI").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},sk9p:function(e,t,n){"use strict";t.__esModule=!0;var r=o(n("k/8l")),i=o(n("FyfS"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var a,u=(0,i.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,s=l}finally{try{!r&&u.return&&u.return()}finally{if(o)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},srAY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Close=void 0;var r=n("NDb0");t.Close=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).method="close",e}return _inherits(t,e),t}(r.AbstractMessage)},"t/pG":function(e,t,n){var r=n("VSTI"),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},u4eC:function(e,t){!function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag",u="object"==typeof e,l=t.regeneratorRuntime;if(l)u&&(e.exports=l);else{(l=t.regeneratorRuntime=u?e.exports:{}).wrap=g;var c={},d={};d[o]=function(){return this};var f=Object.getPrototypeOf,h=f&&f(f(S([])));h&&h!==n&&r.call(h,o)&&(d=h);var p=b.prototype=m.prototype=Object.create(d);y.prototype=p.constructor=b,b.constructor=y,b[a]=y.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(p),e},l.awrap=function(e){return{__await:e}},k(_.prototype),_.prototype[s]=function(){return this},l.AsyncIterator=_,l.async=function(e,t,n,r){var i=new _(g(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(p),p[a]="Generator",p[o]=function(){return this},p.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=S,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}}}function g(e,t,n,r){var i=Object.create((t&&t.prototype instanceof m?t:m).prototype),o=new O(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=C(s,n);if(a){if(a===c)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=v(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function v(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function m(){}function y(){}function b(){}function k(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function _(e){var t;this._invoke=function(n,i){function o(){return new Promise((function(t,o){!function t(n,i,o,s){var a=v(e[n],e,i);if("throw"!==a.type){var u=a.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(l).then((function(e){u.value=e,o(u)}),s)}s(a.arg)}(n,i,t,o)}))}return t=t?t.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=v(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},u8T8:function(e,t,n){e.exports={default:n("32R9"),__esModule:!0}},uShU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.Logger=void 0;var r=n("XH0y").getLogger("twilsock");function i(e,t){return["".concat((new Date).toISOString()," Twilsock ").concat(e,":")].concat(Array.from(t))}var o=function(){function e(t){_classCallCheck(this,e),this.prefix="",this.prefix=null!=t&&t.length>0?" "+t+":":""}return _createClass(e,[{key:"setLevel",value:function(e){r.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.debug.apply(null,i("T",t))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.debug.apply(null,i("D",t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.info.apply(null,i("I",t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.warn.apply(null,i("W",t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.error.apply(null,i("E",t))}}],[{key:"setLevel",value:function(e){r.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.trace.apply(null,i("T",t))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.debug.apply(null,i("D",t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.info.apply(null,i("I",t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.warn.apply(null,i("W",t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.error.apply(null,i("E",t))}}]),e}();t.Logger=o;var s=new o("");t.log=s},uaGA:function(e,t,n){"use strict";var r=v(n("gDS+")),i=v(n("14Xm")),o=v(n("D3Ub")),s=v(n("4d7F")),a=v(n("Yz+Y")),u=v(n("iCc5")),l=v(n("V7oC")),c=v(n("FYw3")),d=v(n("mRg0")),f=v(n("u8T8")),h=v(n("SEkw")),p=v(n("EJiy")),g=v(n("JO7F"));function v(e){return e&&e.__esModule?e:{default:e}}var m=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=(0,g.default)(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":(0,p.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&(0,h.default)(t,n,s),s},y=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,p.default)(Reflect))&&"function"==typeof f.default)return(0,f.default)(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var b=n("+qE3"),k=n("yC9A"),_=n("iqZd"),C=n("C9Jq"),w=k.Logger.scope("User"),x=function(e){function t(e,n,r){(0,u.default)(this,t);var i=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return i.subscribed="initializing",i.setMaxListeners(0),i.services=r,i.state={identity:e,entityName:n,friendlyName:null,attributes:{},online:null,notifiable:null},i}var n,f,h,p;return(0,d.default)(t,e),(0,l.default)(t,[{key:"_update",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var n=[];switch(w.debug("User for",this.state.identity,"updated:",e,t),e){case"friendlyName":this.state.friendlyName!==t.value&&(n.push("friendlyName"),this.state.friendlyName=t.value);break;case"attributes":var r=_.parseAttributes(t.value,"Retrieved malformed attributes from the server for user: "+this.state.identity,w);_.isDeepEqual(this.state.attributes,r)||(this.state.attributes=r,n.push("attributes"));break;case"reachability":this.state.online!==t.online&&(this.state.online=t.online,n.push("online")),this.state.notifiable!==t.notifiable&&(this.state.notifiable=t.notifiable,n.push("notifiable"));break;default:return}n.length>0&&this.emit("updated",{user:this,updateReasons:n})}))},{key:"_updateReachabilityInfo",value:function(e,t){var n=this;return this.services.session.reachabilityEnabled?e.get("reachability").then(t).catch((function(e){w.warn("Failed to get reachability info for ",n.state.identity,e)})):s.default.resolve()}},{key:"_fetch",value:(p=(0,o.default)(i.default.mark((function e(){var t=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.entityName){e.next=2;break}return e.abrupt("return",this);case 2:return this.promiseToFetch=this.services.syncClient.map({id:this.state.entityName,mode:"open_existing",includeItems:!0}).then((function(e){return t.entity=e,e.on("itemUpdated",(function(e){return w.debug(t.state.entityName+" ("+t.state.identity+") itemUpdated: "+e.item.key),t._update(e.item.key,e.item.value)})),s.default.all([e.get("friendlyName").then((function(e){return t._update(e.key,e.value)})),e.get("attributes").then((function(e){return t._update(e.key,e.value)})),t._updateReachabilityInfo(e,(function(e){return t._update(e.key,e.value)}))])})).then((function(){return w.debug("Fetched for",t.identity),t.subscribed="subscribed",t.emit("userSubscribed",t),t})).catch((function(e){throw t.promiseToFetch=null,e})),e.abrupt("return",this.promiseToFetch);case 4:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"_ensureFetched",value:function(){return this.promiseToFetch||this._fetch()}},{key:"updateAttributes",value:(h=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("unsubscribed"!=this.subscribed){e.next=2;break}throw new Error("Can't modify unsubscribed object");case 2:return e.next=4,this.services.session.addCommand("editUserAttributes",{username:this.state.identity,attributes:(0,r.default)(t)});case 4:return e.abrupt("return",this);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"updateFriendlyName",value:(f=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("unsubscribed"!=this.subscribed){e.next=2;break}throw new Error("Can't modify unsubscribed object");case 2:return e.next=4,this.services.session.addCommand("editUserFriendlyName",{username:this.state.identity,friendlyName:t});case 4:return e.abrupt("return",this);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"unsubscribe",value:(n=(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.promiseToFetch){e.next=7;break}return e.next=3,this.promiseToFetch;case 3:this.entity.close(),this.promiseToFetch=null,this.subscribed="unsubscribed",this.emit("userUnsubscribed",this);case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"identity",get:function(){return this.state.identity},set:function(e){this.state.identity=e}},{key:"entityName",set:function(e){this.state.entityName=e}},{key:"attributes",get:function(){return this.state.attributes}},{key:"friendlyName",get:function(){return this.state.friendlyName}},{key:"online",get:function(){return this.state.online}},{key:"notifiable",get:function(){return this.state.notifiable}},{key:"isSubscribed",get:function(){return"subscribed"==this.subscribed}}]),t}(b.EventEmitter);m([C.asyncTypeCheck(["string","number","boolean","object",C.literal(null)]),y("design:type",Function),y("design:paramtypes",[Object]),y("design:returntype",s.default)],x.prototype,"updateAttributes",null),m([C.asyncTypeCheck(["string",C.literal(null)]),y("design:type",Function),y("design:paramtypes",[Object]),y("design:returntype",s.default)],x.prototype,"updateFriendlyName",null),t.User=x},uccp:function(e,t,n){n("5Qd4"),e.exports=n("VSTI").Object.assign},ugGH:function(e,t,n){e.exports=n("BRsN")},ukM9:function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},v2fs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UriBuilder=void 0,t.UriBuilder=function(){function e(t){_classCallCheck(this,e),this.base=t,this.args=new Array,this.paths=new Array}return _createClass(e,[{key:"pathSegment",value:function(e){return this.paths.push(encodeURIComponent(e)),this}},{key:"queryParam",value:function(e,t){return void 0!==t&&this.args.push(encodeURIComponent(e)+"="+encodeURIComponent(t)),this}},{key:"build",value:function(){var e=this.base;return this.paths.length&&(e+="/"+this.paths.join("/")),this.args.length&&(e+="?"+this.args.join("&")),e}}]),e}()},vDCP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TwilsockUpstreamError=void 0;var r=n("arZA");t.TwilsockUpstreamError=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))).status=e,i.description=n,i.body=r,i}return _inherits(t,e),t}(r.TwilsockError)},vFc6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegistrarConnector=t.Connector=void 0;var r=n("vSOj"),i=n("Q3x1"),o=n("3Lba");Object.defineProperty(t,"Connector",{enumerable:!0,get:function(){return o.Connector}});var s={min:2e3,max:12e4,randomness:.2};t.RegistrarConnector=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,i))).channelType=e,o.context=n,o.transport=r,o}var n,o,a;return _inherits(t,e),_createClass(t,[{key:"updateRegistration",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.has("notificationId"),!e.t0){e.next=4;break}return e.next=4,this.removeRegistration();case 4:if(!t.notificationId||!t.notificationId.length){e.next=10;break}return e.next=7,this.register(t);case 7:e.t1=t,e.next=11;break;case 10:e.t1=t;case 11:return e.abrupt("return",e.t1);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"removeRegistration",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.registrationId){e.next=2;break}return e.abrupt("return");case 2:return t="".concat(this.config.registrarUrl,"/").concat(this.registrationId,"?productId=").concat(this.context.productId),n={"Content-Type":"application/json","X-Twilio-Token":this.config.token},e.prev=3,i.log.trace("Removing registration for ",this.channelType),e.next=7,new r.Retrier(Object.assign(s,{maxAttemptsCount:3})).run((function(){return o.transport.delete(t,n)}));case 7:i.log.debug("Registration removed for",this.channelType),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(3),i.log.error("Failed to remove of registration ",this.channelType,e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(){return o.apply(this,arguments)})},{key:"register",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,o,a,u,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.log.trace("Registering",this.channelType,t),n={endpoint_platform:this.context.platform,channel_type:this.channelType,version:this.context.protocolVersion.toString(),message_types:Array.from(t.messageTypes),data:{registration_id:t.notificationId},ttl:"PT24H"},o="".concat(this.config.registrarUrl,"?productId=").concat(this.context.productId),a={"Content-Type":"application/json","X-Twilio-Token":t.token},i.log.trace("Creating registration for channel ",this.channelType),e.prev=4,e.next=7,new r.Retrier(s).run((function(){return l.transport.post(o,a,n)}));case 7:u=e.sent,this.registrationId=u.body.id,i.log.debug("Registration created: ",u),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(4),i.log.error("Registration failed: ",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(e){return n.apply(this,arguments)})}]),t}(o.Connector)},vNbC:function(e,t,n){n("du/1");var r=n("VSTI").Object;e.exports=function(e,t){return r.create(e,t)}},vOBO:function(e,t,n){var r,i,o,s=n("nAx8"),a=n("Temt"),u=n("kUGv"),l=n("BfU5"),c=n("7whZ"),d=c.process,f=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,g=c.Dispatch,v=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){y.call(e.data)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++v]=function(){a("function"==typeof e?e:Function(e),t)},r(v),v},h=function(e){delete m[e]},"process"==n("TYje")(d)?r=function(e){d.nextTick(s(y,e,1))}:g&&g.now?r=function(e){g.now(s(y,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=b,r=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(s(y,e,1),0)}),e.exports={set:f,clear:h}},vSOj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("kfVJ");t.Retrier=r.Retrier;var i=n("j3KZ");t.Backoff=i.Backoff,t.default=r.Retrier},va3J:function(e,t,n){"use strict";var r=n("7whZ"),i=n("VSTI"),o=n("GhSp"),s=n("C61u"),a=n("zBWt")("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];s&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},vywL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketChannel=void 0;var r=n("+qE3"),i=n("MZ0W");t.WebSocketChannel=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).url=e,r.WebSocket=global.WebSocket||global.MozWebSocket||n(5),r}return _inherits(t,e),_createClass(t,[{key:"connect",value:function(){var e=this;i.log.trace("connecting to socket");var t=new this.WebSocket(this.url);t.binaryType="arraybuffer",t.onopen=function(){i.log.debug("socket opened ".concat(e.url)),e.emit("connected")},t.onclose=function(t){i.log.debug("socket closed",t),e.emit("disconnected",t)},t.onerror=function(t){i.log.debug("error:",t),e.emit("socketError",t)},t.onmessage=function(t){e.emit("message",t.data)},this.socket=t}},{key:"send",value:function(e){this.socket.send(e)}},{key:"close",value:function(){if(i.log.trace("closing socket"),this.socket){this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null;try{this.socket.close()}finally{}}}},{key:"isConnected",get:function(){return this.socket&&1===this.socket.readyState}}]),t}(r.EventEmitter)},w7D8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Telemetry=t.Close=t.Reply=t.Message=t.Update=t.InitReply=t.Init=void 0;var r=n("5DEo");Object.defineProperty(t,"Init",{enumerable:!0,get:function(){return r.Init}});var i=n("NRBv");Object.defineProperty(t,"InitReply",{enumerable:!0,get:function(){return i.InitReply}});var o=n("x3nw");Object.defineProperty(t,"Update",{enumerable:!0,get:function(){return o.Update}});var s=n("axwj");Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return s.Message}});var a=n("nwU8");Object.defineProperty(t,"Reply",{enumerable:!0,get:function(){return a.Reply}});var u=n("srAY");Object.defineProperty(t,"Close",{enumerable:!0,get:function(){return u.Close}});var l=n("KnDq");Object.defineProperty(t,"Telemetry",{enumerable:!0,get:function(){return l.Telemetry}})},wYM1:function(e,t,n){var r=n("USwo");r(r.S+r.F*!n("C61u"),"Object",{defineProperty:n("GhSp").f})},wlNh:function(e,t,n){var r=n("nAx8"),i=n("xMGN"),o=n("bS86"),s=n("d+lc"),a=n("0WpP"),u=n("I90/"),l={},c={};(t=e.exports=function(e,t,n,d,f){var h,p,g,v,m=f?function(){return e}:u(e),y=r(n,d,t?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(o(m)){for(h=a(e.length);h>b;b++)if((v=t?y(s(p=e[b])[0],p[1]):y(e[b]))===l||v===c)return v}else for(g=m.call(e);!(p=g.next()).done;)if((v=i(g,y,p.value,t))===l||v===c)return v}).BREAK=l,t.RETURN=c},wqPz:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},wv9B:function(e,t,n){"use strict";var r=v(n("4d7F")),i=v(n("gDS+")),o=v(n("14Xm")),s=v(n("D3Ub")),a=v(n("Yz+Y")),u=v(n("iCc5")),l=v(n("V7oC")),c=v(n("FYw3")),d=v(n("mRg0")),f=v(n("u8T8")),h=v(n("SEkw")),p=v(n("EJiy")),g=v(n("JO7F"));function v(e){return e&&e.__esModule?e:{default:e}}var m=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=(0,g.default)(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":(0,p.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&(0,h.default)(t,n,s),s},y=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":(0,p.default)(Reflect))&&"function"==typeof f.default)return(0,f.default)(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var b=n("+qE3"),k=n("iqZd"),_=n("yC9A"),C=n("WjQu"),w=n("C9Jq"),x=_.Logger.scope("Message"),O=function(e){function t(e,n,r,i){(0,u.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return o.channel=e,o.services=n,o.state={sid:i.sid,index:r,author:null==i.author?null:i.author,body:i.text,timestamp:i.timestamp?new Date(i.timestamp):null,dateUpdated:i.dateUpdated?new Date(i.dateUpdated):null,lastUpdatedBy:i.lastUpdatedBy?i.lastUpdatedBy:null,attributes:k.parseAttributes(i.attributes,"Got malformed attributes for the message "+i.sid,x),type:i.type?i.type:"text",media:i.type&&"media"===i.type&&i.media?new C.Media(i.media,o.services):null,memberSid:null==i.memberSid?null:i.memberSid},o}var n,r,f,h;return(0,d.default)(t,e),(0,l.default)(t,[{key:"_update",value:function(e){var t=[];!e.text&&"string"!=typeof e.text||e.text===this.state.body||(this.state.body=e.text,t.push("body")),e.lastUpdatedBy&&e.lastUpdatedBy!==this.state.lastUpdatedBy&&(this.state.lastUpdatedBy=e.lastUpdatedBy,t.push("lastUpdatedBy")),e.author&&e.author!==this.state.author&&(this.state.author=e.author,t.push("author")),e.dateUpdated&&new Date(e.dateUpdated).getTime()!==(this.state.dateUpdated&&this.state.dateUpdated.getTime())&&(this.state.dateUpdated=new Date(e.dateUpdated),t.push("dateUpdated")),e.timestamp&&new Date(e.timestamp).getTime()!==(this.state.timestamp&&this.state.timestamp.getTime())&&(this.state.timestamp=new Date(e.timestamp),t.push("dateCreated"));var n=k.parseAttributes(e.attributes,"Got malformed attributes for the message "+this.sid,x);k.isDeepEqual(this.state.attributes,n)||(this.state.attributes=n,t.push("attributes")),t.length>0&&this.emit("updated",{message:this,updateReasons:t})}},{key:"getMember",value:(h=(0,s.default)(o.default.mark((function e(){var t,n,r=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,!this.state.memberSid){e.next=5;break}return e.next=4,this.channel.getMemberBySid(this.memberSid).catch((function(){return x.debug('Member with sid "'+r.memberSid+'" not found for message '+r.sid),null}));case 4:t=e.sent;case 5:if(t||!this.state.author){e.next=9;break}return e.next=8,this.channel.getMemberByIdentity(this.state.author).catch((function(){return x.debug('Member with identity "'+r.author+'" not found for message '+r.sid),null}));case 8:t=e.sent;case 9:if(!t){e.next=11;break}return e.abrupt("return",t);case 11:throw n="Member with ",this.state.memberSid&&(n+="SID '"+this.state.memberSid+"' "),this.state.author&&(this.state.memberSid&&(n+="or "),n+="identity '"+this.state.author+"' "),"Member with "===n&&(n="Member "),n+="was not found",new Error(n);case 17:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"remove",value:(f=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("deleteMessage",{channelSid:this.channel.sid,messageIdx:this.index.toString()});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"updateBody",value:(r=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("editMessage",{channelSid:this.channel.sid,messageIdx:this.index.toString(),text:t});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"updateAttributes",value:(n=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.session.addCommand("editMessageAttributes",{channelSid:this.channel.sid,messageIdx:this.index,attributes:(0,i.default)(t)});case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"sid",get:function(){return this.state.sid}},{key:"author",get:function(){return this.state.author}},{key:"body",get:function(){return"media"===this.type?null:this.state.body}},{key:"dateUpdated",get:function(){return this.state.dateUpdated}},{key:"index",get:function(){return this.state.index}},{key:"lastUpdatedBy",get:function(){return this.state.lastUpdatedBy}},{key:"dateCreated",get:function(){return this.state.timestamp}},{key:"attributes",get:function(){return this.state.attributes}},{key:"type",get:function(){return this.state.type}},{key:"media",get:function(){return this.state.media}},{key:"memberSid",get:function(){return this.state.memberSid}}]),t}(b.EventEmitter);m([w.asyncTypeCheck("string"),y("design:type",Function),y("design:paramtypes",[String]),y("design:returntype",r.default)],O.prototype,"updateBody",null),m([w.asyncTypeCheck(["string","number","boolean","object",w.literal(null)]),y("design:type",Function),y("design:paramtypes",[Object]),y("design:returntype",r.default)],O.prototype,"updateAttributes",null),t.Message=O},x3nw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Update=void 0;var r=n("NDb0");t.Update=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).method="update",n.token=e,n}return _inherits(t,e),t}(r.AbstractMessage)},xDTo:function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i;for(n=1;n<arguments.length;n++)for(i in r=arguments[n])r.hasOwnProperty(i)&&(e[i]=r[i]);return e}},function(e,t,n){"use strict";var r=n(0);e.exports={build:function(e,t){var n,i,o,s=t.plugins;for(n=0,i=s.length;n<i;n++)(o=s[n]).methods&&r(e,o.methods),o.properties&&Object.defineProperties(e,o.properties)},hook:function(e,t,n){var r,i,o,s=e.config.plugins,a=[e.context];for(n&&(a=a.concat(n)),r=0,i=s.length;r<i;r++)(o=s[r][t])&&o.apply(s[r],a)}}},function(e,t,n){"use strict";function r(e){if(0===e.length)return e;var t,n,r=e.split(/[_-]/);if(1===r.length&&r[0][0].toLowerCase()===r[0][0])return e;for(n=r[0].toLowerCase(),t=1;t<r.length;t++)n=n+r[t].charAt(0).toUpperCase()+r[t].substring(1).toLowerCase();return n}r.prepended=function(e,t){return e+(t=r(t))[0].toUpperCase()+t.substring(1)},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(2);function o(e,t){this.options=e=e||{},this.defaults=t.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(e.init),this.data=this.configureData(e.data),this.methods=this.configureMethods(e.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(e.transitions||[]),this.plugins=this.configurePlugins(e.plugins,t.plugin)}r(o.prototype,{addState:function(e){this.map[e]||(this.states.push(e),this.addStateLifecycleNames(e),this.map[e]={})},addStateLifecycleNames:function(e){this.lifecycle.onEnter[e]=i.prepended("onEnter",e),this.lifecycle.onLeave[e]=i.prepended("onLeave",e),this.lifecycle.on[e]=i.prepended("on",e)},addTransition:function(e){this.transitions.indexOf(e)<0&&(this.transitions.push(e),this.addTransitionLifecycleNames(e))},addTransitionLifecycleNames:function(e){this.lifecycle.onBefore[e]=i.prepended("onBefore",e),this.lifecycle.onAfter[e]=i.prepended("onAfter",e),this.lifecycle.on[e]=i.prepended("on",e)},mapTransition:function(e){var t=e.name,n=e.from,r=e.to;return this.addState(n),"function"!=typeof r&&this.addState(r),this.addTransition(t),this.map[n][t]=e,e},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(e){return"string"==typeof e?this.mapTransition(r({},this.defaults.init,{to:e,active:!0})):"object"==typeof e?this.mapTransition(r({},this.defaults.init,e,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(e){return"function"==typeof e?e:"object"==typeof e?function(){return e}:function(){return{}}},configureMethods:function(e){return e||{}},configurePlugins:function(e,t){var n,r,i;for(n=0,r=(e=e||[]).length;n<r;n++)"function"==typeof(i=e[n])&&(e[n]=i=i()),i.configure&&i.configure(this);return e},configureTransitions:function(e){var t,n,r,i,o,s=this.defaults.wildcard;for(n=0;n<e.length;n++)for(r=e[n],i=Array.isArray(r.from)?r.from:[r.from||s],o=r.to||s,t=0;t<i.length;t++)this.mapTransition({name:r.name,from:i[t],to:o})},transitionFor:function(e,t){return this.map[e][t]||this.map[this.defaults.wildcard][t]},transitionsFor:function(e){var t=this.defaults.wildcard;return Object.keys(this.map[e]).concat(Object.keys(this.map[t]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),e.exports=o},function(e,t,n){var r=n(0),i=n(6),o=n(1),s=[null,[]];function a(e,t){this.context=e,this.config=t,this.state=t.init.from,this.observers=[e]}r(a.prototype,{init:function(e){if(r(this.context,this.config.data.apply(this.context,e)),o.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(e){return Array.isArray(e)?e.indexOf(this.state)>=0:this.state===e},isPending:function(){return this.pending},can:function(e){return!this.isPending()&&!!this.seek(e)},cannot:function(e){return!this.can(e)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(e,t){var n=this.config.defaults.wildcard,r=this.config.transitionFor(this.state,e),i=r&&r.to;return"function"==typeof i?i.apply(this.context,t):i===n?this.state:i},fire:function(e,t){return this.transit(e,this.state,this.seek(e,t),t)},transit:function(e,t,n,r){var i=this.config.lifecycle,o=this.config.options.observeUnchangedState||t!==n;return n?this.isPending()?this.context.onPendingTransition(e,t,n):(this.config.addState(n),this.beginTransit(),r.unshift({transition:e,from:t,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(i.onBefore.transition),this.observersForEvent(i.onBefore[e]),o?this.observersForEvent(i.onLeave.state):s,o?this.observersForEvent(i.onLeave[t]):s,this.observersForEvent(i.on.transition),o?["doTransit",[this]]:s,o?this.observersForEvent(i.onEnter.state):s,o?this.observersForEvent(i.onEnter[n]):s,o?this.observersForEvent(i.on[n]):s,this.observersForEvent(i.onAfter.transition),this.observersForEvent(i.onAfter[e]),this.observersForEvent(i.on[e])],r)):this.context.onInvalidTransition(e,t,n)},beginTransit:function(){this.pending=!0},endTransit:function(e){return this.pending=!1,e},failTransit:function(e){throw this.pending=!1,e},doTransit:function(e){this.state=e.to},observe:function(e){if(2===e.length){var t={};t[e[0]]=e[1],this.observers.push(t)}else this.observers.push(e[0])},observersForEvent:function(e){for(var t,n=0,r=this.observers.length,i=[];n<r;n++)(t=this.observers[n])[e]&&i.push(t);return[e,i,!0]},observeEvents:function(e,t,n,r){if(0===e.length)return this.endTransit(void 0===r||r);var i=e[0][0],s=e[0][1],a=e[0][2];if(t[0].event=i,i&&a&&i!==n&&o.hook(this,"lifecycle",t),0===s.length)return e.shift(),this.observeEvents(e,t,i,r);var u=s.shift(),l=u[i].apply(u,t);return l&&"function"==typeof l.then?l.then(this.observeEvents.bind(this,e,t,i)).catch(this.failTransit.bind(this)):!1===l?this.endTransit(!1):this.observeEvents(e,t,i,l)},onInvalidTransition:function(e,t,n){throw new i("transition is invalid in current state",e,t,n,this.state)},onPendingTransition:function(e,t,n){throw new i("transition is invalid while previous transition is still in progress",e,t,n,this.state)}}),e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(3),a=n(4),u={is:function(e){return this._fsm.is(e)},can:function(e){return this._fsm.can(e)},cannot:function(e){return this._fsm.cannot(e)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(e,t,n){return this._fsm.onInvalidTransition(e,t,n)},onPendingTransition:function(e,t,n){return this._fsm.onPendingTransition(e,t,n)}},l={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(e){throw Error("use transitions to change state")}}};function c(e){return d(this||{},e)}function d(e,t){return f(e,new s(t,c)),e._fsm(),e}function f(e,t){if("object"!=typeof e||Array.isArray(e))throw Error("StateMachine can only be applied to objects");o.build(e,t),Object.defineProperties(e,l),r(e,u),r(e,t.methods),t.allTransitions().forEach((function(t){e[i(t)]=function(){return this._fsm.fire(t,[].slice.call(arguments))}})),e._fsm=function(){this._fsm=new a(this,t),this._fsm.init(arguments)}}c.version="3.0.1",c.factory=function(){var e,t;"function"==typeof arguments[0]?(e=arguments[0],t=arguments[1]||{}):(e=function(){this._fsm.apply(this,arguments)},t=arguments[0]||{});var n=new s(t,c);return f(e.prototype,n),e.prototype._fsm.config=n,e},c.apply=d,c.defaults={wildcard:"*",init:{name:"init",from:"none"}},e.exports=c},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){this.message=e,this.transition=t,this.from=n,this.to=r,this.current=i}}])},e.exports=r()},xDdU:function(e,t,n){var r,i,o=n("4fRq"),s=n("I2ZF"),a=0,u=0;e.exports=function(e,t,n){var l=t&&n||0,c=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var h=o();null==d&&(d=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=i=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:u+1,v=p-a+(g-u)/1e4;if(v<0&&void 0===e.clockseq&&(f=f+1&16383),(v<0||p>a)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,u=g,i=f;var m=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;c[l++]=m>>>24&255,c[l++]=m>>>16&255,c[l++]=m>>>8&255,c[l++]=255&m;var y=p/4294967296*1e4&268435455;c[l++]=y>>>8&255,c[l++]=255&y,c[l++]=y>>>24&15|16,c[l++]=y>>>16&255,c[l++]=f>>>8|128,c[l++]=255&f;for(var b=0;b<6;++b)c[l+b]=d[b];return t||s(c)}},xKiQ:function(e,t,n){var r=n("RpkJ"),i=n("d+lc"),o=n("FgkJ"),s=r.key,a=r.set;r.exp({metadata:function(e,t){return function(n,r){a(e,t,(void 0!==r?i:o)(n),s(r))}}})},xMGN:function(e,t,n){var r=n("d+lc");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){var o=e.return;throw void 0!==o&&r(o.call(e)),s}}},xXl2:function(e,t,n){"use strict";var r,i,o,s,a=n("5ETA"),u=n("7whZ"),l=n("nAx8"),c=n("aqg2"),d=n("USwo"),f=n("ekG2"),h=n("FgkJ"),p=n("ukM9"),g=n("wlNh"),v=n("2zfi"),m=n("vOBO").set,y=n("jssz")(),b=n("8sL3"),k=n("wqPz"),_=n("jlxs"),C=n("JKKi"),w=u.TypeError,x=u.process,O=x&&x.versions,S=O&&O.v8||"",P=u.Promise,M="process"==c(x),T=function(){},R=i=b.f,E=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[n("zBWt")("species")]=function(e){e(T,T)};return(M||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof t&&0!==S.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(r){}}(),I=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){for(var r=e._v,i=1==e._s,o=0,s=function(t){var n,o,s,a=i?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{a?(i||(2==e._h&&U(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&(c.exit(),s=!0)),n===t.promise?l(w("Promise-chain cycle")):(o=I(n))?o.call(n,u,l):u(n)):l(r)}catch(d){c&&!s&&c.exit(),l(d)}};n.length>o;)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&N(e)}))}},N=function(e){m.call(u,(function(){var t,n,r,i=e._v,o=A(e);if(o&&(t=k((function(){M?x.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=M||A(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},A=function(e){return 1!==e._h&&0===(e._a||e._c).length},U=function(e){m.call(u,(function(){var t;M?x.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},D=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},L=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw w("Promise can't be resolved itself");(n=I(t))?y((function(){var i={_w:r,_d:!1};try{n.call(t,l(e,i,1),l(D,i,1))}catch(o){D.call(i,o)}})):(r._v=t,r._s=1,j(r,!1))}catch(i){D.call({_w:r,_d:!1},i)}}};E||(P=function(e){p(this,P,"Promise","_h"),h(e),r.call(this);try{e(l(L,this,1),l(D,this,1))}catch(t){D.call(this,t)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n("iZ5/")(P.prototype,{then:function(e,t){var n=R(v(this,P));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=M?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(L,e,1),this.reject=l(D,e,1)},b.f=R=function(e){return e===P||e===s?new o(e):i(e)}),d(d.G+d.W+d.F*!E,{Promise:P}),n("kvAF")(P,"Promise"),n("va3J")("Promise"),s=n("VSTI").Promise,d(d.S+d.F*!E,"Promise",{reject:function(e){var t=R(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(a||!E),"Promise",{resolve:function(e){return C(a&&this===s?P:this,e)}}),d(d.S+d.F*!(E&&n("h3Hq")((function(e){P.all(e).catch(T)}))),"Promise",{all:function(e){var t=this,n=R(t),r=n.resolve,i=n.reject,o=k((function(){var n=[],o=0,s=1;g(e,!1,(function(e){var a=o++,u=!1;n.push(void 0),s++,t.resolve(e).then((function(e){u||(u=!0,n[a]=e,--s||r(n))}),i)})),--s||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=R(t),r=n.reject,i=k((function(){g(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},xfML:function(e,t,n){var r=n("USwo");r(r.S,"Object",{setPrototypeOf:n("DrT7").set})},xk4V:function(e,t,n){var r=n("4fRq"),i=n("I2ZF");e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},"y/1M":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventSendingLimitation=t.TelemetryPoint=t.TelemetryEventDescription=t.TelemetryTracker=void 0;var r,i,o=n("grBd"),s=n("MZ0W"),a=function(){function e(t,n,r,i,o,s){_classCallCheck(this,e),this.title=t,this.details=n,this.start=r,this.type=o,this.id=s,this.end=i}return _createClass(e,[{key:"toTelemetryEvent",value:function(){var e=new Date,t=this.start,n=this.end?this.end:e;if(n<t){var r=n;n=t,t=r}var i=t.getTime()-e.getTime(),s=n.getTime()-e.getTime();return new o.TelemetryEvent(i,s,this.title,this.details,this.id,this.type)}}]),e}();t.TelemetryEventDescription=a,function(e){e[e.Start=0]="Start",e[e.End=1]="End"}(r||(r={})),t.TelemetryPoint=r,function(e){e[e.MinEventsPortion=0]="MinEventsPortion",e[e.AnyEvents=1]="AnyEvents",e[e.AnyEventsIncludingUnfinished=2]="AnyEventsIncludingUnfinished"}(i||(i={})),t.EventSendingLimitation=i,t.TelemetryTracker=function(){function e(t,n){_classCallCheck(this,e),this.minEventsPortionToSend=50,this.maxEventsPortionToSend=100,this.pendingEvents=new Map,this.readyEvents=[],this.hasInitializationFinished=!1,this._canSendTelemetry=!1,this.config=t,this.packetInterface=n}return _createClass(e,[{key:"addTelemetryEvent",value:function(e){!this.canSendTelemetry&&this.hasInitializationFinished||this.readyEvents.push(e)}},{key:"addPartialEvent",value:function(e,t,n){s.log.debug("Adding ".concat(n===r.Start?"starting":"ending"," timepoint for '").concat(t,"' event"));var i=this.pendingEvents.has(t);if(n===r.Start)i&&s.log.debug("Overwriting starting point for '".concat(t,"' event")),this.pendingEvents.set(t,e);else{if(!i)return void s.log.error("Could not find started event for '".concat(t,"' event"));this.addTelemetryEvent(this.merge(this.pendingEvents.get(t),e)),this.pendingEvents.delete(t)}}},{key:"getTelemetryToSend",value:function(e){return this.canSendTelemetry&&0!=this.readyEvents.length?e==i.MinEventsPortion&&this.readyEvents.length<this.minEventsPortionToSend?[]:this.getTelemetryPortion(e==i.AnyEventsIncludingUnfinished):[]}},{key:"getTelemetryPortion",value:function(e){var t=this,n=Math.min(this.readyEvents.length,this.maxEventsPortionToSend),r=this.readyEvents.splice(0,n);return e&&r.length<this.maxEventsPortionToSend&&this.pendingEvents.forEach((function(e,n){if(!(r.length>=t.maxEventsPortionToSend)){var i=t.pendingEvents.get(n);t.pendingEvents.delete(n),r.push(new a("[UNFINISHED] ".concat(i.title),i.details,i.start,null,i.type,i.id))}})),r}},{key:"merge",value:function(e,t){return new a(t.title?t.title:e.title,t.details?t.details:e.details,e.start,t.end,t.type?t.type:e.type,t.id?t.id:e.id)}},{key:"sendTelemetryIfMinimalPortionCollected",value:function(){this.sendTelemetry(i.MinEventsPortion)}},{key:"sendTelemetry",value:function(e){var t=this.getTelemetryToSend(e);if(0!==t.length)try{this.packetInterface.send(new o.Telemetry(t.map((function(e){return e.toTelemetryEvent()}))))}catch(n){s.log.debug("Error while sending ".concat(t.length," telemetry events due to ").concat(n,"; they will be resubmitted")),this.readyEvents=this.readyEvents.concat(t)}}},{key:"isTelemetryEnabled",get:function(){return this.config.confirmedCapabilities.has("telemetry.v1")}},{key:"canSendTelemetry",get:function(){return this._canSendTelemetry&&this.isTelemetryEnabled},set:function(e){s.log.debug("TelemetryTracker.canSendTelemetry: ".concat(e," TelemetryTracker.isTelemetryEnabled: ").concat(this.isTelemetryEnabled)),this._canSendTelemetry&&!e&&(this.pendingEvents.clear(),this.readyEvents=[]),this._canSendTelemetry=e,e&&this.sendTelemetry(i.AnyEvents),e&&!this.hasInitializationFinished&&(this.hasInitializationFinished=!0)}}]),e}()},yC9A:function(e,t,n){"use strict";var r=s(n("iCc5")),i=s(n("V7oC")),o=s(n("rfXi"));function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return[(new Date).toISOString()+" Chat "+e+":"].concat((0,o.default)(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var u=n("XH0y").getLogger("twilio-chat"),l=function(){function e(t){(0,r.default)(this,e),this.prefix="",this.prefix=null!=t&&t.length>0?t+" ":""}return(0,i.default)(e,[{key:"setLevel",value:function(e){u.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.trace.apply(null,a(this.prefix+"T",t))}},{key:"debug",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.debug.apply(null,a(this.prefix+"D",t))}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.info.apply(null,a(this.prefix+"I",t))}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.warn.apply(null,a(this.prefix+"W",t))}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.error.apply(null,a(this.prefix+"E",t))}}],[{key:"scope",value:function(t){return new e(t)}},{key:"setLevel",value:function(e){u.setLevel(e)}},{key:"trace",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.trace.apply(null,a("T",t))}},{key:"debug",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.debug.apply(null,a("D",t))}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.info.apply(null,a("I",t))}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.warn.apply(null,a("W",t))}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.error.apply(null,a("E",t))}}]),e}();t.Logger=l},yQFZ:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},ygN2:function(e,t,n){"use strict";var r=p(n("4d7F")),i=p(n("14Xm")),o=p(n("gDS+")),s=p(n("D3Ub")),a=p(n("jWXv")),u=p(n("ODRq")),l=p(n("Yz+Y")),c=p(n("iCc5")),d=p(n("V7oC")),f=p(n("FYw3")),h=p(n("mRg0"));function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Channels=t.Channel=void 0;var g=n("+qE3"),v=n("yC9A"),m=n("37Ge");Object.defineProperty(t,"Channel",{enumerable:!0,get:function(){return m.Channel}});var y=n("qc9/"),b=n("iqZd"),k=v.Logger.scope("Channels"),_=function(e){function t(e){(0,c.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return n.services=e,n.channels=new u.default,n.thumbstones=new a.default,n.syncListFetched=!1,n.syncListRead=new y.Deferred,n}var n;return(0,h.default)(t,e),(0,d.default)(t,[{key:"getMap",value:function(){var e=this;return this.services.session.getMyChannelsId().then((function(t){return e.services.syncClient.map({id:t,mode:"open_existing"})}))}},{key:"addChannel",value:(n=(0,s.default)(i.default.mark((function e(t){var n,r,s,a,u,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0===t.attributes?{}:t.attributes,e.next=4,this.services.session.addCommand("createChannel",{friendlyName:t.friendlyName,uniqueName:t.uniqueName,type:t.isPrivate?"private":"public",attributes:(0,o.default)(n)});case 4:if(a="channel"in(r=e.sent)?r.channel:null,!(u=this.channels.get(s="channelSid"in r?r.channelSid:null))){e.next=12;break}return e.next=11,u._subscribe();case 11:return e.abrupt("return",u);case 12:return l=new m.Channel(this.services,{channel:a,entityName:null,uniqueName:null,attributes:null,createdBy:null,friendlyName:null,lastConsumedMessageIndex:null,type:t.isPrivate?"private":"public",dateCreated:null,dateUpdated:null},s),this.channels.set(l.sid,l),this.registerForEvents(l),e.next=17,l._subscribe();case 17:return this.emit("channelAdded",l),e.abrupt("return",l);case 19:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"fetchChannels",value:function(){var e,t=this;this.getMap().then((e=(0,s.default)(i.default.mark((function e(n){var o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.on("itemAdded",(function(e){k.debug("itemAdded: "+e.item.key),t.upsertChannel("sync",e.item.key,e.item.value)})),n.on("itemRemoved",(function(e){k.debug("itemRemoved: "+e.key);var n=e.key;t.syncListFetched||t.thumbstones.add(n);var r=t.channels.get(n);r&&("joined"!==r.status&&"invited"!==r.status||(r._setStatus("notParticipating","sync"),t.emit("channelLeft",r)),r.isPrivate&&(t.channels.delete(n),t.emit("channelRemoved",r),r.emit("removed",r)))})),n.on("itemUpdated",(function(e){k.debug("itemUpdated: "+e.item.key),t.upsertChannel("sync",e.item.key,e.item.value)})),o=[],e.next=6,t.services.syncList.getPage();case 6:(s=e.sent).items.forEach((function(e){o.push(t.upsertChannel("synclist",e.channel_sid,e))}));case 9:if(!s.hasNextPage){e.next=16;break}return e.next=12,s.nextPage();case 12:(s=e.sent).items.forEach((function(e){o.push(t.upsertChannel("synclist",e.channel_sid,e))})),e.next=9;break;case 16:return t.syncListRead.set(!0),e.abrupt("return",r.default.all(o));case 18:case"end":return e.stop()}}),e,t)}))),function(t){return e.apply(this,arguments)})).then((function(){t.syncListFetched=!0,t.thumbstones.clear(),k.debug("Channels list fetched")})).then((function(){return t})).catch((function(e){throw"disconnected"!=t.services.syncClient.connectionState&&k.error("Failed to get channels list",e),k.debug("ERROR: Failed to get channels list",e),e}))}},{key:"_wrapPaginator",value:function(e,t){var n=this;return t(e.items).then((function(r){return{items:r,hasNextPage:e.hasNextPage,hasPrevPage:e.hasPrevPage,nextPage:function(){return e.nextPage().then((function(e){return n._wrapPaginator(e,t)}))},prevPage:function(){return e.prevPage().then((function(e){return n._wrapPaginator(e,t)}))}}}))}},{key:"getChannels",value:function(e){var t=this;return this.getMap().then((function(t){return t.getItems(e)})).then((function(e){return t._wrapPaginator(e,(function(e){return r.default.all(e.map((function(e){return t.upsertChannel("sync",e.key,e.value)})))}))}))}},{key:"getChannel",value:function(e){var t=this;return this.getMap().then((function(t){return t.getItems({key:e})})).then((function(e){return e.items.map((function(e){return t.upsertChannel("sync",e.key,e.value)}))})).then((function(e){return e.length>0?e[0]:null}))}},{key:"pushChannel",value:function(e){var t=e.sid;return this.upsertChannel("chat",t,{entityName:null,lastConsumedMessageIndex:e.lastConsumedMessageIndex,type:e.type,status:e.status,friendlyName:e.friendlyName,dateUpdated:e.dateUpdated,dateCreated:e.dateCreated,uniqueName:e.uniqueName,createdBy:e.createdBy,attributes:e.attributes,channel:e.channel,notificationLevel:e.notificationLevel,sid:t})}},{key:"upsertChannel",value:function(e,t,n){var r=this;k.trace("upsertChannel(sid="+t+", data=",n);var i=this.channels.get(t);if(i){if(k.trace("upsertChannel: channel "+t+" is known and it's status is known from source "+i._statusSource()+" and update came from source "+e,i),void 0===i._statusSource()||e===i._statusSource()||"synclist"===e&&"sync"!==i._statusSource()||"sync"===e)if("joined"===n.status&&"joined"!==i.status){i._setStatus("joined",e);var o={};void 0!==n.notificationLevel&&(o.notificationLevel=n.notificationLevel),void 0!==n.lastConsumedMessageIndex&&(o.lastConsumedMessageIndex=n.lastConsumedMessageIndex),b.isDeepEqual(o,{})||i._update(o),i._subscribe().then((function(){r.emit("channelJoined",i)}))}else if("invited"===n.status&&"invited"!==i.status){i._setStatus("invited",e);var s={};void 0!==n.notificationLevel&&(s.notificationLevel=n.notificationLevel),void 0!==n.lastConsumedMessageIndex&&(s.lastConsumedMessageIndex=n.lastConsumedMessageIndex),b.isDeepEqual(s,{})||i._update(s),i._subscribe().then((function(){r.emit("channelInvited",i)}))}else"notParticipating"!==n.status||"invited"!==i.status&&"joined"!==i.status?"notParticipating"===n.status&&"private"===n.type?i._subscribe():i._update(n):(i._setStatus("notParticipating",e),i._update(n),i._subscribe().then((function(){r.emit("channelLeft",i)})));else k.trace("upsertChannel: channel is known from sync and came from chat, ignoring",{sid:t,data:n.status,channel:i.status});return i._subscribe().then((function(){return i}))}if("chat"!==e&&"synclist"!==e||!this.thumbstones.has(t))return k.trace("upsertChannel: creating local channel object with sid "+t,n),i=new m.Channel(this.services,n,t),this.channels.set(t,i),i._subscribe().then((function(){return r.registerForEvents(i),r.emit("channelAdded",i),"joined"===n.status?(i._setStatus("joined",e),r.emit("channelJoined",i)):"invited"===n.status&&(i._setStatus("invited",e),r.emit("channelInvited",i)),i}));k.trace("upsertChannel: channel is deleted and came again from chat, ignoring",t)}},{key:"onChannelRemoved",value:function(e){var t=this.channels.get(e);t&&(this.channels.delete(e),this.emit("channelRemoved",t))}},{key:"registerForEvents",value:function(e){var t=this;e.on("removed",(function(){return t.onChannelRemoved(e.sid)})),e.on("updated",(function(e){return t.emit("channelUpdated",e)})),e.on("memberJoined",this.emit.bind(this,"memberJoined")),e.on("memberLeft",this.emit.bind(this,"memberLeft")),e.on("memberUpdated",(function(e){return t.emit("memberUpdated",e)})),e.on("messageAdded",this.emit.bind(this,"messageAdded")),e.on("messageUpdated",(function(e){return t.emit("messageUpdated",e)})),e.on("messageRemoved",this.emit.bind(this,"messageRemoved")),e.on("typingStarted",this.emit.bind(this,"typingStarted")),e.on("typingEnded",this.emit.bind(this,"typingEnded"))}}]),t}(g.EventEmitter);t.Channels=_},zBWt:function(e,t,n){var r=n("s2er")("wks"),i=n("ixoo"),o=n("7whZ").Symbol,s="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=r},znrX:function(e,t,n){var r=n("nA4W"),i=n("CYMq"),o=n("WpRT")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},zs2D:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncClient=t.Client=void 0;var r=n("+qE3"),i=n("kUwj"),o=n("/LtL"),s=n("v2fs"),a=n("PyJ+"),u=n("IMmU"),l=n("PalJ"),c=n("6r7x"),d=n("r+Qc"),f=n("QQLf"),h=n("+RHZ"),p=n("oUms"),g=n("H86R"),v=n("KgOX"),m=n("SzqN"),y=n("PWsN"),b=n("L+wn"),k=n("kyWA"),_=n("ASGO"),C=n("ASGO"),w=n("hRWM").version;function x(e){if(e){if("string"==typeof e)return{id:e,mode:"open_or_create"};u.validateOptionalTtl(e.ttl),u.validateId(e.id);var t=e.mode||(e.id?"open_or_create":"create_new");return Object.assign(Object.assign({},e),{mode:t})}return{mode:"create_new"}}var O=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,t),n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)),!e)throw new Error("Sync library needs a valid Twilio token to be passed");r.hasOwnProperty("logLevel")?l.default.setLevel(r.logLevel):l.default.setLevel("silent");var s=r.productId=r.productId||"data_sync";r.clientMetadata=r.clientMetadata||{},r.clientMetadata.hasOwnProperty("type")||(r.clientMetadata.type="sync"),r.clientMetadata.hasOwnProperty("sdk")||(r.clientMetadata.sdk="JS",r.clientMetadata.sdkv=w);var a=r.twilsockClient=r.twilsockClient||new i.Twilsock(e,s,r);a.on("tokenAboutToExpire",(function(e){return n.emit("tokenAboutToExpire",e)})),a.on("tokenExpired",(function(){return n.emit("tokenExpired")})),a.on("connectionError",(function(e){return n.emit("connectionError",e)}));var u=r.notificationsClient=r.notificationsClient||new o.Notifications(e,r),p=new c.Configuration(r),g=new h.NetworkService(new m.ClientInfo(w),p,a),v=new b.SessionStorage(p);n.localStorageId=null,a.connect(),n.services={config:p,twilsock:a,notifications:u,network:g,storage:v,router:null,subscriptions:null};var k=new d.Subscriptions(n.services),_=new f.Router({config:p,subscriptions:k,notifications:u});return n.services.router=_,n.services.subscriptions=k,n.entities=new y.EntitiesCache,u.on("connectionStateChanged",(function(){n.emit("connectionStateChanged",n.services.notifications.connectionState)})),_possibleConstructorReturn(n)}var n,r,O,S,P,M,T,R,E,I,j,N,A,U,D;return _inherits(t,e),_createClass(t,[{key:"ensureReady",value:(D=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.services.config.sessionStorageEnabled){e.next=11;break}return e.prev=1,e.next=4,this.services.twilsock.storageId();case 4:t=e.sent,this.services.storage.updateStorageId(t.id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l.default.warn("Failed to initialize storage",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return D.apply(this,arguments)})},{key:"storeRootInSessionCache",value:function(e,t,n){if(this.services.config.sessionStorageEnabled&&t){var r=u.deepClone(n);e!==g.SyncList.type&&e!==v.SyncMap.type||(r.last_event_id=null,delete r.items),this.services.storage.store(e,t,r)}}},{key:"readRootFromSessionCache",value:function(e,t){return this.services.config.sessionStorageEnabled&&t?this.services.storage.read(e,t):null}},{key:"_get",value:(U=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,i,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>2&&void 0!==o[2]&&o[2],n){e.next=3;break}throw new a.SyncError("Cannot get entity without id",404);case 3:return i=new s.UriBuilder(t).pathSegment(n).queryParam("Include",r?"items":void 0).build(),e.next=6,this.services.network.get(i);case 6:return e.abrupt("return",e.sent.body);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return U.apply(this,arguments)})},{key:"_createDocument",value:function(e,t,n){var r={unique_name:e,data:t||{}};return void 0!==n&&(r.ttl=n),this.services.network.post(this.services.config.documentsUri,r).then((function(e){return e.body.data=r.data,e.body}))}},{key:"_getDocument",value:(A=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readRootFromSessionCache(p.SyncDocument.type,t)||this._get(this.services.config.documentsUri,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)})},{key:"_createList",value:function(e,t,n,r){var i={unique_name:e,purpose:t,context:n};return void 0!==r&&(i.ttl=r),this.services.network.post(this.services.config.listsUri,i).then((function(e){return e.body}))}},{key:"_getList",value:(N=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readRootFromSessionCache(g.SyncList.type,t)||this._get(this.services.config.listsUri,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"_createMap",value:function(e,t){var n={unique_name:e};return void 0!==t&&(n.ttl=t),this.services.network.post(this.services.config.mapsUri,n).then((function(e){return e.body}))}},{key:"_getMap",value:(j=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],e.abrupt("return",this.readRootFromSessionCache(v.SyncMap.type,t)||this._get(this.services.config.mapsUri,t,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)})},{key:"_getStream",value:(I=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readRootFromSessionCache(k.SyncStream.type,t)||this._get(this.services.config.streamsUri,t,!1));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"_createStream",value:(E=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={unique_name:t},void 0!==n&&(r.ttl=n),e.next=4,this.services.network.post(this.services.config.streamsUri,r);case 4:return e.abrupt("return",e.sent.body);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return E.apply(this,arguments)})},{key:"_getLiveQuery",value:function(e){return this.readRootFromSessionCache(_.LiveQuery.type,e)}},{key:"getCached",value:function(e,t){return e&&this.entities.get(e,t)||null}},{key:"removeFromCacheAndSession",value:function(e,t,n){this.entities.remove(t),this.services.config.sessionStorageEnabled&&this.services.storage.remove(e,t,n)}},{key:"document",value:(R=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureReady();case 2:if("create_new"!==(r=x(t)).mode){e.next=9;break}return e.next=6,this._createDocument(r.id,r.value,r.ttl);case 6:n=e.sent,e.next=33;break;case 9:if(!(i=this.getCached(r.id,p.SyncDocument.type))){e.next=12;break}return e.abrupt("return",new p.SyncDocument(i));case 12:return e.prev=12,e.next=15,this._getDocument(r.id);case 15:n=e.sent,e.next=33;break;case 18:if(e.prev=18,e.t0=e.catch(12),404===e.t0.status&&"open_existing"!==r.mode){e.next=22;break}throw e.t0;case 22:return e.prev=22,e.next=25,this._createDocument(r.id,r.value,r.ttl);case 25:n=e.sent,e.next=33;break;case 28:if(e.prev=28,e.t1=e.catch(22),409!==e.t1.status){e.next=32;break}return e.abrupt("return",this.document(t));case 32:throw e.t1;case 33:return this.storeRootInSessionCache(p.SyncDocument.type,r.id,n),o=new p.SyncDocumentImpl(this.services,n,(function(e,t,n){return s.removeFromCacheAndSession(e,t,n)})),e.abrupt("return",(o=this.entities.store(o),new p.SyncDocument(o)));case 36:case"end":return e.stop()}}),e,this,[[12,18],[22,28]])}))),function(e){return R.apply(this,arguments)})},{key:"map",value:(T=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureReady();case 2:if("create_new"!==(r=x(t)).mode){e.next=9;break}return e.next=6,this._createMap(r.id,r.ttl);case 6:n=e.sent,e.next=33;break;case 9:if(!(i=this.getCached(r.id,v.SyncMap.type))){e.next=12;break}return e.abrupt("return",new v.SyncMap(i));case 12:return e.prev=12,e.next=15,this._getMap(r.id,r.includeItems);case 15:n=e.sent,e.next=33;break;case 18:if(e.prev=18,e.t0=e.catch(12),404===e.t0.status&&"open_existing"!==r.mode){e.next=22;break}throw e.t0;case 22:return e.prev=22,e.next=25,this._createMap(r.id,r.ttl);case 25:n=e.sent,e.next=33;break;case 28:if(e.prev=28,e.t1=e.catch(22),409!==e.t1.status){e.next=32;break}return e.abrupt("return",this.map(t));case 32:throw e.t1;case 33:return this.storeRootInSessionCache(v.SyncMap.type,r.id,n),o=new v.SyncMapImpl(this.services,n,(function(e,t,n){return s.removeFromCacheAndSession(e,t,n)})),e.abrupt("return",(o=this.entities.store(o),new v.SyncMap(o)));case 36:case"end":return e.stop()}}),e,this,[[12,18],[22,28]])}))),function(e){return T.apply(this,arguments)})},{key:"list",value:(M=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureReady();case 2:if("create_new"!==(r=x(t)).mode){e.next=9;break}return e.next=6,this._createList(r.id,r.purpose,r.context,r.ttl);case 6:n=e.sent,e.next=33;break;case 9:if(!(i=this.getCached(r.id,g.SyncList.type))){e.next=12;break}return e.abrupt("return",new g.SyncList(i));case 12:return e.prev=12,e.next=15,this._getList(r.id);case 15:n=e.sent,e.next=33;break;case 18:if(e.prev=18,e.t0=e.catch(12),404===e.t0.status&&"open_existing"!==r.mode){e.next=22;break}throw e.t0;case 22:return e.prev=22,e.next=25,this._createList(r.id,r.purpose,r.context,r.ttl);case 25:n=e.sent,e.next=33;break;case 28:if(e.prev=28,e.t1=e.catch(22),409!==e.t1.status){e.next=32;break}return e.abrupt("return",this.list(t));case 32:throw e.t1;case 33:return this.storeRootInSessionCache(g.SyncList.type,r.id,n),o=new g.SyncListImpl(this.services,n,(function(e,t,n){return s.removeFromCacheAndSession(e,t,n)})),e.abrupt("return",(o=this.entities.store(o),new g.SyncList(o)));case 36:case"end":return e.stop()}}),e,this,[[12,18],[22,28]])}))),function(e){return M.apply(this,arguments)})},{key:"stream",value:(P=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,r,i,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureReady();case 2:if("create_new"!==(r=x(t)).mode){e.next=9;break}return e.next=6,this._createStream(r.id,r.ttl);case 6:n=e.sent,e.next=33;break;case 9:if(!(i=this.getCached(r.id,k.SyncStream.type))){e.next=12;break}return e.abrupt("return",new k.SyncStream(i));case 12:return e.prev=12,e.next=15,this._getStream(r.id);case 15:n=e.sent,e.next=33;break;case 18:if(e.prev=18,e.t0=e.catch(12),404===e.t0.status&&"open_existing"!==r.mode){e.next=22;break}throw e.t0;case 22:return e.prev=22,e.next=25,this._createStream(r.id,r.ttl);case 25:n=e.sent,e.next=33;break;case 28:if(e.prev=28,e.t1=e.catch(22),409!==e.t1.status){e.next=32;break}return e.abrupt("return",this.stream(t));case 32:throw e.t1;case 33:return this.storeRootInSessionCache(k.SyncStream.type,r.id,n),o=new k.SyncStreamImpl(this.services,n,(function(e,t,n){return s.removeFromCacheAndSession(e,t,n)})),e.abrupt("return",(o=this.entities.store(o),new k.SyncStream(o)));case 36:case"end":return e.stop()}}),e,this,[[12,18],[22,28]])}))),function(e){return P.apply(this,arguments)})},{key:"shutdown",value:(S=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.subscriptions.shutdown();case 2:return e.next=4,this.services.twilsock.disconnect();case 4:case"end":return e.stop()}}),e,this)}))),function(){return S.apply(this,arguments)})},{key:"updateToken",value:(O=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t?this.services.twilsock.updateToken(t):Promise.reject(new Error("A valid Twilio token should be provided")));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"liveQuery",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t,n){var r,i,o,a,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureReady();case 2:if(t&&"string"==typeof t){e.next=4;break}throw new Error("Index name must contain a non-empty string value");case 4:return r=new s.UriBuilder(this.services.config.insightsUri).pathSegment(t).pathSegment("Items").build(),e.next=7,C.queryItems({network:this.services.network,uri:r,queryString:n,type:_.LiveQuery.type});case 7:return i=e.sent,(o=this.getCached(i.query_id,_.LiveQuery.type))||((a=this._getLiveQuery(i.query_id))||(a={indexName:t,queryExpression:n,sid:i.query_id,queryUri:r,last_event_id:i.last_event_id}),o=new _.LiveQueryImpl(a,this.services,(function(e,t,n){return u.removeFromCacheAndSession(e,t,n)}),i.items)),e.abrupt("return",(this.storeRootInSessionCache(_.LiveQuery.type,i.query_id,o.liveQueryDescriptor),o=this.entities.store(o),new _.LiveQuery(o)));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"instantQuery",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureReady();case 2:return e.abrupt("return",new _.InstantQuery({indexName:t,network:this.services.network,insightsUri:this.services.config.insightsUri,liveQueryCreator:function(e,t){return n.liveQuery(e,t)}}));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"connectionState",get:function(){return this.services.notifications.connectionState}}],[{key:"version",get:function(){return w}}]),t}(r.EventEmitter);t.Client=O,t.SyncClient=O,t.default=O}}]);
//# sourceMappingURL=8-es5.a13301a3f45c1350ef77.js.map